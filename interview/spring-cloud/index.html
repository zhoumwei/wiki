<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Spring Cloud | 知识库</title><meta name="description" content="涵盖Java、Spring、Vue、Node.js等技术知识">
    <link rel="stylesheet" href="/wiki/assets/css/styles.2a121ef9.css">
    <link rel="preload" href="/wiki/assets/js/runtime~app.040039f7.js" as="script"><link rel="preload" href="/wiki/assets/css/styles.2a121ef9.css" as="style"><link rel="preload" href="/wiki/assets/js/768.e6d4205d.js" as="script"><link rel="preload" href="/wiki/assets/js/app.012b8093.js" as="script">
    <link rel="prefetch" href="/wiki/assets/js/solution_smart-marketing_index.html.c6a04243.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_high-availability_index.html.1ef390b5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_react_index.html.4aacb360.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_aiops_index.html.9565eae6.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_swift_index.html.26390310.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_embedded_index.html.1d42b838.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_nodejs_index.html.42d74f45.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_python_index.html.e9a522b3.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-boot_index.html.38761574.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_jdk-changes_index.html.25824bdf.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_tools.html.f03a4487.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_r_index.html.16153cc5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_vue_index.html.63167ab5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_concurrency_index.html.e362b849.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_advanced_index.html.71c33c5c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-cloud_index.html.fd0f185e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_message-queue_index.html.b4b3c3e6.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_big-data_index.html.bbd64ec0.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_index.html.09e48380.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_database_index.html.14a46108.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_basic_index.html.bddf19ef.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_ml_index.html.7188e38d.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_collections_index.html.0c5ba651.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_rl_index.html.6c114c3c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_implementation.html.5e17714b.js" as="script"><link rel="prefetch" href="/wiki/assets/js/get-started.html.c4557635.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_kubecost-installation.html.ab8b0c04.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_risk-trends.html.6525c9fc.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_case-studies.html.08c4404f.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_index.html.f1c67882.js" as="script"><link rel="prefetch" href="/wiki/assets/js/index.html.6a2169db.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_concept.html.0854ee3f.js" as="script"><link rel="prefetch" href="/wiki/assets/js/404.html.a5b4614e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/wiki/"><img class="vp-site-logo" src="/wiki/logo/logo.svg" alt="知识库"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">知识库</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="开始阅读"><!--[--><!--[--><!--]--><!--]-->开始阅读<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="Java基础"><!--[--><!--[--><!--]--><!--]-->Java基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Java高级"><!--[--><!--[--><!--]--><!--]-->Java高级<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Java集合详解"><!--[--><!--[--><!--]--><!--]-->Java集合详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Java多线程详解"><!--[--><!--[--><!--]--><!--]-->Java多线程详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDK版本变化详解"><!--[--><!--[--><!--]--><!--]-->JDK版本变化详解<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/finops/" aria-label="FinOps"><!--[--><!--[--><!--]--><!--]-->FinOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="高可用架构"><!--[--><!--[--><!--]--><!--]-->高可用架构<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="智能营销"><!--[--><!--[--><!--]--><!--]-->智能营销<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="开始阅读"><!--[--><!--[--><!--]--><!--]-->开始阅读<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="Java基础"><!--[--><!--[--><!--]--><!--]-->Java基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Java高级"><!--[--><!--[--><!--]--><!--]-->Java高级<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Java集合详解"><!--[--><!--[--><!--]--><!--]-->Java集合详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Java多线程详解"><!--[--><!--[--><!--]--><!--]-->Java多线程详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDK版本变化详解"><!--[--><!--[--><!--]--><!--]-->JDK版本变化详解<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/finops/" aria-label="FinOps"><!--[--><!--[--><!--]--><!--]-->FinOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="高可用架构"><!--[--><!--[--><!--]--><!--]-->高可用架构<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="智能营销"><!--[--><!--[--><!--]--><!--]-->智能营销<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud面试题"><!--[--><!--[--><!--]--><!--]-->Spring Cloud面试题<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="spring-cloud" tabindex="-1"><a class="header-anchor" href="#spring-cloud"><span>Spring Cloud</span></a></h1><h2 id="_1-spring-cloud基础" tabindex="-1"><a class="header-anchor" href="#_1-spring-cloud基础"><span>1. Spring Cloud基础</span></a></h2><h3 id="q1-什么是spring-cloud-它解决了什么问题" tabindex="-1"><a class="header-anchor" href="#q1-什么是spring-cloud-它解决了什么问题"><span>Q1: 什么是Spring Cloud？它解决了什么问题？</span></a></h3><p><strong>答：</strong> Spring Cloud是一系列框架的有序集合，基于Spring Boot实现，用于快速构建分布式系统的常见模式。</p><p>解决的问题：</p><ul><li><strong>配置管理</strong>：统一管理微服务的配置</li><li><strong>服务发现</strong>：自动发现和注册服务实例</li><li><strong>断路器</strong>：防止服务雪崩</li><li><strong>智能路由</strong>：负载均衡和服务路由</li><li><strong>微代理</strong>：API网关</li><li><strong>控制总线</strong>：分布式系统中的消息传递</li><li><strong>一次性令牌</strong>：安全认证</li><li><strong>全局锁</strong>：分布式锁</li><li><strong>领导选举</strong>：集群中的主节点选举</li><li><strong>分布式会话</strong>：跨服务的会话管理</li><li><strong>集群状态</strong>：监控集群健康状态</li></ul><h3 id="q2-spring-cloud的核心组件有哪些" tabindex="-1"><a class="header-anchor" href="#q2-spring-cloud的核心组件有哪些"><span>Q2: Spring Cloud的核心组件有哪些？</span></a></h3><p><strong>答：</strong> Spring Cloud的核心组件包括：</p><ol><li><p><strong>服务注册与发现</strong>：</p><ul><li>Eureka：Netflix开源的服务发现组件</li><li>Consul：HashiCorp开源的服务发现和配置工具</li><li>Zookeeper：Apache开源的分布式协调服务</li></ul></li><li><p><strong>负载均衡</strong>：</p><ul><li>Ribbon：客户端负载均衡器</li><li>Spring Cloud LoadBalancer：Spring官方的负载均衡器</li></ul></li><li><p><strong>服务调用</strong>：</p><ul><li>Feign：声明式的Web服务客户端</li><li>OpenFeign：Feign的升级版</li></ul></li><li><p><strong>熔断器</strong>：</p><ul><li>Hystrix：断路器模式实现</li><li>Resilience4j：轻量级容错库</li></ul></li><li><p><strong>API网关</strong>：</p><ul><li>Zuul：Netflix开源的API网关</li><li>Spring Cloud Gateway：Spring官方的API网关</li></ul></li><li><p><strong>配置中心</strong>：</p><ul><li>Spring Cloud Config：分布式配置管理</li></ul></li><li><p><strong>消息总线</strong>：</p><ul><li>Spring Cloud Bus：消息总线</li></ul></li><li><p><strong>链路追踪</strong>：</p><ul><li>Sleuth：分布式链路追踪</li><li>Zipkin：分布式追踪系统</li></ul></li></ol><h3 id="q3-微服务架构的优缺点" tabindex="-1"><a class="header-anchor" href="#q3-微服务架构的优缺点"><span>Q3: 微服务架构的优缺点？</span></a></h3><p><strong>答：</strong></p><p><strong>优点：</strong></p><ul><li>技术多样性：不同服务可以使用不同技术栈</li><li>独立部署：每个服务可以独立部署和扩展</li><li>故障隔离：单个服务故障不会影响整个系统</li><li>团队自治：不同团队可以独立开发和维护各自的服务</li><li>可扩展性强：可以根据业务需求独立扩展特定服务</li></ul><p><strong>缺点：</strong></p><ul><li>分布式复杂性：网络延迟、数据一致性等问题</li><li>运维复杂：需要管理多个服务实例</li><li>测试复杂：需要考虑服务间的依赖关系</li><li>网络通信开销：服务间调用增加网络延迟</li><li>数据一致性：分布式事务处理复杂</li></ul><h2 id="_2-服务注册与发现" tabindex="-1"><a class="header-anchor" href="#_2-服务注册与发现"><span>2. 服务注册与发现</span></a></h2><h3 id="q4-eureka的工作原理" tabindex="-1"><a class="header-anchor" href="#q4-eureka的工作原理"><span>Q4: Eureka的工作原理？</span></a></h3><p><strong>答：</strong> Eureka是Netflix开源的服务发现组件，包含两个核心组件：</p><ol><li><p><strong>Eureka Server（服务注册中心）</strong>：</p><ul><li>提供服务注册和发现功能</li><li>维护服务实例的注册信息</li></ul></li><li><p><strong>Eureka Client（服务提供者/消费者）</strong>：</p><ul><li>向Eureka Server注册自身服务</li><li>定期发送心跳维持连接</li><li>获取其他服务的注册信息</li></ul></li></ol><p><strong>工作流程：</strong></p><ol><li>服务启动时向Eureka Server注册服务信息</li><li>Eureka Server保存服务注册信息</li><li>服务消费者定期从Eureka Server获取服务注册信息</li><li>服务提供者定期向Eureka Server发送心跳</li><li>Eureka Server根据心跳检测服务可用性</li><li>服务下线时主动注销或超时后自动剔除</li></ol><h3 id="q5-eureka和consul的区别" tabindex="-1"><a class="header-anchor" href="#q5-eureka和consul的区别"><span>Q5: Eureka和Consul的区别？</span></a></h3><p><strong>答：</strong></p><table><thead><tr><th>特性</th><th>Eureka</th><th>Consul</th></tr></thead><tbody><tr><td>一致性算法</td><td>AP（可用性优先）</td><td>CP（一致性优先）</td></tr><tr><td>服务健康检查</td><td>心跳检测</td><td>多种健康检查方式</td></tr><tr><td>KV存储</td><td>不支持</td><td>支持</td></tr><tr><td>多数据中心</td><td>不支持</td><td>支持</td></tr><tr><td>CAP理论</td><td>AP</td><td>CP</td></tr><tr><td>Web UI</td><td>支持</td><td>支持</td></tr><tr><td>安全性</td><td>相对简单</td><td>ACL和TLS支持</td></tr></tbody></table><h3 id="q6-服务下线的处理机制" tabindex="-1"><a class="header-anchor" href="#q6-服务下线的处理机制"><span>Q6: 服务下线的处理机制？</span></a></h3><p><strong>答：</strong> 服务下线的处理机制包括：</p><ol><li><p><strong>主动下线</strong>：</p><ul><li>服务正常关闭时调用unregister接口</li><li>Eureka Server立即移除服务实例</li></ul></li><li><p><strong>被动下线</strong>：</p><ul><li>服务异常终止，无法发送取消注册请求</li><li>Eureka Server通过心跳检测发现服务不可用</li><li>超过一定时间（默认90秒）未收到心跳则移除实例</li></ul></li><li><p><strong>自我保护机制</strong>：</p><ul><li>当短时间内大量服务实例失去联系时触发</li><li>防止因网络故障误删正常服务实例</li><li>保证注册中心的高可用性</li></ul></li></ol><h2 id="_3-负载均衡" tabindex="-1"><a class="header-anchor" href="#_3-负载均衡"><span>3. 负载均衡</span></a></h2><h3 id="q7-ribbon和spring-cloud-loadbalancer的区别" tabindex="-1"><a class="header-anchor" href="#q7-ribbon和spring-cloud-loadbalancer的区别"><span>Q7: Ribbon和Spring Cloud LoadBalancer的区别？</span></a></h3><p><strong>答：</strong></p><p><strong>Ribbon：</strong></p><ul><li>Netflix开源的客户端负载均衡器</li><li>已进入维护模式，不再积极开发</li><li>基于HTTP和TCP客户端</li><li>集成在Netflix OSS栈中</li></ul><p><strong>Spring Cloud LoadBalancer：</strong></p><ul><li>Spring官方推出的负载均衡器</li><li>用于替代Ribbon</li><li>响应式编程支持</li><li>更好的与Spring生态系统集成</li></ul><h3 id="q8-负载均衡策略有哪些" tabindex="-1"><a class="header-anchor" href="#q8-负载均衡策略有哪些"><span>Q8: 负载均衡策略有哪些？</span></a></h3><p><strong>答：</strong> 常见的负载均衡策略包括：</p><ol><li><strong>轮询（Round Robin）</strong>：按顺序依次分配请求</li><li><strong>随机（Random）</strong>：随机选择服务实例</li><li><strong>权重（Weighted）</strong>：根据权重分配请求</li><li><strong>最少连接（Least Connections）</strong>：选择连接数最少的实例</li><li><strong>响应时间（Response Time）</strong>：选择响应时间最短的实例</li><li><strong>可用性（Availability）</strong>：根据实例的可用性分配请求</li></ol><h2 id="_4-服务调用" tabindex="-1"><a class="header-anchor" href="#_4-服务调用"><span>4. 服务调用</span></a></h2><h3 id="q9-openfeign的工作原理" tabindex="-1"><a class="header-anchor" href="#q9-openfeign的工作原理"><span>Q9: OpenFeign的工作原理？</span></a></h3><p><strong>答：</strong> OpenFeign是声明式的Web服务客户端，使编写Web服务客户端变得更加简单。</p><p><strong>工作原理：</strong></p><ol><li>启动时扫描@FeignClient注解的接口</li><li>为每个接口创建动态代理对象</li><li>解析接口上的注解（@RequestMapping等）</li><li>将方法调用转换为HTTP请求</li><li>通过负载均衡器选择服务实例</li><li>发送HTTP请求并接收响应</li><li>将响应结果反序列化为Java对象</li></ol><p><strong>关键组件：</strong></p><ul><li>Contract：契约，解析注解</li><li>Encoder：编码器，将请求参数编码为HTTP请求体</li><li>Decoder：解码器，将HTTP响应体解码为Java对象</li><li>Client：客户端，发送HTTP请求</li></ul><h3 id="q10-feign如何实现负载均衡" tabindex="-1"><a class="header-anchor" href="#q10-feign如何实现负载均衡"><span>Q10: Feign如何实现负载均衡？</span></a></h3><p><strong>答：</strong> Feign通过集成Ribbon或Spring Cloud LoadBalancer实现负载均衡：</p><ol><li><strong>服务发现</strong>：通过Eureka等服务注册中心获取服务实例列表</li><li><strong>负载均衡算法</strong>：根据配置的负载均衡策略选择服务实例</li><li><strong>请求转发</strong>：将请求发送到选定的服务实例</li></ol><p>配置示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user-service&quot;</span><span class="token punctuation">,</span> configuration <span class="token operator">=</span> <span class="token class-name">FeignConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserServiceClient</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/users/{id}&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token class-name">User</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-熔断器" tabindex="-1"><a class="header-anchor" href="#_5-熔断器"><span>5. 熔断器</span></a></h2><h3 id="q11-hystrix的熔断机制" tabindex="-1"><a class="header-anchor" href="#q11-hystrix的熔断机制"><span>Q11: Hystrix的熔断机制？</span></a></h3><p><strong>答：</strong> Hystrix的熔断机制包括三个状态：</p><ol><li><p><strong>Closed（关闭状态）</strong>：</p><ul><li>正常状态下，所有请求正常通过</li><li>统计失败率和延迟等指标</li></ul></li><li><p><strong>Open（打开状态）</strong>：</p><ul><li>当失败率达到阈值时触发熔断</li><li>所有请求直接失败，不调用实际服务</li><li>持续一段时间后进入半开状态</li></ul></li><li><p><strong>Half-Open（半开状态）</strong>：</p><ul><li>允许少量请求通过</li><li>如果请求成功则恢复到关闭状态</li><li>如果请求失败则回到打开状态</li></ul></li></ol><h3 id="q12-resilience4j相比hystrix的优势" tabindex="-1"><a class="header-anchor" href="#q12-resilience4j相比hystrix的优势"><span>Q12: Resilience4j相比Hystrix的优势？</span></a></h3><p><strong>答：</strong> Resilience4j相比Hystrix的优势：</p><ol><li><strong>轻量级</strong>：体积小，依赖少</li><li><strong>响应式支持</strong>：天然支持Reactive Streams</li><li><strong>函数式编程</strong>：提供函数式编程接口</li><li><strong>模块化设计</strong>：可以按需引入需要的模块</li><li><strong>更好的性能</strong>：基于Vavr库，性能更好</li><li><strong>活跃的社区</strong>：持续更新和维护</li></ol><h2 id="_6-api网关" tabindex="-1"><a class="header-anchor" href="#_6-api网关"><span>6. API网关</span></a></h2><h3 id="q13-zuul和spring-cloud-gateway的区别" tabindex="-1"><a class="header-anchor" href="#q13-zuul和spring-cloud-gateway的区别"><span>Q13: Zuul和Spring Cloud Gateway的区别？</span></a></h3><p><strong>答：</strong></p><table><thead><tr><th>特性</th><th>Zuul 1.x</th><th>Zuul 2.x</th><th>Spring Cloud Gateway</th></tr></thead><tbody><tr><td>性能</td><td>同步阻塞</td><td>异步非阻塞</td><td>异步非阻塞</td></tr><tr><td>编程模型</td><td>Servlet</td><td>Netty + RxJava</td><td>WebFlux (Reactor)</td></tr><tr><td>过滤器</td><td>请求级别</td><td>请求级别</td><td>交换级别</td></tr><tr><td>路由配置</td><td>properties/yaml</td><td>properties/yaml</td><td>RouteLocator/DSL</td></tr></tbody></table><h3 id="q14-spring-cloud-gateway的核心概念" tabindex="-1"><a class="header-anchor" href="#q14-spring-cloud-gateway的核心概念"><span>Q14: Spring Cloud Gateway的核心概念？</span></a></h3><p><strong>答：</strong> Spring Cloud Gateway的核心概念包括：</p><ol><li><strong>Route（路由）</strong>：路由是构建网关的基本模块，由ID、目标URI、断言集合和过滤器集合组成</li><li><strong>Predicate（断言）</strong>：匹配HTTP请求的条件，如路径、方法、头信息等</li><li><strong>Filter（过滤器）</strong>：对请求和响应进行修改的组件</li></ol><p>配置示例：</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code><span class="line"><span class="token key atrule">spring</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">cloud</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">gateway</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token key atrule">routes</span><span class="token punctuation">:</span></span>
<span class="line">      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service</span>
<span class="line">        <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//user<span class="token punctuation">-</span>service</span>
<span class="line">        <span class="token key atrule">predicates</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> Path=/api/users/<span class="token important">**</span></span>
<span class="line">        <span class="token key atrule">filters</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token punctuation">-</span> StripPrefix=2</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-配置中心" tabindex="-1"><a class="header-anchor" href="#_7-配置中心"><span>7. 配置中心</span></a></h2><h3 id="q15-spring-cloud-config的工作原理" tabindex="-1"><a class="header-anchor" href="#q15-spring-cloud-config的工作原理"><span>Q15: Spring Cloud Config的工作原理？</span></a></h3><p><strong>答：</strong> Spring Cloud Config为分布式系统提供外部化配置支持。</p><p><strong>架构组成：</strong></p><ol><li><strong>Config Server</strong>：配置服务器，提供配置文件的管理</li><li><strong>Config Client</strong>：配置客户端，从配置服务器获取配置</li></ol><p><strong>工作流程：</strong></p><ol><li>Config Server启动时连接Git仓库或其他存储</li><li>Client启动时向Config Server请求配置</li><li>Config Server从存储中读取配置并返回给Client</li><li>Client将配置加载到应用环境中</li></ol><p><strong>刷新机制：</strong></p><ul><li>通过@RefreshScope注解实现配置刷新</li><li>使用Spring Cloud Bus实现批量刷新</li></ul><h3 id="q16-配置的优先级顺序" tabindex="-1"><a class="header-anchor" href="#q16-配置的优先级顺序"><span>Q16: 配置的优先级顺序？</span></a></h3><p><strong>答：</strong> Spring Cloud Config配置的优先级顺序（从高到低）：</p><ol><li><strong>bootstrap.properties/yml</strong>：引导配置，最先加载</li><li><strong>远程配置中心</strong>：从Config Server获取的配置</li><li><strong>本地配置文件</strong>：application.properties/yml</li><li><strong>环境变量</strong></li><li><strong>命令行参数</strong></li></ol><p>注意事项：</p><ul><li>bootstrap配置优先级最高，不能被覆盖</li><li>远程配置可以覆盖本地配置</li><li>配置刷新时，远程配置会重新加载</li></ul><h2 id="_8-链路追踪" tabindex="-1"><a class="header-anchor" href="#_8-链路追踪"><span>8. 链路追踪</span></a></h2><h3 id="q17-spring-cloud-sleuth的作用" tabindex="-1"><a class="header-anchor" href="#q17-spring-cloud-sleuth的作用"><span>Q17: Spring Cloud Sleuth的作用？</span></a></h3><p><strong>答：</strong> Spring Cloud Sleuth为微服务架构提供分布式链路追踪解决方案。</p><p><strong>主要功能：</strong></p><ol><li><strong>Trace ID和Span ID</strong>：为每个请求分配唯一的Trace ID，为每个操作分配Span ID</li><li><strong>日志关联</strong>：将同一请求的所有日志关联起来</li><li><strong>性能分析</strong>：统计各服务的响应时间和调用次数</li><li><strong>问题定位</strong>：快速定位分布式系统中的性能瓶颈</li></ol><p><strong>集成Zipkin：</strong></p><ul><li>Sleuth负责生成追踪数据</li><li>Zipkin负责收集、存储和展示追踪数据</li></ul><h3 id="q18-分布式事务的解决方案" tabindex="-1"><a class="header-anchor" href="#q18-分布式事务的解决方案"><span>Q18: 分布式事务的解决方案？</span></a></h3><p><strong>答：</strong> 分布式事务的常见解决方案：</p><ol><li><p><strong>两阶段提交（2PC）</strong>：</p><ul><li>准备阶段：协调者询问参与者是否可以提交</li><li>提交阶段：协调者根据参与者响应决定提交或回滚</li></ul></li><li><p><strong>三阶段提交（3PC）</strong>：</p><ul><li>CanCommit阶段</li><li>PreCommit阶段</li><li>DoCommit阶段</li></ul></li><li><p><strong>补偿事务（TCC）</strong>：</p><ul><li>Try：预留资源</li><li>Confirm：确认执行</li><li>Cancel：取消执行</li></ul></li><li><p><strong>消息队列</strong>：</p><ul><li>通过消息队列保证最终一致性</li></ul></li><li><p><strong>Seata</strong>：</p><ul><li>阿里巴巴开源的分布式事务解决方案</li><li>支持AT、TCC、Saga等模式</li></ul></li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/wiki/assets/js/runtime~app.040039f7.js" defer></script><script src="/wiki/assets/js/768.e6d4205d.js" defer></script><script src="/wiki/assets/js/app.012b8093.js" defer></script>
  </body>
</html>
