<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>07 Semantic Kernel.Bak   Index | çŸ¥è¯†åº“</title><meta name="description" content="æ¶µç›–Javaã€Springã€Vueã€Node.jsç­‰æŠ€æœ¯çŸ¥è¯†">
    <link rel="stylesheet" href="/wiki/assets/css/styles.dd0ba6d4.css">
    <link rel="preload" href="/wiki/assets/js/runtime~app.2c74ba0d.js" as="script"><link rel="preload" href="/wiki/assets/css/styles.dd0ba6d4.css" as="style"><link rel="preload" href="/wiki/assets/js/768.e6d4205d.js" as="script"><link rel="preload" href="/wiki/assets/js/app.5b328b55.js" as="script">
    <link rel="prefetch" href="/wiki/assets/js/solution_smart-marketing_index.html.066d2d5f.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_05-rag-embeddings.html.5b793696.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_high-availability_index.html.1ef390b5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_react_index.html.48c1e14e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_02-prompt.html.e84448e0.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_08-langchain.html.0b85e079.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_06-assistants-api.html.aee72ff3.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_aiops_index.html.95469b02.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_07-llamaindex.html.62de5a73.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_swift_index.html.0fd2295e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_tools.html.093c30a9.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_03-func-call.html.80139b7e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_09-llm-tools.html.34caf241.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_07-semantic-kernel.bak.html.91e47126.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_embedded_index.html.5d403469.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_04-ai-programming.html.b02837a6.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_nodejs_index.html.5a23d5c1.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_python_index.html.b138fbf3.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-boot_index.html.75c329c5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_jdk-changes_index.html.1bf5685c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_01-intro.html.be7abb56.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_r_index.html.01fc91b5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_vue_index.html.7ae1fc67.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_concurrency_index.html.e362b849.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_llm-faq.html.f09e7381.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_04-ai-programming-practice.html.fcc21d00.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_advanced_index.html.71c33c5c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-cloud_index.html.1230cde8.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_message-queue_index.html.604a378b.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_big-data_index.html.d9a7770e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_database_index.html.943dfb75.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_basic_index.html.e6c1018a.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_ml_index.html.f03756d1.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_asset_kubecost_FinOps Essentials_ Best Practices for Product Teams.html.8990a35f.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_ChatALL.html.e7d49092.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_collections_index.html.8d492322.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_rl_index.html.adc2eeab.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_implementation.html.a3ef2295.js" as="script"><link rel="prefetch" href="/wiki/assets/js/get-started.html.776b8f4a.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_kubecost-installation.html.f28b5b94.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_risk-trends.html.66e797bc.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_10-agent.html.5c170d47.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_case-studies.html.e283feaa.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_index.html.aac8183e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/index.html.599be039.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_index.html.6b9b5f38.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_finops_concept.html.6e93951e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/404.html.66d54fed.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/wiki/"><img class="vp-site-logo" src="/wiki/logo/logo.svg" alt="çŸ¥è¯†åº“"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">çŸ¥è¯†åº“</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="é¦–é¡µ"><!--[--><!--[--><!--]--><!--]-->é¦–é¡µ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="å¼€å§‹é˜…è¯»"><!--[--><!--[--><!--]--><!--]-->å¼€å§‹é˜…è¯»<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="JavaåŸºç¡€"><!--[--><!--[--><!--]--><!--]-->JavaåŸºç¡€<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Javaé«˜çº§"><!--[--><!--[--><!--]--><!--]-->Javaé«˜çº§<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Javaé›†åˆè¯¦è§£"><!--[--><!--[--><!--]--><!--]-->Javaé›†åˆè¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Javaå¤šçº¿ç¨‹è¯¦è§£"><!--[--><!--[--><!--]--><!--]-->Javaå¤šçº¿ç¨‹è¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDKç‰ˆæœ¬å˜åŒ–è¯¦è§£"><!--[--><!--[--><!--]--><!--]-->JDKç‰ˆæœ¬å˜åŒ–è¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="æŠ€æœ¯æ•™ç¨‹"><span class="title">æŠ€æœ¯æ•™ç¨‹</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="æŠ€æœ¯æ•™ç¨‹"><span class="title">æŠ€æœ¯æ•™ç¨‹</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/wiki/tutorial/llm/" aria-label="LLM"><!--[--><!--[--><!--]--><!--]-->LLM<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="è§£å†³æ–¹æ¡ˆ"><span class="title">è§£å†³æ–¹æ¡ˆ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="è§£å†³æ–¹æ¡ˆ"><span class="title">è§£å†³æ–¹æ¡ˆ</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/finops/" aria-label="FinOps"><!--[--><!--[--><!--]--><!--]-->FinOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="é«˜å¯ç”¨æ¶æ„"><!--[--><!--[--><!--]--><!--]-->é«˜å¯ç”¨æ¶æ„<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="æ™ºèƒ½è¥é”€"><!--[--><!--[--><!--]--><!--]-->æ™ºèƒ½è¥é”€<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="é¦–é¡µ"><!--[--><!--[--><!--]--><!--]-->é¦–é¡µ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="å¼€å§‹é˜…è¯»"><!--[--><!--[--><!--]--><!--]-->å¼€å§‹é˜…è¯»<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="JavaåŸºç¡€"><!--[--><!--[--><!--]--><!--]-->JavaåŸºç¡€<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Javaé«˜çº§"><!--[--><!--[--><!--]--><!--]-->Javaé«˜çº§<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Javaé›†åˆè¯¦è§£"><!--[--><!--[--><!--]--><!--]-->Javaé›†åˆè¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Javaå¤šçº¿ç¨‹è¯¦è§£"><!--[--><!--[--><!--]--><!--]-->Javaå¤šçº¿ç¨‹è¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDKç‰ˆæœ¬å˜åŒ–è¯¦è§£"><!--[--><!--[--><!--]--><!--]-->JDKç‰ˆæœ¬å˜åŒ–è¯¦è§£<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="æŠ€æœ¯æ•™ç¨‹"><span class="title">æŠ€æœ¯æ•™ç¨‹</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="æŠ€æœ¯æ•™ç¨‹"><span class="title">æŠ€æœ¯æ•™ç¨‹</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/wiki/tutorial/llm/" aria-label="LLM"><!--[--><!--[--><!--]--><!--]-->LLM<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="è§£å†³æ–¹æ¡ˆ"><span class="title">è§£å†³æ–¹æ¡ˆ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="è§£å†³æ–¹æ¡ˆ"><span class="title">è§£å†³æ–¹æ¡ˆ</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/finops/" aria-label="FinOps"><!--[--><!--[--><!--]--><!--]-->FinOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="é«˜å¯ç”¨æ¶æ„"><!--[--><!--[--><!--]--><!--]-->é«˜å¯ç”¨æ¶æ„<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="æ™ºèƒ½è¥é”€"><!--[--><!--[--><!--]--><!--]-->æ™ºèƒ½è¥é”€<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading" href="/wiki/tutorial/llm/" aria-label="LLMå­¦ä¹ æ•™ç¨‹"><!--[--><!--[--><!--]--><!--]-->LLMå­¦ä¹ æ•™ç¨‹<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="_07-semantic-kernel-bak-index" tabindex="-1"><a class="header-anchor" href="#_07-semantic-kernel-bak-index"><span>07 Semantic Kernel.Bak Index</span></a></h1><h1 id="ğŸ’¡-è¿™èŠ‚è¯¾ä¼šå¸¦ç»™ä½ " tabindex="-1"><a class="header-anchor" href="#ğŸ’¡-è¿™èŠ‚è¯¾ä¼šå¸¦ç»™ä½ "><span>ğŸ’¡ è¿™èŠ‚è¯¾ä¼šå¸¦ç»™ä½ </span></a></h1><ol><li>Semantic Kernel çš„ç‰¹ç‚¹å’ŒåŸºæœ¬ç”¨æ³•</li><li>äº†è§£ Semantic Kernel å†…ç½®çš„å·¥å…·</li><li>å¦‚ä½•ç”¨å¥½ SDK ç®€åŒ–åŸºäº LLM çš„åº”ç”¨å¼€å‘</li></ol><p>å¼€å§‹ä¸Šè¯¾ï¼</p><h2 id="ğŸ“-è¿™èŠ‚è¯¾æ€ä¹ˆå­¦" tabindex="-1"><a class="header-anchor" href="#ğŸ“-è¿™èŠ‚è¯¾æ€ä¹ˆå­¦"><span>ğŸ“ è¿™èŠ‚è¯¾æ€ä¹ˆå­¦</span></a></h2><p>ä»£ç èƒ½åŠ›è¦æ±‚ï¼š<strong>ä¸­é«˜</strong>ï¼ŒAI/æ•°å­¦åŸºç¡€è¦æ±‚ï¼š<strong>æ— </strong></p><ol><li>æœ‰ç¼–ç¨‹åŸºç¡€çš„åŒå­¦ <ul><li>å…³æ³¨è®¾è®¡æ¨¡å¼ï¼Œå®ç°ç»†èŠ‚</li></ul></li><li>æ²¡æœ‰ç¼–ç¨‹åŸºç¡€çš„åŒå­¦ <ul><li>å°½é‡ç†è§£ SDK çš„æ¦‚å¿µå’Œä»·å€¼ï¼Œå°è¯•ä½“ä¼šä½¿ç”¨ SDK å‰åçš„å·®åˆ«ä¸æ„ä¹‰</li></ul></li></ol><h2 id="_1ã€å¤§è¯­è¨€æ¨¡å‹å¼€å‘æ¡†æ¶çš„ä»·å€¼æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1ã€å¤§è¯­è¨€æ¨¡å‹å¼€å‘æ¡†æ¶çš„ä»·å€¼æ˜¯ä»€ä¹ˆ"><span>1ã€å¤§è¯­è¨€æ¨¡å‹å¼€å‘æ¡†æ¶çš„ä»·å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h2><p>æ‰€æœ‰å¼€å‘æ¡†æ¶ï¼ˆSDKï¼‰çš„æ ¸å¿ƒä»·å€¼ï¼Œéƒ½æ˜¯é™ä½å¼€å‘ã€ç»´æŠ¤æˆæœ¬ã€‚</p><p>å¤§è¯­è¨€æ¨¡å‹å¼€å‘æ¡†æ¶çš„ä»·å€¼ï¼Œæ˜¯è®©å¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°å¼€å‘åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„åº”ç”¨ã€‚ä¸»è¦æä¾›ä¸¤ç±»å¸®åŠ©ï¼š</p><ol><li>ç¬¬ä¸‰æ–¹èƒ½åŠ›æŠ½è±¡ã€‚æ¯”å¦‚ LLMã€å‘é‡æ•°æ®åº“ã€æœç´¢å¼•æ“ç­‰</li><li>å¸¸ç”¨å·¥å…·ã€æ–¹æ¡ˆå°è£…</li><li>åº•å±‚å®ç°å°è£…ã€‚æ¯”å¦‚æµå¼æ¥å£ã€è¶…æ—¶é‡è¿ã€å¼‚æ­¥ä¸å¹¶è¡Œç­‰</li></ol><p>å¥½çš„å¼€å‘æ¡†æ¶ï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>å¯é æ€§ã€é²æ£’æ€§</li><li>å¯ç»´æŠ¤æ€§é«˜</li><li>é«˜å†…èšã€ä½è€¦åˆ</li><li>æ˜“ç”¨</li></ol><p>ä¸¾äº›é€šä¿—çš„ä¾‹å­ï¼š</p><ul><li>ä¸å¤–éƒ¨åŠŸèƒ½è§£ä¾èµ– <ul><li>æ¯”å¦‚å¯ä»¥éšæ„æ›´æ¢ LLM è€Œä¸ç”¨å¤§é‡é‡æ„ä»£ç </li><li>æ›´æ¢ä¸‰æ–¹å·¥å…·ä¹ŸåŒç†</li></ul></li><li>ç»å¸¸å˜çš„éƒ¨åˆ†è¦åœ¨å¤–éƒ¨ç»´æŠ¤è€Œä¸æ˜¯æ”¾åœ¨ä»£ç é‡Œ <ul><li>æ¯”å¦‚ Prompt æ¨¡æ¿</li></ul></li><li>å„ç§ç¯å¢ƒä¸‹éƒ½é€‚ç”¨ <ul><li>æ¯”å¦‚çº¿ç¨‹å®‰å…¨</li></ul></li><li>æ–¹ä¾¿è°ƒè¯•å’Œæµ‹è¯• <ul><li>è‡³å°‘è¦èƒ½æ„Ÿè§‰åˆ°ç”¨äº†æ¯”ä¸ç”¨æ–¹ä¾¿å§</li><li>åˆæ³•çš„è¾“å…¥ä¸ä¼šå¼•å‘æ¡†æ¶å†…éƒ¨çš„æŠ¥é”™</li></ul></li></ul><blockquote><p>âœ… <strong>Tip:</strong> åˆ’é‡ç‚¹ï¼šé€‰å¯¹äº†æ¡†æ¶ï¼Œäº‹åŠåŠŸå€ï¼›åä¹‹ï¼Œäº‹å€åŠŸåŠã€‚</p></blockquote><h2 id="_2ã€semantic-kernel" tabindex="-1"><a class="header-anchor" href="#_2ã€semantic-kernel"><span>2ã€Semantic Kernel</span></a></h2><p>ã€Œ Today&#39;s AI models can easily generate messages and images for users. While this is helpful when building a simple chat app, it is not enough to build fully automated AI agents that can automate business processes and empower users to achieve more. To do so, you would need a framework that can take the responses from these models and use them to call existing code to actually do something productive. ã€</p><ol><li>Semantic Kernel æ˜¯å¾®è½¯ç ”å‘çš„ä¸€ä¸ªå¼€æºçš„ï¼Œé¢å‘å¤§æ¨¡å‹çš„å¼€å‘æ¡†æ¶ï¼ˆSDKï¼‰ï¼›</li><li>å®ƒæ”¯æŒä½ ç”¨ä¸åŒå¼€å‘è¯­è¨€ï¼ˆC#/Python/Javaï¼‰åŸºäº OpenAI API/Azure OpenAI API/Huggingface å¼€å‘å¤§æ¨¡å‹åº”ç”¨ï¼›</li><li>å®ƒå°è£…äº†ä¸€ç³»åˆ—å¼€ç®±å³ç”¨çš„å·¥å…·ï¼ŒåŒ…æ‹¬ï¼šæç¤ºè¯æ¨¡æ¿ã€é“¾å¼è°ƒç”¨ã€è§„åˆ’èƒ½åŠ›ç­‰ï¼›</li><li>å®ƒå®šä½åœ¨å°†åŸºäºã€ŒPromptã€çš„ AI èƒ½åŠ›ï¼Œä¸ä¼ ç»Ÿçš„ç¨‹åºå¼€å‘æ— ç¼æ•´åˆã€‚</li></ol><p><em>SDKï¼šSoftware Development Kitï¼Œå®ƒæ˜¯ä¸€ç»„è½¯ä»¶å·¥å…·å’Œèµ„æºçš„é›†åˆï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…åˆ›å»ºã€æµ‹è¯•ã€éƒ¨ç½²å’Œç»´æŠ¤åº”ç”¨ç¨‹åºæˆ–è½¯ä»¶ã€‚</em></p><blockquote><p>â„¹ï¸ <strong>Info:</strong> ä»€ä¹ˆæ˜¯ SDK? https://aws.amazon.com/cn/what-is/sdk/</p></blockquote><p>SDK å’Œ API çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ? https://aws.amazon.com/cn/compare/the-difference-between-sdk-and-api/</p><h2 id="_2-1ã€sk-çš„å¼€å‘è¿›å±•" tabindex="-1"><a class="header-anchor" href="#_2-1ã€sk-çš„å¼€å‘è¿›å±•"><span>2.1ã€SK çš„å¼€å‘è¿›å±•</span></a></h2><ol><li>C# ç‰ˆæœ€æˆç†Ÿï¼Œå·²å¼€å§‹ 1.10ï¼šhttps://github.com/microsoft/semantic-kernel</li><li>Python æ˜¯ beta ç‰ˆï¼šhttps://github.com/microsoft/semantic-kernel</li><li>Java ç‰ˆç›®å‰å•ç‹¬ç»´æŠ¤åœ¨ Java-V1åˆ†æ”¯ä¸‹ï¼šhttps://github.com/microsoft/semantic-kernel/tree/java-v1</li><li>æ–‡æ¡£å†™å¾—ç‰¹åˆ«å¥½ï¼Œä½†è¿½ä¸ä¸Šä»£ç æ›´æ–°é€Ÿåº¦ï¼š <ul><li>æ›´å¤šè®²è§£ï¼šhttps://learn.microsoft.com/en-us/semantic-kernel/overview/</li><li>æ›´åå®æ“ï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/notebooks/00-getting-started.ipynb</li><li>API Reference (ç›®å‰åªæœ‰ C#): https://learn.microsoft.com/en-us/dotnet/api/microsoft.semantickernel?view=semantic-kernel-dotnet</li></ul></li><li>æ›´å¤šç”Ÿæ€ï¼šhttps://github.com/geffzhang/awesome-semantickernel</li></ol><p>è¿™é‡Œå¯ä»¥äº†è§£æœ€æ–°è¿›å±•ï¼šhttps://learn.microsoft.com/en-us/semantic-kernel/get-started/supported-languages</p><p>ä¸åŒè¯­è¨€ä¹‹é—´çš„æ¦‚å¿µéƒ½æ˜¯ç›¸é€šçš„ã€‚æœ¬è¯¾ç¨‹ä»¥ Python ç‰ˆä¸ºä¾‹ã€‚</p><h2 id="_2-2ã€sk-çš„ç”Ÿæ€ä½" tabindex="-1"><a class="header-anchor" href="#_2-2ã€sk-çš„ç”Ÿæ€ä½"><span>2.2ã€SK çš„ç”Ÿæ€ä½</span></a></h2><p>å¾®è½¯å°†æ­¤æŠ€æœ¯æ ˆå‘½åä¸º Copilot Stackã€‚ç°åœ¨å®˜æ–¹ä¹Ÿå¸¸è¯´ Agent Stackã€‚</p><p><img src="/wiki/assets/img/copilot-stack.86839ca0.png" alt="SK çš„ç”Ÿæ€ä½"></p><p>è§£é‡Šï¼š</p><ul><li>Plugin extensibility: æ’ä»¶æ‰©å±•</li><li>Copilots: AI åŠ©æ‰‹ï¼ˆå‰¯é©¾é©¶ï¼‰ï¼Œä¾‹å¦‚ GitHub Copilotã€Office 365 Copilotã€Windows Copilot</li><li>AI orchestration: AI ç¼–æ’ï¼ŒSK å°±åœ¨è¿™é‡Œ</li><li>Foundation models: åŸºç¡€å¤§æ¨¡å‹ï¼Œä¾‹å¦‚ GPT-4</li><li>AI infrastructure: AI åŸºç¡€è®¾æ–½ï¼Œä¾‹å¦‚ PyTorchã€GPU</li></ul><h3 id="æ€ä¹ˆç†è§£è¿™ä¸ª-ai-ç¼–æ’" tabindex="-1"><a class="header-anchor" href="#æ€ä¹ˆç†è§£è¿™ä¸ª-ai-ç¼–æ’"><span>æ€ä¹ˆç†è§£è¿™ä¸ª <strong>AI ç¼–æ’</strong></span></a></h3><p>SK æ˜¯ä¸ªé‡å¿ƒå‹ƒå‹ƒçš„é¡¹ç›®ï¼Œå®ƒå¸Œæœ›ï¼š</p><ol><li>è®©å¼€å‘è€…æ›´å®¹æ˜“çš„æŠŠ LLM çš„èƒ½åŠ›é›†æˆåˆ°åº”ç”¨ä¸­ï¼Œåƒè°ƒç”¨å‡½æ•°ä¸€æ ·ç®€å•</li><li>è®© Prompt æ„æˆçš„ã€Œå‡½æ•°ã€ï¼ˆSemantic Functionï¼Œè§ä¸‹æ–‡ï¼‰ä¸åŸç”Ÿå‡½æ•°ä¹‹é—´ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„äº’ç›¸åµŒå¥—è°ƒç”¨</li><li>è®© AI è‡ªåŠ¨è°ƒç”¨æœ¬åœ°å‡½æ•°ï¼ˆNative Functionï¼‰æ‰§è¡Œç›¸åº”åŠŸèƒ½æˆ–æ“ä½œ</li><li>è®©å¼€å‘è€…å¼€å‘çš„ LLM èƒ½åŠ›ä¸åº”ç”¨è§£è€¦ï¼Œé«˜åº¦å¯å¤ç”¨</li><li>è®©å¼€å‘è€…èƒ½ä¸å¾®è½¯çš„æ•´ä¸ª Copilot ç”Ÿæ€ç´§å¯†ç»“åˆï¼Œäº’ç›¸æä¾›å…»æ–™</li></ol><p>è¯·å¸¦ç€è¿™ä¸ªè§†è§’ï¼Œé€æ­¥ä½“ä¼šåé¢æ‰€è®²çš„çŸ¥è¯†ã€‚</p><blockquote><p>âœ… <strong>Tip:</strong> ä½¿ç”¨ SK çš„ä½œä¸º AI ç¼–æ’å™¨çš„æ¡ˆä¾‹ï¼š https://github.com/Azure-Samples/miyagi</p></blockquote><h2 id="_2-3ã€sk-åŸºç¡€æ¶æ„" tabindex="-1"><a class="header-anchor" href="#_2-3ã€sk-åŸºç¡€æ¶æ„"><span>2.3ã€SK åŸºç¡€æ¶æ„</span></a></h2><p><img src="/wiki/assets/img/mind-and-body-of-semantic-kernel.fb3ec3d7.png" alt="SK çš„æ¶æ„"></p><p>è§£é‡Šï¼š</p><ul><li>Models and Memory: ç±»æ¯”ä¸ºå¤§è„‘</li><li>Connectors: ç”¨æ¥è¿æ¥å„ç§å¤–éƒ¨æœåŠ¡ï¼Œç±»ä¼¼é©±åŠ¨ç¨‹åº</li><li>Plugins: ç”¨æ¥è¿æ¥å†…éƒ¨æŠ€èƒ½</li><li>Triggers and actions: å¤–éƒ¨ç³»ç»Ÿçš„è§¦å‘å™¨å’ŒåŠ¨ä½œï¼Œç±»æ¯”ä¸ºå››è‚¢</li></ul><p><strong>ç±»æ¯”ï¼š</strong> Semantic Kernel ç”¨ <strong>Kernel</strong> å‘½åï¼Œæ˜¯å› ä¸ºå®ƒç¡®å®åƒä¸ªæ“ä½œç³»ç»Ÿ kernelï¼Œåšæ ¸å¿ƒèµ„æºè°ƒé…ï¼Œå„ç§èµ„æºéƒ½å¯ä»¥æŒ‚åœ¨å®ƒä¸Šã€‚</p><p><strong>è¯´æ˜ï¼š</strong> Sematic Kernel é€šè¿‡ <strong>Kernel</strong> é“¾æ¥ LLM ä¸ <strong>Functions</strong>ï¼ˆåŠŸèƒ½ï¼‰:</p><ul><li>Semantic Functionsï¼šé€šè¿‡ Prompt å®ç°çš„ LLM èƒ½åŠ›</li><li>Native Functions: ç¼–ç¨‹è¯­è¨€åŸç”Ÿçš„å‡½æ•°åŠŸèƒ½</li></ul><p>åœ¨ SK ä¸­ï¼Œä¸€ç»„ Function ç»„æˆä¸€ä¸ªæŠ€èƒ½ï¼ˆSkill/Pluginï¼‰ã€‚è¦è¿è¡Œ Skill/Pluginï¼Œéœ€è¦æœ‰ä¸€ä¸ªé…ç½®å’Œç®¡ç†çš„å•å…ƒï¼Œè¿™ä¸ªç»„ç»‡ç®¡ç†å•å…ƒå°±æ˜¯ Kernelã€‚</p><p>Kernel è´Ÿè´£ç®¡ç†åº•å±‚æ¥å£ä¸è°ƒç”¨é¡ºåºï¼Œä¾‹å¦‚ï¼šOpenAI/Azure OpenAI çš„æˆæƒä¿¡æ¯ã€é»˜è®¤çš„ LLM æ¨¡å‹é€‰æ‹©ã€å¯¹è¯ä¸Šä¸‹æ–‡ã€æŠ€èƒ½å‚æ•°çš„ä¼ é€’ç­‰ç­‰ã€‚</p><h2 id="_3ã€ç¯å¢ƒæ­å»º" tabindex="-1"><a class="header-anchor" href="#_3ã€ç¯å¢ƒæ­å»º"><span>3ã€ç¯å¢ƒæ­å»º</span></a></h2><ol><li>å®‰è£… Python 3.xï¼šhttps://www.python.org/downloads/</li><li>å®‰è£… SK åŒ…ï¼š<code>pip install semantic-kernel</code></li><li>åœ¨é¡¹ç›®ç›®å½•åˆ›å»º .env æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># .env</span></span>
<span class="line"><span class="token assign-left variable">OPENAI_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span></span>
<span class="line"><span class="token assign-left variable">OPENAI_BASE_URL</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span></span>
<span class="line"><span class="token assign-left variable">AZURE_OPENAI_DEPLOYMENT_NAME</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span></span>
<span class="line"><span class="token assign-left variable">AZURE_OPENAI_ENDPOINT</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span></span>
<span class="line"><span class="token assign-left variable">AZURE_OPENAI_API_KEY</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>OpenAI å’Œ Azureï¼Œé…ç½®å¥½ä¸€ä¸ªå°±è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment">#!pip install semantic-kernel==0.9.6b1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment">#!pip install --upgrade pydantic</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_3-1ã€hello-world" tabindex="-1"><a class="header-anchor" href="#_3-1ã€hello-world"><span>3.1ã€Hello, World!</span></a></h2><p>è¿™æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚</p><p>ç¬¬ä¸€æ®µä»£ç æ˜¯åˆå§‹åŒ–ã€‚åé¢æ‰€æœ‰ä»£ç éƒ½è¦åœ¨æ‰§è¡Œè¿‡è¿™æ®µä»£ç åï¼Œæ‰èƒ½æ‰§è¡Œã€‚</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> os</span>
<span class="line"><span class="token keyword">import</span> semantic_kernel <span class="token keyword">as</span> sk</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>connectors<span class="token punctuation">.</span>ai<span class="token punctuation">.</span>open_ai <span class="token keyword">import</span> OpenAIChatCompletion</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŠ è½½ .env åˆ°ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span class="token keyword">from</span> dotenv <span class="token keyword">import</span> load_dotenv<span class="token punctuation">,</span> find_dotenv</span>
<span class="line">_ <span class="token operator">=</span> load_dotenv<span class="token punctuation">(</span>find_dotenv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»º semantic kernel</span></span>
<span class="line">kernel <span class="token operator">=</span> sk<span class="token punctuation">.</span>Kernel<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é…ç½® OpenAI æœåŠ¡ã€‚OPENAI_BASE_URL ä¼šè¢«è‡ªåŠ¨åŠ è½½ç”Ÿæ•ˆ</span></span>
<span class="line">api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&#39;OPENAI_API_KEY&#39;</span><span class="token punctuation">)</span></span>
<span class="line">service_id <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span></span>
<span class="line"></span>
<span class="line">service <span class="token operator">=</span> OpenAIChatCompletion<span class="token punctuation">(</span></span>
<span class="line">        service_id<span class="token operator">=</span>service_id<span class="token punctuation">,</span> </span>
<span class="line">        ai_model_id<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo-1106&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">        api_key<span class="token operator">=</span>api_key</span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># å°† LLM æœåŠ¡æ·»åŠ åˆ° kernel ä¸­</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_service<span class="token punctuation">(</span></span>
<span class="line">    service</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Prompt è°ƒç”¨å¤§æ¨¡å‹ï¼Œè¢«å½“åšä¸€ä¸ª <strong>Semantic Function</strong> ï¼ˆä¸‹æ–‡è¯¦è¿°ï¼‰</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># å®šä¹‰ semantic function</span></span>
<span class="line"></span>
<span class="line">joke_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;joke&quot;</span><span class="token punctuation">,</span> <span class="token comment"># function åå­—ï¼Œå¿…å¡«</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span> <span class="token comment"># function æ‰€å±çš„ pluginï¼Œå¿…å¡«</span></span>
<span class="line">    prompt<span class="token operator">=</span><span class="token string">&quot;è®²ä¸ªç¬‘è¯&quot;</span> <span class="token comment"># promptï¼Œå¿…å¡«</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿è¡Œ function çœ‹ç»“æœ</span></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span>joke_function<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">ä¸ºä»€ä¹ˆçŒ«å’ªä¸å–œæ¬¢æ‰“æ‰‘å…‹ç‰Œï¼Ÿ</span>
<span class="line">å› ä¸ºä»–ä»¬æ€»æ˜¯è¢«æŠ“ä½ï¼</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„</strong>ï¼šä»¥ä¸Šä»£ç æ˜¯åœ¨ Jupyter ç¬”è®°è¿è¡Œçš„å½¢å¼ï¼Œå¦‚æœæœ¬åœ°è¿è¡Œï¼Œè¯·å‚è€ƒä»¥ä¸‹å½¢å¼</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> asyncio</span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">run_function</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">result <span class="token operator">=</span> asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span></span>
<span class="line">    run_function<span class="token punctuation">(</span>joke_function<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>âœ… <strong>Tip:</strong> åˆ’é‡ç‚¹ï¼š ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„æ“ä½œç³»ç»Ÿæ¥ç±»æ¯”ï¼Œå¯ä»¥æ›´å¥½åœ°ç†è§£ SKã€‚</p></blockquote><p>å¯åŠ¨æ“ä½œç³»ç»Ÿï¼škernel = sk.Kernel() å®‰è£…é©±åŠ¨ç¨‹åºï¼škernel.add_service() å®‰è£…åº”ç”¨ç¨‹åºï¼šfunc = kernel.add_function() è¿è¡Œåº”ç”¨ç¨‹åºï¼škernel.invoke(func...)</p><p>åŸºäº SK å¼€å‘çš„ä¸»è¦å·¥ä½œæ˜¯å†™ã€Œåº”ç”¨ç¨‹åºã€ï¼Œä¹Ÿå°±æ˜¯ Pluginsï¼ˆè§ä¸‹æ–‡ï¼‰</p><h3 id="_3-2ã€prompt-æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#_3-2ã€prompt-æ¨¡æ¿"><span>3.2ã€Prompt æ¨¡æ¿</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>prompt_template<span class="token punctuation">.</span>prompt_template_config <span class="token keyword">import</span> PromptTemplateConfig</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>prompt_template<span class="token punctuation">.</span>input_variable <span class="token keyword">import</span> InputVariable</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>functions <span class="token keyword">import</span> KernelArguments</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è·å–å½“å‰é»˜è®¤è®¾å®š</span></span>
<span class="line">req_settings <span class="token operator">=</span> kernel<span class="token punctuation">.</span>get_service<span class="token punctuation">(</span>service_id<span class="token punctuation">)</span><span class="token punctuation">.</span>get_prompt_execution_settings_class<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>service_id<span class="token operator">=</span>service_id<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®šä¹‰ Prompt æ¨¡æ¿ </span></span>
<span class="line"><span class="token comment"># æ¨¡æ¿ä¸­ï¼Œå˜é‡ä»¥ {{$å˜é‡å}} è¡¨ç¤º</span></span>
<span class="line">prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span><span class="token string">&quot;è®²ä¸ªå…³äº{{$topic}}çš„ç¬‘è¯&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;Generate a joke about a specific topic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;topic&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The topic&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ³¨å†Œ function</span></span>
<span class="line">topical_joke_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;topical_joke&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># è¿è¡Œ function çœ‹ç»“æœ</span></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    topical_joke_function<span class="token punctuation">,</span> </span>
<span class="line">    KernelArguments<span class="token punctuation">(</span>topic<span class="token operator">=</span><span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span> <span class="token comment"># ä¼ å…¥å‚æ•°</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">å°æ˜å»å‚åŠ ä¸€ä¸ªé¢è¯•ï¼Œé¢è¯•å®˜é—®ä»–ï¼šâ€œä½ æœ‰ä»€ä¹ˆç‰¹é•¿å—ï¼Ÿâ€</span>
<span class="line">å°æ˜è¯´ï¼šâ€œæˆ‘å¯ä»¥ä¸€å£æ°”è¯´å®Œæ•´ä¸ªã€Šä¸‰å›½æ¼”ä¹‰ã€‹ã€‚â€</span>
<span class="line">é¢è¯•å®˜å¾ˆæƒŠè®¶åœ°é—®ï¼šâ€œçœŸçš„å—ï¼Ÿé‚£ä½ æ¥è¯•è¯•çœ‹ã€‚â€</span>
<span class="line">å°æ˜å¼€å§‹ï¼šâ€œåˆ˜å¤‡ã€å…³ç¾½ã€å¼ é£ä¸‰äººç»“ä¹‰ï¼Œæ¡ƒå›­ä¸‰ç»“ä¹‰â€¦â€¦â€</span>
<span class="line">é¢è¯•å®˜æ‰“æ–­ä»–ï¼šâ€œå¥½äº†å¥½äº†ï¼Œæˆ‘ç›¸ä¿¡ä½ äº†ï¼Œä½ å¯ä»¥åœä¸‹æ¥äº†ã€‚â€</span>
<span class="line">å°æ˜ç¬‘ç€è¯´ï¼šâ€œæˆ‘è¿˜æ²¡è¯´åˆ°èµ¤å£ä¹‹æˆ˜å‘¢ï¼â€</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3ã€semantic-functions" tabindex="-1"><a class="header-anchor" href="#_3-3ã€semantic-functions"><span>3.3ã€Semantic Functions</span></a></h3><p>Semantic Functions æ˜¯çº¯ç”¨æ•°æ®ï¼ˆPrompt + é…ç½®ï¼‰å®šä¹‰çš„ï¼Œä¸éœ€è¦ç¼–å†™ä»»ä½•ä»£ç ã€‚æ‰€ä»¥å®ƒä¸ç¼–ç¨‹è¯­è¨€æ— å…³ï¼Œå¯ä»¥è¢«ä»»ä½•ç¼–ç¨‹è¯­è¨€è°ƒç”¨ã€‚</p><h3 id="_3-3-1ã€æŒä¹…åŒ–å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#_3-3-1ã€æŒä¹…åŒ–å­˜å‚¨"><span>3.3.1ã€æŒä¹…åŒ–å­˜å‚¨</span></a></h3><p>æˆ‘ä»¬å¯ä»¥å°† semantic function ä¸æºä»£ç åˆ†ç¦»å­˜å‚¨ã€‚è¿™æ ·æ›´æ˜“äºç»´æŠ¤ä¸å¤ç”¨ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„ semantic function åŒ…å«ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ul><li>skprompt.txt: å­˜æ”¾ promptï¼Œå¯ä»¥åŒ…å«å‚æ•°ï¼Œè¿˜å¯ä»¥è°ƒç”¨å…¶å®ƒå‡½æ•°</li><li>config.json: å­˜æ”¾é…ç½®ï¼ŒåŒ…æ‹¬å‡½æ•°åŠŸèƒ½ï¼Œå‚æ•°çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠè°ƒç”¨å¤§æ¨¡å‹æ—¶çš„å‚æ•°</li></ul><p>ä¸¾ä¾‹ï¼šæ ¹æ®ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŒ‡ç¤ºï¼Œç”Ÿæˆ SQL æŸ¥è¯¢</p><h3 id="skprompt-txt" tabindex="-1"><a class="header-anchor" href="#skprompt-txt"><span>skprompt.txt</span></a></h3><h3 id="config-json" tabindex="-1"><a class="header-anchor" href="#config-json"><span>config.json</span></a></h3><p>è¯´æ˜ï¼š</p><ul><li><code>type</code> åªæœ‰ <code>&quot;completion&quot;</code> å’Œ <code>&quot;embedding&quot;</code> ä¸¤ç§</li></ul><p>ä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶éƒ½åœ¨ <a class="route-link" href="/wiki/tutorial/llm/demo/MyPlugins/Text2SQL/">demo/MyPlugins/Text2SQL/</a> ç›®å½•ä¸‹ã€‚</p><h3 id="_3-3-2ã€å¯¼å…¥-semantic-functions" tabindex="-1"><a class="header-anchor" href="#_3-3-2ã€å¯¼å…¥-semantic-functions"><span>3.3.2ã€å¯¼å…¥ Semantic Functions</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># åŠ è½½ semantic functionã€‚æ³¨æ„ç›®å½•ç»“æ„</span></span>
<span class="line">my_plugins <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>parent_directory<span class="token operator">=</span><span class="token string">&quot;./demo&quot;</span><span class="token punctuation">,</span> plugin_name<span class="token operator">=</span><span class="token string">&quot;MyPlugins&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">func <span class="token operator">=</span> my_plugins<span class="token punctuation">[</span><span class="token string">&quot;Text2SQL&quot;</span><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¿è¡Œ</span></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    func<span class="token punctuation">,</span></span>
<span class="line">    KernelArguments<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token operator">=</span><span class="token string">&quot;2024å¹´4æœˆæœ‰å“ªäº›è¯¾&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">SELECT * FROM Courses WHERE course_date BETWEEN &#39;2024-04-01&#39; AND &#39;2024-04-30&#39;;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-4ã€å¤šä¸ªè¾“å…¥å˜é‡" tabindex="-1"><a class="header-anchor" href="#_3-4ã€å¤šä¸ªè¾“å…¥å˜é‡"><span>3.4ã€å¤šä¸ªè¾“å…¥å˜é‡</span></a></h3><p>ä¾‹å¦‚æˆ‘ä»¬è¦ç»´æŠ¤ä¸€ä¸ªå¤šè½®å¯¹è¯ï¼Œé€šè¿‡ request å’Œ history ä¸¤ä¸ªå˜é‡åˆ†åˆ«å­˜å‚¨ å½“å‰è¾“å…¥ å’Œ å¯¹è¯å†å²</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">prompt <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;å¯¹è¯å†å²å¦‚ä¸‹:</span>
<span class="line">{{$history}}</span>
<span class="line">---</span>
<span class="line">User: {{$request}}</span>
<span class="line">Assistant:  &quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å®šä¹‰ Prompt æ¨¡æ¿ </span></span>
<span class="line"><span class="token comment"># æ¨¡æ¿ä¸­ï¼Œå˜é‡ä»¥ {{$å˜é‡å}} è¡¨ç¤º</span></span>
<span class="line">prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span>prompt<span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;Multi-turn dialogue&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The user input&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;history&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The dialogue history&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ³¨å†Œ function</span></span>
<span class="line">chat <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;chat&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>âš ï¸ <strong>Note:</strong> æ³¨æ„ï¼šå®é™…å¼€å‘ä¸­ï¼Œå°† Prompt æ¨¡æ¿ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨æ›´å®¹æ˜“ç»´æŠ¤ã€‚</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>contents <span class="token keyword">import</span> ChatHistory</span>
<span class="line"></span>
<span class="line">chat_history <span class="token operator">=</span> ChatHistory<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">chat_history<span class="token punctuation">.</span>add_system_message<span class="token punctuation">(</span><span class="token string">&quot;You are a helpful chatbot who is good at answering user&#39;s questions.&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span></span>
<span class="line">    request <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;User &gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token keyword">not</span> request<span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">break</span></span>
<span class="line">    result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">        chat<span class="token punctuation">,</span></span>
<span class="line">        KernelArguments<span class="token punctuation">(</span></span>
<span class="line">            request<span class="token operator">=</span>request<span class="token punctuation">,</span></span>
<span class="line">            history<span class="token operator">=</span>chat_history</span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Assistant &gt; </span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    chat_history<span class="token punctuation">.</span>add_user_message<span class="token punctuation">(</span>request<span class="token punctuation">)</span></span>
<span class="line">    chat_history<span class="token punctuation">.</span>add_assistant_message<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">User &gt;  æˆ‘å«ç‹å“ç„¶</span>
<span class="line">Assistant &gt; ä½ å¥½ï¼Œç‹å“ç„¶ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</span>
<span class="line">User &gt;  æˆ‘æ˜¯è°</span>
<span class="line">Assistant &gt; ä½ æ˜¯ç‹å“ç„¶ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</span>
<span class="line">User &gt;</span>
<span class="line">User &gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5ã€native-functions" tabindex="-1"><a class="header-anchor" href="#_3-5ã€native-functions"><span>3.5ã€Native Functions</span></a></h3><p>ç”¨ç¼–ç¨‹è¯­è¨€å†™çš„å‡½æ•°ï¼Œå¦‚æœç”¨ SK çš„ Native Function æ–¹å¼å®šä¹‰ï¼Œå°±èƒ½çº³å…¥åˆ° SK çš„ç¼–æ’ä½“ç³»ï¼Œå¯ä»¥è¢« Plannerã€å…¶å®ƒ Plugin è°ƒç”¨ã€‚</p><p>ä¸‹é¢ï¼Œå†™ä¸€ä¸ªæŸ¥è¯¢æ•°æ®åº“çš„å‡½æ•°ã€‚</p><p>è¿™ä¸ªå‡½æ•°åæ˜¯ <code>query_database</code>ã€‚è¾“å…¥ä¸ºä¸€ä¸ª SQL è¡¨è¾¾å¼</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>functions <span class="token keyword">import</span> kernel_function</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">DBConnectorPlugin</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> db_cursor<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>db_cursor <span class="token operator">=</span> db_cursor</span>
<span class="line"></span>
<span class="line">    <span class="token decorator annotation punctuation">@kernel_function</span><span class="token punctuation">(</span></span>
<span class="line">        description<span class="token operator">=</span><span class="token string">&quot;æŸ¥è¯¢æ•°æ®åº“&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># function æè¿°</span></span>
<span class="line">        name<span class="token operator">=</span><span class="token string">&quot;query_database&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># function åå­—</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">exec</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sql_exp<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>db_cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql_exp<span class="token punctuation">)</span></span>
<span class="line">        records <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># å®šä¹‰æœ¬åœ°å‡½æ•°å’Œæ•°æ®åº“</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> sqlite3</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºæ•°æ®åº“è¿æ¥</span></span>
<span class="line">conn <span class="token operator">=</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">&#39;:memory:&#39;</span><span class="token punctuation">)</span></span>
<span class="line">cursor <span class="token operator">=</span> conn<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºordersè¡¨</span></span>
<span class="line">cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">CREATE TABLE Courses (</span>
<span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span>
<span class="line">    course_date DATE NOT NULL,</span>
<span class="line">    start_time TIME NOT NULL,</span>
<span class="line">    end_time TIME NOT NULL,</span>
<span class="line">    course_name VARCHAR(255) NOT NULL,</span>
<span class="line">    instructor VARCHAR(255) NOT NULL</span>
<span class="line">);</span>
<span class="line">&quot;&quot;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ’å…¥5æ¡æ˜ç¡®çš„æ¨¡æ‹Ÿè®°å½•</span></span>
<span class="line">timetable <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-01-23&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤§æ¨¡å‹åº”ç”¨å¼€å‘åŸºç¡€&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-01-25&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Prompt Engineering&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-01-29&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;èµ è¯¾ï¼šè½¯ä»¶å¼€å‘åŸºç¡€æ¦‚å¿µä¸ç¯å¢ƒæ­å»º&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;è¥¿æ ‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-02-20&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ä»AIç¼–ç¨‹è®¤çŸ¥AI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ—æ™“é‘«&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-02-22&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Function Calling&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-02-29&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;RAGå’ŒEmbeddings&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-05&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Assistants API&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-07&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Semantic Kernel&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-14&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LangChain&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-19&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LLMåº”ç”¨å¼€å‘å·¥å…·é“¾&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-21&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ‰‹æ’• AutoGPT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-26&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¨¡å‹å¾®è°ƒï¼ˆä¸Šï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-03-28&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æ¨¡å‹å¾®è°ƒï¼ˆä¸‹ï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-09&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆä¸Šï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šè€å¸ˆ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-11&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆä¸­ï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šè€å¸ˆ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-16&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆä¸‹ï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å¤šè€å¸ˆ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-18&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AIäº§å“éƒ¨ç½²å’Œäº¤ä»˜ï¼ˆä¸Šï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹æ ‘å†¬&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-23&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;AIäº§å“éƒ¨ç½²å’Œäº¤ä»˜ï¼ˆä¸‹ï¼‰&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹æ ‘å†¬&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-04-25&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;æŠ“ä½å¤§æ¨¡å‹æ—¶ä»£çš„åˆ›ä¸šæœºé‡&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-05-07&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;äº§å“è¿è¥å’Œä¸šåŠ¡æ²Ÿé€š&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-05-09&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;äº§å“è®¾è®¡&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;å­™å¿—å²—&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">(</span><span class="token string">&#39;2024-05-14&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;20:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;22:00&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;é¡¹ç›®æ–¹æ¡ˆåˆ†æä¸è®¾è®¡&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ç‹å“ç„¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> record <span class="token keyword">in</span> timetable<span class="token punctuation">:</span></span>
<span class="line">    cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token triple-quoted-string string">&#39;&#39;&#39;</span>
<span class="line">    INSERT INTO Courses (course_date, start_time, end_time, course_name, instructor)</span>
<span class="line">    VALUES (?, ?, ?, ?, ?)</span>
<span class="line">    &#39;&#39;&#39;</span><span class="token punctuation">,</span> record<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æäº¤äº‹åŠ¡</span></span>
<span class="line">conn<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># åŠ è½½ native function</span></span>
<span class="line">db_connector <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>DBConnectorPlugin<span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;DBConnectorPlugin&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># çœ‹ç»“æœ</span></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    db_connector<span class="token punctuation">[</span><span class="token string">&quot;query_database&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    KernelArguments<span class="token punctuation">(</span></span>
<span class="line">        sql_exp<span class="token operator">=</span><span class="token string">&quot;SELECT COUNT(*) as count FROM Courses WHERE instructor = &#39;ç‹å“ç„¶&#39;&quot;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">[(9,)]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>âœ… <strong>Tip:</strong> åœ¨ SK ä¸­ï¼ŒSemantic Function å’Œ Native Function è¢« Kernel å¹³ç­‰å¯¹å¾…ã€‚</p></blockquote><p><strong>æ³¨æ„</strong>: å¦ä¸€ç§ native function çš„è°ƒç”¨æ–¹æ³•ï¼Œå¯ä»¥å†™æˆä¸‹è¿°å½¢å¼ã€‚ä½†ä¸Šé¢çš„å½¢å¼æ›´ç¬¦åˆ SK çš„è®¾è®¡ç†å¿µã€‚</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> db_connector<span class="token punctuation">[</span><span class="token string">&quot;query_database&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span></span>
<span class="line">    kernel<span class="token punctuation">,</span> sql_exp<span class="token operator">=</span><span class="token string">&quot;SELECT COUNT(*) as count FROM Courses WHERE instructor = &#39;ç‹å“ç„¶&#39;&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">[(9,)]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-5-1ã€å‡½æ•°å‚æ•°-annotation" tabindex="-1"><a class="header-anchor" href="#_3-5-1ã€å‡½æ•°å‚æ•°-annotation"><span>3.5.1ã€å‡½æ•°å‚æ•° Annotation</span></a></h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Python çš„ typing åº“ä¸­çš„ Annotated å¯¹è±¡æ ‡è¯†æ¯ä¸ªå‚æ•°çš„ç±»å‹å’Œå«ä¹‰ï¼Œä»¥ä¾¿æœªæ¥åœ¨ agent ä¸­ä½¿ç”¨</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Annotated</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">DBConnectorPlugin</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> db_cursor<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>db_cursor <span class="token operator">=</span> db_cursor</span>
<span class="line"></span>
<span class="line">    <span class="token decorator annotation punctuation">@kernel_function</span><span class="token punctuation">(</span></span>
<span class="line">        description<span class="token operator">=</span><span class="token string">&quot;æŸ¥è¯¢æ•°æ®åº“&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># function æè¿°</span></span>
<span class="line">        name<span class="token operator">=</span><span class="token string">&quot;query_database&quot;</span><span class="token punctuation">,</span>  <span class="token comment"># function åå­—</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">def</span> <span class="token function">exec</span><span class="token punctuation">(</span></span>
<span class="line">            self<span class="token punctuation">,</span> </span>
<span class="line">            sql_exp<span class="token punctuation">:</span> Annotated<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token string">&quot;SQLæŸ¥è¯¢è¡¨è¾¾å¼&quot;</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Annotated<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token string">&quot;æ•°æ®åº“æŸ¥è¯¢ç»“æœ&quot;</span><span class="token punctuation">]</span><span class="token punctuation">:</span></span>
<span class="line">        self<span class="token punctuation">.</span>db_cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql_exp<span class="token punctuation">)</span></span>
<span class="line">        records <span class="token operator">=</span> cursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>records<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6ã€plugins" tabindex="-1"><a class="header-anchor" href="#_3-6ã€plugins"><span>3.6ã€Plugins</span></a></h3><p>ç®€å•è¯´ï¼Œplugin å°±æ˜¯ä¸€ç»„å‡½æ•°çš„é›†åˆã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸º namespaceã€‚å®ƒå¯ä»¥åŒ…å«ä¸¤ç§å‡½æ•°ï¼š</p><ul><li>Semantic Functions - è¯­ä¹‰å‡½æ•°ï¼Œæœ¬è´¨æ˜¯ Prompt Engineering</li><li>Native Functions - åŸç”Ÿå‡½æ•°ï¼Œå°†æœ¬åœ°ä»£ç åŠŸèƒ½æ³¨å†Œåœ¨ Kernel ä¸­</li></ul><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒSK çš„ plugin ä¼šå’Œ ChatGPTã€Bingã€Microsoft 365 é€šç”¨ã€‚ã€Œå¾ˆå¿«ã€ä½ ç”¨ SK å†™çš„ plugin å°±å¯ä»¥åœ¨è¿™äº›å¹³å°ä¸Šæ— ç¼ä½¿ç”¨äº†ã€‚è¿™äº›å¹³å°ä¸Šçš„ plugin ä¹Ÿå¯ä»¥é€šè¿‡ SK è¢«ä½ è°ƒç”¨ã€‚</p><blockquote><p>âš ï¸ <strong>Note:</strong> æ³¨æ„ï¼šPlugins æœ€åˆå‘½åä¸º Skillsï¼Œåæ¥æ”¹ä¸º Pluginsã€‚å¦‚æœæ–‡æ¡£ä¸­è¿˜æœ‰ã€ŒSkillã€é—ç•™ã€‚è§åˆ°åï¼Œå°±çŸ¥é“ä¸¤è€…æ˜¯ä¸€å›äº‹å°±å¥½ã€‚</p></blockquote><p>å›é¡¾å¾®è½¯çš„è®¾è®¡ç†å¿µï¼šåº”ç”¨é€šè¿‡ SK è°ƒç”¨ Plugins å®Œæˆå„ç§ä»»åŠ¡</p><p><img src="/wiki/assets/img/cross-platform-plugins.d5015926.png" alt="image"></p><h3 id="_3-6-1ã€å†…ç½®-plugins" tabindex="-1"><a class="header-anchor" href="#_3-6-1ã€å†…ç½®-plugins"><span>3.6.1ã€å†…ç½® Plugins</span></a></h3><p>SK å†…ç½®äº†è‹¥å¹²å¥½ç”¨çš„ plugin</p><p>åŠ è½½æ–¹æ³•ï¼š</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>core_plugins <span class="token keyword">import</span> <span class="token operator">&lt;</span>PluginName<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>å®ƒä»¬æ˜¯ï¼š</p><ul><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/conversation_summary_plugin.py" target="_blank" rel="noopener noreferrer"><code>ConversationSummaryPlugin</code></a> - ç”Ÿæˆå¯¹è¯çš„æ‘˜è¦</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/http_plugin.py" target="_blank" rel="noopener noreferrer"><code>HttpPlugin</code></a> - å‘å‡º HTTP è¯·æ±‚ï¼Œæ”¯æŒ GETã€POSTã€PUT å’Œ DELETE</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/math_plugin.py" target="_blank" rel="noopener noreferrer"><code>MathPlugin</code></a> - åŠ æ³•å’Œå‡æ³•è®¡ç®—</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/text_memory_plugin.py" target="_blank" rel="noopener noreferrer"><code>TextMemoryPlugin</code></a> - ä¿å­˜æ–‡æœ¬åˆ° memory ä¸­ï¼Œå¯ä»¥å¯¹å…¶åšå‘é‡æ£€ç´¢</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/text_plugin.py" target="_blank" rel="noopener noreferrer"><code>TextPlugin</code></a> - æŠŠæ–‡æœ¬å…¨éƒ¨è½¬ä¸ºå¤§å†™æˆ–å°å†™ï¼Œå»æ‰å¤´å°¾çš„ç©ºæ ¼ï¼ˆtrimï¼‰</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/time_plugin.py" target="_blank" rel="noopener noreferrer"><code>TimePlugin</code></a> - è·å–å½“å‰æ—¶é—´åŠç”¨å¤šç§æ ¼å¼è·å–æ—¶é—´å‚æ•°</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/wait_plugin.py" target="_blank" rel="noopener noreferrer"><code>WaitPlugin</code></a> - ç­‰å¾…æŒ‡å®šçš„æ—¶é—´</li><li><a href="https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/core_plugins/web_search_engine_plugin.py" target="_blank" rel="noopener noreferrer"><code>WebSearchEnginePlugin</code></a> - åœ¨äº’è”ç½‘ä¸Šæœç´¢ç»™å®šçš„æ–‡æœ¬ ) - åœ¨äº’è”ç½‘ä¸Šæœç´¢ç»™å®šçš„æ–‡æœ¬</li></ul><h2 id="_4ã€å‡½æ•°çš„åµŒå¥—è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_4ã€å‡½æ•°çš„åµŒå¥—è°ƒç”¨"><span>4ã€å‡½æ•°çš„åµŒå¥—è°ƒç”¨</span></a></h2><h3 id="_4-1ã€semantic-function-åµŒå¥—è°ƒç”¨" tabindex="-1"><a class="header-anchor" href="#_4-1ã€semantic-function-åµŒå¥—è°ƒç”¨"><span>4.1ã€Semantic Function åµŒå¥—è°ƒç”¨</span></a></h3><p>SK å…è®¸åœ¨ Prompt æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">translate_prompt <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">å°†ä¸­æ–‡è¯&#39;{{$chinese}}&#39;ç¿»è¯‘ä¸ºæ—¥è¯­</span>
<span class="line">ç›´æ¥ç»™å‡ºä¸€ä¸ªç¿»è¯‘ç»“æœï¼Œä¸è¦è¯„è®ºã€‚</span>
<span class="line">å°½å¯èƒ½ç”¨Hanjiè¡¨ç¤ºã€‚</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">joke_prompt <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">&#39;{{$input}}&#39;çš„æ—¥è¯­æ˜¯ï¼š{{MyDemoPlugin.translate $input}}</span>
<span class="line">æ ¹æ®ä»¥ä¸Šè¯æ±‡åœ¨ä¸­æ—¥æ–‡ä¸­çš„è¯­ä¹‰å·®å¼‚ï¼Œè®²ä¸€ä¸ªç¬‘è¯ã€‚</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> os</span>
<span class="line"><span class="token keyword">import</span> semantic_kernel <span class="token keyword">as</span> sk</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>connectors<span class="token punctuation">.</span>ai<span class="token punctuation">.</span>open_ai <span class="token keyword">import</span> OpenAIChatCompletion</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŠ è½½ .env åˆ°ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span class="token keyword">from</span> dotenv <span class="token keyword">import</span> load_dotenv<span class="token punctuation">,</span> find_dotenv</span>
<span class="line">_ <span class="token operator">=</span> load_dotenv<span class="token punctuation">(</span>find_dotenv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»º semantic kernel</span></span>
<span class="line">kernel <span class="token operator">=</span> sk<span class="token punctuation">.</span>Kernel<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é…ç½® OpenAI æœåŠ¡ã€‚OPENAI_BASE_URL ä¼šè¢«è‡ªåŠ¨åŠ è½½ç”Ÿæ•ˆ</span></span>
<span class="line">api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&#39;OPENAI_API_KEY&#39;</span><span class="token punctuation">)</span></span>
<span class="line">service_id <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°† LLM æœåŠ¡æ·»åŠ åˆ° kernel ä¸­</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_service<span class="token punctuation">(</span></span>
<span class="line">    OpenAIChatCompletion<span class="token punctuation">(</span></span>
<span class="line">        service_id<span class="token operator">=</span>service_id<span class="token punctuation">,</span> </span>
<span class="line">        ai_model_id<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo-1106&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">        api_key<span class="token operator">=</span>api_key</span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>prompt_template<span class="token punctuation">.</span>prompt_template_config <span class="token keyword">import</span> PromptTemplateConfig</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>prompt_template<span class="token punctuation">.</span>input_variable <span class="token keyword">import</span> InputVariable</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>functions <span class="token keyword">import</span> KernelArguments</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è·å–å½“å‰é»˜è®¤è®¾å®š</span></span>
<span class="line">req_settings <span class="token operator">=</span> kernel<span class="token punctuation">.</span>get_service<span class="token punctuation">(</span>service_id<span class="token punctuation">)</span><span class="token punctuation">.</span>get_prompt_execution_settings_class<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>service_id<span class="token operator">=</span>service_id<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">trans_prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span>translate_prompt<span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;Translate Chinese to Japanese&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;chinese&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The source&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">joke_prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span>joke_prompt<span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;Generate a joke about a specific topic&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The topic&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">translate_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;translate&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>trans_prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">joke_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;joke&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>joke_prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    joke_function<span class="token punctuation">,</span></span>
<span class="line">    KernelArguments<span class="token punctuation">(</span></span>
<span class="line">        <span class="token builtin">input</span><span class="token operator">=</span><span class="token string">&quot;ä¿¡ä»¶&quot;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">æœ‰ä¸€å¤©ï¼Œå°æ˜æ”¶åˆ°äº†ä¸€å°æ—¥æœ¬æœ‹å‹å¯„æ¥çš„ä¿¡ä»¶ã€‚ä»–å…´å¥‹åœ°æ‰“å¼€ä¸€çœ‹ï¼Œå´å‘ç°é‡Œé¢åªæœ‰ä¸€å¼ ç©ºç™½çº¸ã€‚ä»–æœ‰äº›ç–‘æƒ‘åœ°é—®æ—¥æœ¬æœ‹å‹ï¼šâ€œä½ å¯„ç»™æˆ‘çš„â€˜ä¿¡ä»¶â€™æ€ä¹ˆåªæœ‰ä¸€å¼ ç©ºç™½çº¸ï¼Ÿâ€</span>
<span class="line">æ—¥æœ¬æœ‹å‹ç¬‘ç€å›ç­”ï¼šâ€œå› ä¸ºåœ¨æ—¥è¯­ä¸­ï¼Œâ€˜ä¿¡ä»¶â€™å°±æ˜¯â€˜æ‰‹ç´™â€™å•Šï¼â€</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>âœ… <strong>Tip:</strong> åœ¨ Prompt æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨ Native Function ä¹Ÿå¯ä»¥ã€‚</p></blockquote><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">prompt <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">å·²çŸ¥ï¼Œæ•°æ®åº“å½¢å¼ä¸º</span>
<span class="line">CREATE TABLE Courses (</span>
<span class="line">    id INT AUTO_INCREMENT PRIMARY KEY,</span>
<span class="line">    course_date DATE NOT NULL,</span>
<span class="line">    start_time TIME NOT NULL,</span>
<span class="line">    end_time TIME NOT NULL,</span>
<span class="line">    course_name VARCHAR(255) NOT NULL,</span>
<span class="line">    instructor VARCHAR(255) NOT NULL</span>
<span class="line">);</span>
<span class="line"></span>
<span class="line">ç”¨è‡ªç„¶è¯­è¨€è§£é‡Šç”¨æˆ·çš„SQLæŸ¥è¯¢çš„æ„å›¾å’ŒæŸ¥è¯¢ç»“æœ</span>
<span class="line"></span>
<span class="line">ç”¨æˆ·è¾“å…¥ï¼š{{$input}}</span>
<span class="line"></span>
<span class="line">æŸ¥è¯¢ç»“æœï¼š{{DBConnectorPlugin.query_database $input}}</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># åŠ è½½ native function</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>DBConnectorPlugin<span class="token punctuation">(</span>cursor<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;DBConnectorPlugin&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span>prompt<span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;æŸ¥è¯¢æ•°æ®åº“&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The user query&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">db_query_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;db_query&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    db_query_function<span class="token punctuation">,</span></span>
<span class="line">    KernelArguments<span class="token punctuation">(</span></span>
<span class="line">        <span class="token builtin">input</span><span class="token operator">=</span><span class="token string">&quot;SELECT COUNT(*) as count FROM Courses WHERE instructor = &#39;ç‹å“ç„¶&#39;&quot;</span></span>
<span class="line">    <span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">ç”¨æˆ·çš„SQLæŸ¥è¯¢æ„å›¾æ˜¯ç»Ÿè®¡æ•°æ®åº“ä¸­ç”±ç‹å“ç„¶æ•™æˆçš„è¯¾ç¨‹æ•°é‡ã€‚æŸ¥è¯¢ç»“æœæ˜¾ç¤ºæ•°æ®åº“ä¸­æœ‰9é—¨ç”±ç‹å“ç„¶æ•™æˆçš„è¯¾ç¨‹ã€‚</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_5ã€memory" tabindex="-1"><a class="header-anchor" href="#_5ã€memory"><span>5ã€Memory</span></a></h2><p>SK ä¸­æŠŠå‘é‡æ•°æ®åº“çš„æ“ä½œå°è£…åœ¨ <code>Memory</code> ä¸­ã€‚</p><p>SK çš„ memory ä½¿ç”¨éå¸¸ç®€å•ï¼š</p><ol><li>ç”¨ <code>kernel.add_service()</code> æ·»åŠ ä¸€ä¸ªæ–‡æœ¬å‘é‡ç”ŸæˆæœåŠ¡</li><li>ç”¨ <code>kernel.add_plugin()</code> æ·»åŠ ä¸€ä¸ªè¿æ¥å‘é‡æ•°æ®åº“çš„</li><li>ç”¨ <code>memory.save_information()</code> ä¿å­˜ä¿¡æ¯åˆ° memory store</li><li>ç”¨ <code>memory.search()</code> æœç´¢ä¿¡æ¯</li></ol><p>ä½¿ç”¨ ChatALL çš„ README.md åšæ•°æ®ï¼Œä½¿ç”¨å†…å­˜ä½œä¸º memory storeï¼Œæˆ‘ä»¬æ¼”ç¤ºä¸‹åŸºäºæ–‡æ¡£å¯¹è¯ã€‚</p><h3 id="_5-1ã€åˆå§‹åŒ–-embedding" tabindex="-1"><a class="header-anchor" href="#_5-1ã€åˆå§‹åŒ–-embedding"><span>5.1ã€åˆå§‹åŒ– Embedding</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">import</span> semantic_kernel <span class="token keyword">as</span> sk</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>connectors<span class="token punctuation">.</span>ai<span class="token punctuation">.</span>open_ai <span class="token keyword">import</span> OpenAIChatCompletion<span class="token punctuation">,</span> OpenAITextEmbedding</span>
<span class="line"><span class="token keyword">import</span> os</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŠ è½½ .env åˆ°ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span class="token keyword">from</span> dotenv <span class="token keyword">import</span> load_dotenv<span class="token punctuation">,</span> find_dotenv</span>
<span class="line">_ <span class="token operator">=</span> load_dotenv<span class="token punctuation">(</span>find_dotenv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»º semantic kernel</span></span>
<span class="line">kernel <span class="token operator">=</span> sk<span class="token punctuation">.</span>Kernel<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é…ç½® OpenAI æœåŠ¡ã€‚OPENAI_BASE_URL ä¼šè¢«è‡ªåŠ¨åŠ è½½ç”Ÿæ•ˆ</span></span>
<span class="line">api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&#39;OPENAI_API_KEY&#39;</span><span class="token punctuation">)</span></span>
<span class="line">service_id <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span></span>
<span class="line"></span>
<span class="line">llm_service <span class="token operator">=</span> OpenAIChatCompletion<span class="token punctuation">(</span></span>
<span class="line">    service_id<span class="token operator">=</span>service_id<span class="token punctuation">,</span> </span>
<span class="line">    ai_model_id<span class="token operator">=</span><span class="token string">&quot;gpt-3.5-turbo-1106&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">    api_key<span class="token operator">=</span>api_key</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°† LLM æœåŠ¡æ·»åŠ åˆ° kernel ä¸­</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_service<span class="token punctuation">(</span>llm_service<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">embedding_gen <span class="token operator">=</span> OpenAITextEmbedding<span class="token punctuation">(</span></span>
<span class="line">    ai_model_id<span class="token operator">=</span><span class="token string">&quot;text-embedding-ada-002&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">    api_key<span class="token operator">=</span>api_key</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment"># å°† Embedding æœåŠ¡æ·»åŠ åˆ° kernel ä¸­</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_service<span class="token punctuation">(</span>embedding_gen<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>core_plugins<span class="token punctuation">.</span>text_memory_plugin <span class="token keyword">import</span> TextMemoryPlugin</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>semantic_text_memory <span class="token keyword">import</span> SemanticTextMemory</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>volatile_memory_store <span class="token keyword">import</span> VolatileMemoryStore</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»ºä¸€ä¸ªï¼ˆå†…å­˜ï¼‰å‘é‡æ•°æ®åº“</span></span>
<span class="line">memory <span class="token operator">=</span> SemanticTextMemory<span class="token punctuation">(</span>storage<span class="token operator">=</span>VolatileMemoryStore<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> embeddings_generator<span class="token operator">=</span>embedding_gen<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># æ·»åŠ ä¸€ä¸ªè¿æ¥å‘é‡æ•°æ®åº“çš„ Plugin</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>TextMemoryPlugin<span class="token punctuation">(</span>memory<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;TextMemoryPlugin&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">KernelPlugin(name=&#39;TextMemoryPlugin&#39;, description=None, functions={&#39;recall&#39;: KernelFunctionFromMethod(metadata=KernelFunctionMetadata(name=&#39;recall&#39;, plugin_name=&#39;TextMemoryPlugin&#39;, description=&#39;Recall a fact from the long term memory&#39;, parameters=[KernelParameterMetadata(name=&#39;ask&#39;, description=&#39;The information to retrieve&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=&lt;class &#39;str&#39;&gt;), KernelParameterMetadata(name=&#39;collection&#39;, description=&#39;The collection to search for information.&#39;, default_value=&#39;generic&#39;, type_=&#39;str&#39;, is_required=False, type_object=&lt;class &#39;str&#39;&gt;), KernelParameterMetadata(name=&#39;relevance&#39;, description=&#39;The relevance score, from 0.0 to 1.0; 1.0 means perfect match&#39;, default_value=0.75, type_=&#39;float&#39;, is_required=False, type_object=&lt;class &#39;float&#39;&gt;), KernelParameterMetadata(name=&#39;limit&#39;, description=&#39;The maximum number of relevant memories to recall.&#39;, default_value=1, type_=&#39;int&#39;, is_required=False, type_object=&lt;class &#39;int&#39;&gt;)], is_prompt=False, is_asynchronous=True, return_parameter=KernelParameterMetadata(name=&#39;return&#39;, description=&#39;&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=None)), method=&lt;bound method TextMemoryPlugin.recall of TextMemoryPlugin(memory=SemanticTextMemory())&gt;, stream_method=None), &#39;save&#39;: KernelFunctionFromMethod(metadata=KernelFunctionMetadata(name=&#39;save&#39;, plugin_name=&#39;TextMemoryPlugin&#39;, description=&#39;Save information to semantic memory&#39;, parameters=[KernelParameterMetadata(name=&#39;text&#39;, description=&#39;The information to save.&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=&lt;class &#39;str&#39;&gt;), KernelParameterMetadata(name=&#39;key&#39;, description=&#39;The unique key to associate with the information.&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=&lt;class &#39;str&#39;&gt;), KernelParameterMetadata(name=&#39;collection&#39;, description=&#39;The collection to save the information.&#39;, default_value=&#39;generic&#39;, type_=&#39;str&#39;, is_required=False, type_object=&lt;class &#39;str&#39;&gt;)], is_prompt=False, is_asynchronous=True, return_parameter=KernelParameterMetadata(name=&#39;return&#39;, description=&#39;&#39;, default_value=None, type_=&#39;&#39;, is_required=True, type_object=None)), method=&lt;bound method TextMemoryPlugin.save of TextMemoryPlugin(memory=SemanticTextMemory())&gt;, stream_method=None)})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-2ã€æ–‡æœ¬å‘é‡åŒ–" tabindex="-1"><a class="header-anchor" href="#_5-2ã€æ–‡æœ¬å‘é‡åŒ–"><span>5.2ã€æ–‡æœ¬å‘é‡åŒ–</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>text <span class="token keyword">import</span> split_markdown_lines</span>
<span class="line"></span>
<span class="line"><span class="token comment"># è¯»å–æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&#39;ChatALL.md&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;r&#39;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># with open(&#39;sk_samples/SamplePlugin/SamplePlugin.py&#39;, &#39;r&#39;) as f:</span></span>
<span class="line">    content <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°†æ–‡ä»¶å†…å®¹åˆ†ç‰‡ï¼Œå•ç‰‡æœ€å¤§ 100 tokenï¼ˆæ³¨æ„ï¼šSK çš„ text split åŠŸèƒ½ç›®å‰å¯¹ä¸­æ–‡æ”¯æŒä¸å¦‚å¯¹è‹±æ–‡æ”¯æŒå¾—å¥½ï¼‰</span></span>
<span class="line">lines <span class="token operator">=</span> split_markdown_lines<span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">collection_id <span class="token operator">=</span> <span class="token string">&quot;generic&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°†åˆ†ç‰‡åçš„å†…å®¹ï¼Œå­˜å…¥å†…å­˜</span></span>
<span class="line"><span class="token keyword">for</span> index<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">await</span> memory<span class="token punctuation">.</span>save_information<span class="token punctuation">(</span>collection<span class="token operator">=</span>collection_id<span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span>index<span class="token punctuation">,</span> text<span class="token operator">=</span>line<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-3ã€å‘é‡æœç´¢" tabindex="-1"><a class="header-anchor" href="#_5-3ã€å‘é‡æœç´¢"><span>5.3ã€å‘é‡æœç´¢</span></a></h3><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> memory<span class="token punctuation">.</span>search<span class="token punctuation">(</span>collection_id<span class="token punctuation">,</span> <span class="token string">&quot;ChatALLæ€ä¹ˆä¸‹è½½ï¼Ÿ&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">æ‹¥æœ‰å¯ä»¥è®¿é—®è¿™äº› AI çš„å¸å·ï¼Œæˆ– API tokenã€‚</span>
<span class="line">2. ä¸ AI ç½‘ç«™æœ‰å¯é çš„ç½‘ç»œè¿æ¥ã€‚</span>
<span class="line"></span>
<span class="line">## ä¸‹è½½ / å®‰è£…</span>
<span class="line"></span>
<span class="line">ä» https://github.com/sunner/ChatALL/releases ä¸‹è½½</span>
<span class="line"></span>
<span class="line">### Windows ç³»ç»Ÿ</span>
<span class="line"></span>
<span class="line">ç›´æ¥ä¸‹è½½ \*-win.exe å®‰è£…æ–‡ä»¶å¹¶è¿è¡Œä¹‹ã€‚</span>
<span class="line"></span>
<span class="line">### macOS ç³»ç»Ÿ</span>
<span class="line"></span>
<span class="line">å¯¹äºè‹¹æœç¡…èŠ¯ç‰‡ Macï¼ˆM1ï¼ŒM2 CPUï¼‰ï¼Œè¯·ä¸‹è½½ \*-mac-arm64.</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-4ã€ç°åœ¨ç”¨å‡½æ•°åµŒå¥—åšä¸€ä¸ªç®€å•çš„-rag" tabindex="-1"><a class="header-anchor" href="#_5-4ã€ç°åœ¨ç”¨å‡½æ•°åµŒå¥—åšä¸€ä¸ªç®€å•çš„-rag"><span>5.4ã€ç°åœ¨ç”¨å‡½æ•°åµŒå¥—åšä¸€ä¸ªç®€å•çš„ RAG</span></a></h3><p>ä¾‹ï¼šåŸºäº ChatALL çš„è¯´æ˜æ–‡æ¡£ï¼Œåšé—®ç­”</p><p>åœ¨è‡ªå®šä¹‰çš„ Semantic Function ä¸­ï¼ŒåµŒå¥—è°ƒç”¨å†…ç½®çš„ <code>TextMemoryPlugin</code>ã€‚</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># ç›´æ¥åœ¨ä»£ç é‡Œåˆ›å»º semantic functionã€‚çœŸå®å·¥ç¨‹ä¸å»ºè®®è¿™ä¹ˆåš</span></span>
<span class="line"><span class="token comment"># é‡Œé¢è°ƒç”¨äº† `recall()`</span></span>
<span class="line">prompt <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;</span>
<span class="line">åŸºäºä¸‹é¢çš„èƒŒæ™¯ä¿¡æ¯å›ç­”é—®é¢˜ã€‚å¦‚æœèƒŒæ™¯ä¿¡æ¯ä¸ºç©ºï¼Œæˆ–è€…å’Œé—®é¢˜ä¸ç›¸å…³ï¼Œè¯·å›ç­”&quot;æˆ‘ä¸çŸ¥é“&quot;ã€‚</span>
<span class="line"></span>
<span class="line">[èƒŒæ™¯ä¿¡æ¯å¼€å§‹]</span>
<span class="line">{{recall $input}}</span>
<span class="line">[èƒŒæ™¯ä¿¡æ¯ç»“æŸ]</span>
<span class="line"></span>
<span class="line">é—®é¢˜ï¼š{{$input}}</span>
<span class="line">å›ç­”ï¼š</span>
<span class="line">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line">req_settings <span class="token operator">=</span> kernel<span class="token punctuation">.</span>get_service<span class="token punctuation">(</span>service_id<span class="token punctuation">)</span><span class="token punctuation">.</span>get_prompt_execution_settings_class<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>service_id<span class="token operator">=</span>service_id<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">prompt_template_config <span class="token operator">=</span> PromptTemplateConfig<span class="token punctuation">(</span></span>
<span class="line">    template<span class="token operator">=</span>prompt<span class="token punctuation">,</span></span>
<span class="line">    description<span class="token operator">=</span><span class="token string">&quot;RAGé—®ç­”&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    execution_settings<span class="token operator">=</span><span class="token punctuation">{</span>service_id<span class="token punctuation">:</span> req_settings<span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    input_variables<span class="token operator">=</span><span class="token punctuation">[</span></span>
<span class="line">        InputVariable<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">&quot;The user query&quot;</span><span class="token punctuation">,</span> is_required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">rag_function <span class="token operator">=</span> kernel<span class="token punctuation">.</span>add_function<span class="token punctuation">(</span></span>
<span class="line">    function_name<span class="token operator">=</span><span class="token string">&quot;search_and_answer&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    plugin_name<span class="token operator">=</span><span class="token string">&quot;MyDemoPlugin&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    prompt_template_config<span class="token operator">=</span>prompt_template_config<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> kernel<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span></span>
<span class="line">    rag_function<span class="token punctuation">,</span></span>
<span class="line">    KernelArguments<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token operator">=</span><span class="token string">&quot;ChatALL æ€ä¹ˆä¸‹è½½&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">ä» https://github.com/sunner/ChatALL/releases ä¸‹è½½å®‰è£…æ–‡ä»¶ã€‚å¯¹äºWindowsç³»ç»Ÿï¼Œä¸‹è½½\*-win.exeæ–‡ä»¶å¹¶è¿è¡Œï¼›å¯¹äºmacOSç³»ç»Ÿï¼Œè‹¹æœç¡…èŠ¯ç‰‡Macï¼ˆM1ï¼ŒM2 CPUï¼‰ä¸‹è½½\*-mac-arm64æ–‡ä»¶ã€‚</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_5-5ã€è¿æ¥å…¶å®ƒ-vectordb" tabindex="-1"><a class="header-anchor" href="#_5-5ã€è¿æ¥å…¶å®ƒ-vectordb"><span>5.5ã€è¿æ¥å…¶å®ƒ VectorDB</span></a></h3><p>Semantic Kernel ç›®å‰å·²ä¸å¾ˆå¤šä¸»æµçš„å‘é‡æ•°æ®åº“åšäº†é€‚é…</p><p>å…·ä½“å‚è€ƒï¼šhttps://learn.microsoft.com/en-us/semantic-kernel/memories/vector-db</p><h2 id="_6ã€planner" tabindex="-1"><a class="header-anchor" href="#_6ã€planner"><span>6ã€Planner</span></a></h2><p>SK çš„ Planner ç›®çš„æ˜¯ Agent å¼€å‘ã€‚åªå°è£…äº†å‡ ä¸ªåŸºæœ¬å½¢å¼ï¼ŒæŠŠæ›´å¤šçš„æ¢ç´¢ç•™ç»™äº†å¼€å‘è€…ã€‚</p><h3 id="_6-1ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“-agent" tabindex="-1"><a class="header-anchor" href="#_6-1ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“-agent"><span>6.1ã€ä»€ä¹ˆæ˜¯æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</span></a></h3><p>å°†å¤§è¯­è¨€æ¨¡å‹ä½œä¸ºä¸€ä¸ªæ¨ç†å¼•æ“ã€‚ç»™å®šä¸€ä¸ªä»»åŠ¡ï¼Œæ™ºèƒ½ä½“è‡ªåŠ¨ç”Ÿæˆå®Œæˆä»»åŠ¡æ‰€éœ€çš„æ­¥éª¤ï¼Œæ‰§è¡Œç›¸åº”åŠ¨ä½œï¼ˆä¾‹å¦‚é€‰æ‹©å¹¶è°ƒç”¨å·¥å…·ï¼‰ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚</p><p>è¿™ä¸ªå¤šæ­¥éª¤çš„è§„åˆ’è¿‡ç¨‹ï¼Œå°±ç”± <strong>Planner</strong> å®Œæˆã€‚</p><p><img src="/wiki/assets/img/agent-overview.afaf1154.png" alt="image"></p><p>Agent ä¸ RAG å’Œ Copilot çš„åŒºåˆ«</p><p><img src="/wiki/assets/img/types-of-agents.9d1012c8.png" alt="image"></p><h3 id="_6-2ã€sk-python-æä¾›äº†å››ç§-planner" tabindex="-1"><a class="header-anchor" href="#_6-2ã€sk-python-æä¾›äº†å››ç§-planner"><span>6.2ã€SK Python æä¾›äº†å››ç§ Plannerï¼š</span></a></h3><ol><li><code>SequentialPlanner</code><ul><li>åˆ¶å®šåŒ…å«ä¸€ç³»åˆ—æ­¥éª¤çš„è®¡åˆ’ï¼Œè¿™äº›æ­¥éª¤é€šè¿‡è‡ªå®šä¹‰ç”Ÿæˆçš„è¾“å…¥å’Œè¾“å‡ºå˜é‡ç›¸äº’è¿æ¥</li><li>æ ¸å¿ƒ https://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/planners/sequential_planner/Plugins/SequentialPlanning/skprompt.txt</li><li>å®˜æ–¹ä¾‹ç¨‹ï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/samples/kernel-syntax-examples/sequential_planner.py</li></ul></li><li><code>ActionPlanner</code><ul><li>ç±»ä¼¼ OpenAI Function Callingï¼Œä» kernel ä¸­å·²æ³¨å†Œçš„æ‰€æœ‰ plugin ä¸­æ‰¾åˆ°ä¸€ä¸ªè¯¥æ‰§è¡Œçš„å‡½æ•°</li><li>æ ¸å¿ƒ promptï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/planners/action_planner/skprompt.txt</li><li>å®˜æ–¹ä¾‹ç¨‹ï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/samples/kernel-syntax-examples/action_planner.py</li></ul></li><li><code>StepwisePlanner</code><ul><li>æ¯æ‰§è¡Œå®Œä¸€æ­¥ï¼Œéƒ½åšä¸€ä¸‹å¤ç›˜</li><li>åªè¾“å‡º actionï¼Œä¸æ‰§è¡Œ</li><li>æ ¸å¿ƒ promptï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/planners/stepwise_planner/Plugins/StepwiseStep/skprompt.txt</li></ul></li><li><code>BasicPlanner</code><ul><li><strong>ä¸å»ºè®®ä½¿ç”¨</strong>ã€‚æŠŠä»»åŠ¡æ‹†è§£ï¼Œè‡ªåŠ¨è°ƒç”¨å„ä¸ªå‡½æ•°ï¼Œå®Œæˆä»»åŠ¡ã€‚å®ƒåªæ˜¯ä¸ªç”¨äºåŸºç¡€éªŒè¯çš„åŠŸèƒ½ï¼Œæœ€ç»ˆä¼šè¢« <code>SequentialPlanner</code> æ›¿ä»£</li><li>æ ¸å¿ƒ promptï¼šhttps://github.com/microsoft/semantic-kernel/blob/main/python/semantic_kernel/planners/basic_planner.py</li></ul></li></ol><p>ä½¿ç”¨ planner çš„æ­¥éª¤éå¸¸ç®€å•ï¼š</p><ol><li>æŠŠ plugin æ³¨å†Œåˆ° kernel</li><li>æŠŠ kernel å½“å‚æ•°å®ä¾‹åŒ–æŸä¸ª planner</li><li>è°ƒç”¨ planner çš„ <code>create_plan_async()</code> æ–¹æ³•è·å¾— plan</li><li>è°ƒç”¨ plan çš„ <code>invoke_async()</code> æ–¹æ³•æ‰§è¡Œ plan</li></ol><p>(æ³¨æ„ï¼Œä¸åŒ planner æ¥å£å¹¶ä¸ä¸€è‡´ï¼Œä¸èƒ½ç®€å•å¹³æ›¿)</p><h3 id="_6-3ã€ç”¨-planner-å®ç°ä¸€ä¸ªèƒ½ä½¿ç”¨æœç´¢å’Œæ—¥å†å·¥å…·çš„-agent" tabindex="-1"><a class="header-anchor" href="#_6-3ã€ç”¨-planner-å®ç°ä¸€ä¸ªèƒ½ä½¿ç”¨æœç´¢å’Œæ—¥å†å·¥å…·çš„-agent"><span>6.3ã€ç”¨ Planner å®ç°ä¸€ä¸ªèƒ½ä½¿ç”¨æœç´¢å’Œæ—¥å†å·¥å…·çš„ Agent</span></a></h3><p>ä¾‹ï¼šå‘¨æ°ä¼¦2024å¢¨å°”æœ¬æ¼”å”±ä¼šæ˜¯æ˜ŸæœŸå‡ </p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>core_plugins <span class="token keyword">import</span> WebSearchEnginePlugin</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>connectors<span class="token punctuation">.</span>search_engine <span class="token keyword">import</span> BingConnector</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>planners <span class="token keyword">import</span> SequentialPlanner</span>
<span class="line"><span class="token keyword">import</span> semantic_kernel <span class="token keyword">as</span> sk</span>
<span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>connectors<span class="token punctuation">.</span>ai<span class="token punctuation">.</span>open_ai <span class="token keyword">import</span> OpenAIChatCompletion</span>
<span class="line"><span class="token keyword">import</span> os</span>
<span class="line"></span>
<span class="line"><span class="token comment"># åŠ è½½ .env åˆ°ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span class="token keyword">from</span> dotenv <span class="token keyword">import</span> load_dotenv<span class="token punctuation">,</span> find_dotenv</span>
<span class="line">_ <span class="token operator">=</span> load_dotenv<span class="token punctuation">(</span>find_dotenv<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»º semantic kernel</span></span>
<span class="line">kernel <span class="token operator">=</span> sk<span class="token punctuation">.</span>Kernel<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># é…ç½® OpenAI æœåŠ¡ã€‚OPENAI_BASE_URL ä¼šè¢«è‡ªåŠ¨åŠ è½½ç”Ÿæ•ˆ</span></span>
<span class="line">api_key <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&#39;OPENAI_API_KEY&#39;</span><span class="token punctuation">)</span></span>
<span class="line">service_id <span class="token operator">=</span> <span class="token string">&quot;default&quot;</span></span>
<span class="line"></span>
<span class="line">llm_service <span class="token operator">=</span> OpenAIChatCompletion<span class="token punctuation">(</span></span>
<span class="line">    service_id<span class="token operator">=</span>service_id<span class="token punctuation">,</span> </span>
<span class="line">    ai_model_id<span class="token operator">=</span><span class="token string">&quot;gpt-4&quot;</span><span class="token punctuation">,</span> </span>
<span class="line">    api_key<span class="token operator">=</span>api_key</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å°† LLM æœåŠ¡æ·»åŠ åˆ° kernel ä¸­</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_service<span class="token punctuation">(</span>llm_service<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…³äºå¦‚ä½•æ³¨å†Œ BING API KEY ï¼š<a href="https://agiclass.feishu.cn/wiki/JKV7wXM7IiXJFmk3ktgca1tfnfR" target="_blank" rel="noopener noreferrer">BING API KEY</a></p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># å¯¼å…¥æœç´¢ plugin</span></span>
<span class="line">connector <span class="token operator">=</span> BingConnector<span class="token punctuation">(</span>api_key<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">&quot;BING_API_KEY&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>WebSearchEnginePlugin<span class="token punctuation">(</span>connector<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;WebSearch&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">KernelPlugin(name=&#39;WebSearch&#39;, description=None, functions={&#39;search&#39;: KernelFunctionFromMethod(metadata=KernelFunctionMetadata(name=&#39;search&#39;, plugin_name=&#39;WebSearch&#39;, description=&#39;Performs a web search for a given query&#39;, parameters=[KernelParameterMetadata(name=&#39;query&#39;, description=&#39;The search query&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=&lt;class &#39;str&#39;&gt;), KernelParameterMetadata(name=&#39;num_results&#39;, description=&#39;The number of search results to return&#39;, default_value=1, type_=&#39;int&#39;, is_required=False, type_object=&lt;class &#39;int&#39;&gt;), KernelParameterMetadata(name=&#39;offset&#39;, description=&#39;The number of search results to skip&#39;, default_value=0, type_=&#39;int&#39;, is_required=False, type_object=&lt;class &#39;int&#39;&gt;)], is_prompt=False, is_asynchronous=True, return_parameter=KernelParameterMetadata(name=&#39;return&#39;, description=&#39;&#39;, default_value=None, type_=&#39;str&#39;, is_required=True, type_object=None)), method=&lt;bound method WebSearchEnginePlugin.search of &lt;semantic_kernel.core_plugins.web_search_engine_plugin.WebSearchEnginePlugin object at 0x7fe0e0f0e7d0&gt;&gt;, stream_method=None)})</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token keyword">from</span> semantic_kernel<span class="token punctuation">.</span>core_plugins <span class="token keyword">import</span> MathPlugin<span class="token punctuation">,</span> TextPlugin<span class="token punctuation">,</span> TimePlugin</span>
<span class="line"></span>
<span class="line">kernel<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span>TimePlugin<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;time&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># åˆ›å»º planner</span></span>
<span class="line">planner <span class="token operator">=</span> SequentialPlanner<span class="token punctuation">(</span>kernel<span class="token punctuation">,</span> service_id<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># å¼€å§‹</span></span>
<span class="line"><span class="token comment">#query = &quot;å‘¨æ°ä¼¦2024å¹´4æœˆæ¼”å”±ä¼šï¼Œå“ªåœºç¦»åŒ—äº¬æœ€è¿‘ï¼Œå¸®æˆ‘è®¢ä¸€å¼ æœºç¥¨&quot;</span></span>
<span class="line">query <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;å‘¨æ°ä¼¦2024å¢¨å°”æœ¬æ¼”å”±ä¼šæ˜¯æ˜ŸæœŸå‡ &quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line">plan <span class="token operator">=</span> <span class="token keyword">await</span> planner<span class="token punctuation">.</span>create_plan<span class="token punctuation">(</span>goal<span class="token operator">=</span>query<span class="token punctuation">)</span>    </span>
<span class="line">result <span class="token operator">=</span> <span class="token keyword">await</span> plan<span class="token punctuation">.</span>invoke<span class="token punctuation">(</span>kernel<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">for</span> i<span class="token punctuation">,</span> step <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>plan<span class="token punctuation">.</span>_steps<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>description<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>plugin_name<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token operator">+</span>step<span class="token punctuation">.</span>name<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">&quot;: &quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>parameters<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">print</span><span class="token punctuation">(</span>step<span class="token punctuation">.</span>_outputs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>metadata<span class="token punctuation">[</span><span class="token string">&quot;results&quot;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Agent å›å¤ï¼š</span><span class="token interpolation"><span class="token punctuation">{</span>result<span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output:</strong></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">Performs a web search for a given query</span>
<span class="line">WebSearch.search: {&#39;query&#39;: &#39;å‘¨æ°ä¼¦2024å¢¨å°”æœ¬æ¼”å”±ä¼šæ—¥æœŸ&#39;, &#39;num_results&#39;: 1, &#39;offset&#39;: 0}</span>
<span class="line">CONCERT_DATE=[&#39;ä»Šå¹´3æœˆï¼Œåè¯­ä¹å›å¤©ç‹å‘¨æ°ä¼¦å”±å“æ‚‰å°¼ï¼Œä¸æˆåƒä¸Šä¸‡çš„æ­Œè¿·åº¦è¿‡äº†ä¸€åœºéš¾å¿˜çš„å˜‰å¹´åã€‚2024å¹´3æœˆ2æ—¥æ™šä¸Š7ç‚¹30åˆ†ï¼Œä»–å°†å†åº¦ç«™ä¸Šæ‚‰å°¼æˆ·å¤–ä½“è‚²åœºï¼ˆGIANTS Stadiumï¼‰ä¸æ­Œè¿·åŒä¹ã€‚æ›´ä»¤äººæŒ¯å¥‹çš„æ˜¯ï¼Œä»–ä¹Ÿå°†äº3æœˆ16åŠ17æ—¥æ™šä¸Š7ç‚¹30åˆ†ï¼Œé¦–åº¦ç™»ä¸Šå¢¨å°”æœ¬ç½—å¾·â€¢æ‹‰æ²ƒç«æŠ€åœºï¼ˆRodLaverArenaï¼‰çš„èˆå°ï¼Œå¸¦æ¥2åœºç²¾å½©çº·å‘ˆçš„ ...&#39;]</span>
<span class="line">Get the current day of the week</span>
<span class="line">time.dayOfWeek: {&#39;day_name&#39;: &#39;$CONCERT_DATE&#39;}</span>
<span class="line">RESULT__CONCERT_DAY=Tuesday</span>
<span class="line">Agent å›å¤ï¼šTuesday</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>âœ… <strong>Tip:</strong> è¿™é‡Œåªéœ€è¦æŒæ¡ Agent çš„å®šä¹‰å’Œå·¥ä½œåŸç†ã€‚SK è‡ªå¸¦çš„ Agent Prompt å…¶å®æ•ˆæœå¾ˆå·®ã€‚Agent çš„å®ç°æŠ€å·§æˆ‘ä»¬æœªæ¥ä¸“é—¨è®²è§£ã€‚</p></blockquote><p><strong>å¸¦ç€ä»¥ä¸ŠçŸ¥è¯†ï¼Œé‡æ–°å›é¡¾ä¸€ä¸‹ Kernel çš„æ„ä¹‰</strong></p><p><img src="/wiki/assets/img/kernel.b8a89e6e.png" alt="image"></p><h2 id="_7ã€vscode-æ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_7ã€vscode-æ’ä»¶"><span>7ã€VSCode æ’ä»¶</span></a></h2><p>è¿™æ˜¯ä¸ª VSCode çš„æ’ä»¶ï¼Œåœ¨ VSCode é‡Œå¯ä»¥ç›´æ¥åˆ›å»ºå’Œè°ƒè¯• Semantic Functionã€‚</p><p>å®‰è£…åœ°å€ï¼šhttps://marketplace.visualstudio.com/items?itemName=ms-semantic-kernel.semantic-kernel</p><h2 id="æ€è€ƒ" tabindex="-1"><a class="header-anchor" href="#æ€è€ƒ"><span>æ€è€ƒ</span></a></h2><p>ä»€ä¹ˆæ—¶å€™é€‚åˆç”¨ï¼š</p><ul><li>åŸç”Ÿ API + Function Calling</li><li>Assistant API</li><li>ä¸‰æ–¹çš„ SDK, ä¾‹å¦‚ Semantic Kernel</li></ul><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h2><ol><li>æˆ‘æ˜¯å¦åº”è¯¥ä½¿ç”¨å¼€å‘æ¡†æ¶ï¼Ÿ</li><li>ä»€ä¹ˆæƒ…å†µä¸‹é€‰æ‹© SK ï¼Ÿ</li></ol><ul><li>å¦‚æœä½ ç»å¸¸éœ€è¦æ›¿æ¢ä¸åŒ LLM æˆ–æœ‰å¤§é‡çš„ Prompt è°ƒè¯•éœ€æ±‚ï¼Œé€‰æ‹©ä¸€ä¸ªå¼€å‘æ¡†æ¶ä¼šè®©ç”Ÿæ´»æ›´å®¹æ˜“</li><li>å¦‚æœä½ çš„ Prompt é‡Œæœ‰å¤§é‡åµŒå¥—è°ƒç”¨</li><li>å¦‚æœä½ å¿…é¡»ä½¿ç”¨ C#/JAVA æŠ€æœ¯æ ˆï¼ŒSK å¯èƒ½æ˜¯ç›®å‰å”¯ä¸€çš„é€‰æ‹©</li><li>å¦‚æœä½ ç”¨ Python æŠ€æœ¯æ ˆï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹ LangChain å†åšå–èˆï¼ˆä¸‹èŠ‚è¯¾ç»†è®²ï¼‰</li></ul><h2 id="ä½œä¸š" tabindex="-1"><a class="header-anchor" href="#ä½œä¸š"><span>ä½œä¸š</span></a></h2><p>ç”¨ Semantic Kernel é‡æ„ ChatPDF çš„ä½œä¸šã€‚</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/wiki/assets/js/runtime~app.2c74ba0d.js" defer></script><script src="/wiki/assets/js/768.e6d4205d.js" defer></script><script src="/wiki/assets/js/app.5b328b55.js" defer></script>
  </body>
</html>
