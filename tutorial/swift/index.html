<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Swift学习教程 | 知识库</title><meta name="description" content="涵盖Java、Spring、Vue、Node.js等技术知识">
    <link rel="stylesheet" href="/wiki/assets/css/styles.2a121ef9.css">
    <link rel="preload" href="/wiki/assets/js/runtime~app.46b38a58.js" as="script"><link rel="preload" href="/wiki/assets/css/styles.2a121ef9.css" as="style"><link rel="preload" href="/wiki/assets/js/768.e6d4205d.js" as="script"><link rel="preload" href="/wiki/assets/js/app.6ec2591a.js" as="script">
    <link rel="prefetch" href="/wiki/assets/js/solution_smart-marketing_index.html.c6a04243.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_high-availability_index.html.1ef390b5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_react_index.html.4aacb360.js" as="script"><link rel="prefetch" href="/wiki/assets/js/solution_aiops_index.html.9565eae6.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_swift_index.html.26390310.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_embedded_index.html.1d42b838.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_nodejs_index.html.42d74f45.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_python_index.html.e9a522b3.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-boot_index.html.38761574.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_jdk-changes_index.html.25824bdf.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_r_index.html.16153cc5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_vue_index.html.63167ab5.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_concurrency_index.html.e362b849.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_advanced_index.html.71c33c5c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_spring-cloud_index.html.fd0f185e.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_message-queue_index.html.b4b3c3e6.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_big-data_index.html.bbd64ec0.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_llm_index.html.09e48380.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_database_index.html.14a46108.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_basic_index.html.bddf19ef.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_ml_index.html.7188e38d.js" as="script"><link rel="prefetch" href="/wiki/assets/js/interview_java_collections_index.html.0c5ba651.js" as="script"><link rel="prefetch" href="/wiki/assets/js/tutorial_rl_index.html.6c114c3c.js" as="script"><link rel="prefetch" href="/wiki/assets/js/get-started.html.c4557635.js" as="script"><link rel="prefetch" href="/wiki/assets/js/index.html.c33a2346.js" as="script"><link rel="prefetch" href="/wiki/assets/js/404.html.a5b4614e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/wiki/"><img class="vp-site-logo" src="/wiki/logo/new-logo.svg" alt="知识库"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">知识库</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="开始阅读"><!--[--><!--[--><!--]--><!--]-->开始阅读<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="Java基础"><!--[--><!--[--><!--]--><!--]-->Java基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Java高级"><!--[--><!--[--><!--]--><!--]-->Java高级<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Java集合详解"><!--[--><!--[--><!--]--><!--]-->Java集合详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Java多线程详解"><!--[--><!--[--><!--]--><!--]-->Java多线程详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDK版本变化详解"><!--[--><!--[--><!--]--><!--]-->JDK版本变化详解<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="高可用架构"><!--[--><!--[--><!--]--><!--]-->高可用架构<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="智能营销"><!--[--><!--[--><!--]--><!--]-->智能营销<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/wiki/get-started.html" aria-label="开始阅读"><!--[--><!--[--><!--]--><!--]-->开始阅读<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Java"><span class="title">Java</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Java"><span class="title">Java</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/basic/" aria-label="Java基础"><!--[--><!--[--><!--]--><!--]-->Java基础<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/advanced/" aria-label="Java高级"><!--[--><!--[--><!--]--><!--]-->Java高级<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/collections/" aria-label="Java集合详解"><!--[--><!--[--><!--]--><!--]-->Java集合详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/concurrency/" aria-label="Java多线程详解"><!--[--><!--[--><!--]--><!--]-->Java多线程详解<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/java/jdk-changes/" aria-label="JDK版本变化详解"><!--[--><!--[--><!--]--><!--]-->JDK版本变化详解<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Spring"><span class="title">Spring</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Spring"><span class="title">Spring</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-boot/" aria-label="Spring Boot"><!--[--><!--[--><!--]--><!--]-->Spring Boot<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/interview/spring-cloud/" aria-label="Spring Cloud"><!--[--><!--[--><!--]--><!--]-->Spring Cloud<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="解决方案"><span class="title">解决方案</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/aiops/" aria-label="AIOps"><!--[--><!--[--><!--]--><!--]-->AIOps<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/high-availability/" aria-label="高可用架构"><!--[--><!--[--><!--]--><!--]-->高可用架构<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/wiki/solution/smart-marketing/" aria-label="智能营销"><!--[--><!--[--><!--]--><!--]-->智能营销<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/wiki/tutorial/swift/" aria-label="Swift教程"><!--[--><!--[--><!--]--><!--]-->Swift教程<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="swift学习教程" tabindex="-1"><a class="header-anchor" href="#swift学习教程"><span>Swift学习教程</span></a></h1><h2 id="_1-swift基础语法" tabindex="-1"><a class="header-anchor" href="#_1-swift基础语法"><span>1. Swift基础语法</span></a></h2><h3 id="q1-什么是swift-它有什么特点" tabindex="-1"><a class="header-anchor" href="#q1-什么是swift-它有什么特点"><span>Q1: 什么是Swift？它有什么特点？</span></a></h3><p><strong>答：</strong> Swift是苹果公司开发的现代化编程语言，用于开发iOS、macOS、watchOS和tvOS应用。</p><p>主要特点：</p><ul><li><strong>安全</strong>：通过可选类型、类型推断等特性减少运行时错误</li><li><strong>现代</strong>：支持函数式编程、面向协议编程等现代编程范式</li><li><strong>快速</strong>：编译型语言，性能接近C语言</li><li><strong>易读</strong>：语法简洁明了，易于学习和使用</li><li><strong>交互式</strong>：支持Playground实时编程环境</li><li><strong>兼容性</strong>：与Objective-C代码可以互操作</li></ul><h3 id="q2-swift的基本数据类型有哪些" tabindex="-1"><a class="header-anchor" href="#q2-swift的基本数据类型有哪些"><span>Q2: Swift的基本数据类型有哪些？</span></a></h3><p><strong>答：</strong> Swift的基本数据类型包括：</p><ol><li><p><strong>整数类型</strong>：</p><ul><li><code>Int</code>：有符号整数（平台相关大小）</li><li><code>UInt</code>：无符号整数</li><li>特定大小：<code>Int8</code>、<code>Int16</code>、<code>Int32</code>、<code>Int64</code>、<code>UInt8</code>等</li></ul></li><li><p><strong>浮点数类型</strong>：</p><ul><li><code>Float</code>：32位浮点数</li><li><code>Double</code>：64位浮点数（默认）</li></ul></li><li><p><strong>布尔类型</strong>：</p><ul><li><code>Bool</code>：只有<code>true</code>和<code>false</code>两个值</li></ul></li><li><p><strong>字符串类型</strong>：</p><ul><li><code>String</code>：文本数据类型</li></ul></li><li><p><strong>字符类型</strong>：</p><ul><li><code>Character</code>：单个字符</li></ul></li></ol><p>示例：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">let</span> integer<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">42</span></span>
<span class="line"><span class="token keyword">let</span> double<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token number">3.14159</span></span>
<span class="line"><span class="token keyword">let</span> boolean<span class="token punctuation">:</span> <span class="token class-name">Bool</span> <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token keyword">let</span> string<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Hello, Swift!&quot;</span></span></span>
<span class="line"><span class="token keyword">let</span> character<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;A&quot;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q3-swift的变量和常量声明" tabindex="-1"><a class="header-anchor" href="#q3-swift的变量和常量声明"><span>Q3: Swift的变量和常量声明？</span></a></h3><p><strong>答：</strong> Swift使用<code>let</code>声明常量，<code>var</code>声明变量：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 常量声明</span></span>
<span class="line"><span class="token keyword">let</span> constantValue <span class="token operator">=</span> <span class="token number">10</span></span>
<span class="line"><span class="token comment">// constantValue = 20 // 错误：不能修改常量</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 变量声明</span></span>
<span class="line"><span class="token keyword">var</span> variableValue <span class="token operator">=</span> <span class="token number">10</span></span>
<span class="line">variableValue <span class="token operator">=</span> <span class="token number">20</span> <span class="token comment">// 正确：可以修改变量</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 显式类型声明</span></span>
<span class="line"><span class="token keyword">let</span> explicitDouble<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token number">70</span></span>
<span class="line"><span class="token keyword">let</span> explicitString<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Hello&quot;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 类型推断</span></span>
<span class="line"><span class="token keyword">let</span> implicitInteger <span class="token operator">=</span> <span class="token number">70</span> <span class="token comment">// 推断为Int</span></span>
<span class="line"><span class="token keyword">let</span> implicitDouble <span class="token operator">=</span> <span class="token number">70.0</span> <span class="token comment">// 推断为Double</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-控制流和函数" tabindex="-1"><a class="header-anchor" href="#_2-控制流和函数"><span>2. 控制流和函数</span></a></h2><h3 id="q4-swift的控制流语句" tabindex="-1"><a class="header-anchor" href="#q4-swift的控制流语句"><span>Q4: Swift的控制流语句？</span></a></h3><p><strong>答：</strong> Swift的控制流语句包括：</p><p><strong>条件语句</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// if语句</span></span>
<span class="line"><span class="token keyword">let</span> temperature <span class="token operator">=</span> <span class="token number">25</span></span>
<span class="line"><span class="token keyword">if</span> temperature <span class="token operator">&gt;</span> <span class="token number">30</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;天气很热&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> temperature <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;天气温暖&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;天气凉爽&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// guard语句（守护语句）</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;姓名不存在&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>循环语句</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// for-in循环</span></span>
<span class="line"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Anna&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Brian&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Jack&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">for</span> name <span class="token keyword">in</span> names <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 数值范围循环</span></span>
<span class="line"><span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">...</span><span class="token number">5</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> times 5 is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index <span class="token operator">*</span> <span class="token number">5</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// while循环</span></span>
<span class="line"><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">while</span> count <span class="token operator">&lt;</span> <span class="token number">3</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;count is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">count</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    count <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// repeat-while循环（do-while）</span></span>
<span class="line"><span class="token keyword">var</span> repeatCount <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line"><span class="token keyword">repeat</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;repeat count is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">repeatCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    repeatCount <span class="token operator">+=</span> <span class="token number">1</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">while</span> repeatCount <span class="token operator">&lt;</span> <span class="token number">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q5-swift函数的定义和使用" tabindex="-1"><a class="header-anchor" href="#q5-swift函数的定义和使用"><span>Q5: Swift函数的定义和使用？</span></a></h3><p><strong>答：</strong> Swift函数的定义和使用：</p><p><strong>基本函数定义</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 无参数无返回值</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 有参数无返回值</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">person</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 有参数有返回值</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> a <span class="token operator">+</span> b</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 多个返回值</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">getMinMax</span><span class="token punctuation">(</span>scores<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">(</span>min<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> max<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token punctuation">(</span>scores<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">,</span> scores<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数标签</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 使用参数标签</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span>to person<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> from hometown<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">person</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">! Glad you could visit from </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">hometown</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">greet</span><span class="token punctuation">(</span>to<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Bill&quot;</span></span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Cupertino&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 忽略参数标签</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">someFunction</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> firstParameterName<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> secondParameterName<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// firstParameterName的参数标签被忽略</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">someFunction</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> secondParameterName<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>可变参数和默认参数</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 可变参数</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">arithmeticMean</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> numbers<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token operator">...</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> total<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    <span class="token keyword">for</span> number <span class="token keyword">in</span> numbers <span class="token punctuation">{</span></span>
<span class="line">        total <span class="token operator">+=</span> number</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> total <span class="token operator">/</span> <span class="token class-name">Double</span><span class="token punctuation">(</span>numbers<span class="token punctuation">.</span>count<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 默认参数值</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">someFunction</span><span class="token punctuation">(</span>parameterWithoutDefault<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> parameterWithDefault<span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 如果在调用时没有传入第二个参数，parameterWithDefault的值为12</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q6-swift的闭包" tabindex="-1"><a class="header-anchor" href="#q6-swift的闭包"><span>Q6: Swift的闭包？</span></a></h3><p><strong>答：</strong> 闭包是自包含的功能代码块，可以在代码中被传递和使用。</p><p><strong>基本语法</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token punctuation">{</span> <span class="token punctuation">(</span>parameters<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> returnType <span class="token keyword">in</span></span>
<span class="line">    statements</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>示例</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 简单闭包</span></span>
<span class="line"><span class="token keyword">let</span> closure <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">String</span> <span class="token keyword">in</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token string-literal"><span class="token string">&quot;Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 闭包作为函数参数</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">calculate</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> a<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> b<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> operation<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token function">operation</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span> <span class="token keyword">in</span></span>
<span class="line">    <span class="token keyword">return</span> x <span class="token operator">+</span> y</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 尾随闭包</span></span>
<span class="line"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Chris&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Alex&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Ewa&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Barry&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Daniella&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> reversedNames <span class="token operator">=</span> names<span class="token punctuation">.</span>sorted <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">&gt;</span> <span class="token short-argument">$1</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 简化尾随闭包</span></span>
<span class="line"><span class="token keyword">let</span> mappedNumbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>map <span class="token punctuation">{</span> <span class="token short-argument">$0</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-面向对象编程" tabindex="-1"><a class="header-anchor" href="#_3-面向对象编程"><span>3. 面向对象编程</span></a></h2><h3 id="q7-swift的类和结构体" tabindex="-1"><a class="header-anchor" href="#q7-swift的类和结构体"><span>Q7: Swift的类和结构体？</span></a></h3><p><strong>答：</strong> Swift中的类和结构体都是用于创建自定义数据类型的机制。</p><p><strong>类的定义</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> age<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">introduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;我是</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">，今年</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">age</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">岁&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;张三&quot;</span></span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">)</span></span>
<span class="line">person<span class="token punctuation">.</span><span class="token function">introduce</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>结构体的定义</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> x<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    <span class="token keyword">var</span> y<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">distance</span><span class="token punctuation">(</span>from other<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> dx <span class="token operator">=</span> x <span class="token operator">-</span> other<span class="token punctuation">.</span>x</span>
<span class="line">        <span class="token keyword">let</span> dy <span class="token operator">=</span> y <span class="token operator">-</span> other<span class="token punctuation">.</span>y</span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>dx <span class="token operator">*</span> dx <span class="token operator">+</span> dy <span class="token operator">*</span> dy<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> point1 <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">let</span> point2 <span class="token operator">=</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>point1<span class="token punctuation">.</span><span class="token function">distance</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> point2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 输出: 5.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>类和结构体的区别</strong>：</p><ol><li><strong>继承</strong>：类可以继承，结构体不能</li><li><strong>类型</strong>：类是引用类型，结构体是值类型</li><li><strong>析构器</strong>：类可以定义析构器，结构体不能</li><li><strong>引用计数</strong>：类使用引用计数，结构体不使用</li></ol><h3 id="q8-swift的协议-protocol" tabindex="-1"><a class="header-anchor" href="#q8-swift的协议-protocol"><span>Q8: Swift的协议（Protocol）？</span></a></h3><p><strong>答：</strong> 协议定义了一个蓝图，规定了符合协议的类型必须实现的属性、方法和其他要求。</p><p><strong>协议定义</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> lineWidth<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">set</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Resizable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">resize</span><span class="token punctuation">(</span>to scale<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 符合多个协议</span></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">Rectangle</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span><span class="token punctuation">,</span> <span class="token class-name">Resizable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> lineWidth<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token operator">=</span> <span class="token number">1.0</span></span>
<span class="line">    <span class="token keyword">var</span> width<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    <span class="token keyword">var</span> height<span class="token punctuation">:</span> <span class="token class-name">Double</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;绘制矩形，线宽: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">lineWidth</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">resize</span><span class="token punctuation">(</span>to scale<span class="token punctuation">:</span> <span class="token class-name">Double</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        width <span class="token operator">*=</span> scale</span>
<span class="line">        height <span class="token operator">*=</span> scale</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>协议继承</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Shape</span><span class="token punctuation">:</span> <span class="token class-name">Drawable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> area<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">Renderable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 协议继承</span></span>
<span class="line"><span class="token keyword">protocol</span> <span class="token class-name">RenderableShape</span><span class="token punctuation">:</span> <span class="token class-name">Shape</span><span class="token punctuation">,</span> <span class="token class-name">Renderable</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 继承了Shape和Renderable的所有要求</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q9-swift的枚举" tabindex="-1"><a class="header-anchor" href="#q9-swift的枚举"><span>Q9: Swift的枚举？</span></a></h3><p><strong>答：</strong> Swift的枚举为一组相关的值定义了一个通用类型。</p><p><strong>基本枚举</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">CompassPoint</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> north</span>
<span class="line">    <span class="token keyword">case</span> south</span>
<span class="line">    <span class="token keyword">case</span> east</span>
<span class="line">    <span class="token keyword">case</span> west</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> direction <span class="token operator">=</span> <span class="token class-name">CompassPoint</span><span class="token punctuation">.</span>north</span>
<span class="line">direction <span class="token operator">=</span> <span class="token punctuation">.</span>south <span class="token comment">// 类型已知时可以省略枚举名</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Switch语句匹配枚举</span></span>
<span class="line"><span class="token keyword">switch</span> direction <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span>north<span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;向北&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span>south<span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;向南&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span>east<span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;向东&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span>west<span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;向西&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>关联值</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">Barcode</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token function">upc</span><span class="token punctuation">(</span><span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">,</span> <span class="token class-name">Int</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> <span class="token function">qrCode</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> productBarcode <span class="token operator">=</span> <span class="token class-name">Barcode</span><span class="token punctuation">.</span><span class="token function">upc</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">85909</span><span class="token punctuation">,</span> <span class="token number">51226</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span></span>
<span class="line">productBarcode <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">qrCode</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;ABCDEFGHIJKLMNOP&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">switch</span> productBarcode <span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">upc</span><span class="token punctuation">(</span><span class="token keyword">let</span> numberSystem<span class="token punctuation">,</span> <span class="token keyword">let</span> manufacturer<span class="token punctuation">,</span> <span class="token keyword">let</span> product<span class="token punctuation">,</span> <span class="token keyword">let</span> check<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;UPC: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numberSystem</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">manufacturer</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">product</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">check</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">qrCode</span><span class="token punctuation">(</span><span class="token keyword">let</span> productCode<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;QR code: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">productCode</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>原始值</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">Planet</span><span class="token punctuation">:</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> mercury <span class="token operator">=</span> <span class="token number">1</span></span>
<span class="line">    <span class="token keyword">case</span> venus</span>
<span class="line">    <span class="token keyword">case</span> earth</span>
<span class="line">    <span class="token keyword">case</span> mars</span>
<span class="line">    <span class="token keyword">case</span> jupiter</span>
<span class="line">    <span class="token keyword">case</span> saturn</span>
<span class="line">    <span class="token keyword">case</span> uranus</span>
<span class="line">    <span class="token keyword">case</span> neptune</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> earth <span class="token operator">=</span> <span class="token class-name">Planet</span><span class="token punctuation">.</span>earth</span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span>earth<span class="token punctuation">.</span>rawValue<span class="token punctuation">)</span> <span class="token comment">// 输出: 3</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 通过原始值创建枚举实例</span></span>
<span class="line"><span class="token keyword">let</span> possiblePlanet <span class="token operator">=</span> <span class="token class-name">Planet</span><span class="token punctuation">(</span>rawValue<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// possiblePlanet是Planet?类型，可能是nil</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-高级特性" tabindex="-1"><a class="header-anchor" href="#_4-高级特性"><span>4. 高级特性</span></a></h2><h3 id="q10-swift的可选类型-optionals" tabindex="-1"><a class="header-anchor" href="#q10-swift的可选类型-optionals"><span>Q10: Swift的可选类型（Optionals）？</span></a></h3><p><strong>答：</strong> 可选类型是Swift中处理值可能不存在的情况的安全机制。</p><p><strong>可选类型的声明和使用</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 可选类型声明</span></span>
<span class="line"><span class="token keyword">var</span> optionalString<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;Hello&quot;</span></span></span>
<span class="line">optionalString <span class="token operator">=</span> <span class="token nil constant">nil</span> <span class="token comment">// 可以赋值为nil</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> optionalInt<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token number">42</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 强制解包（不安全）</span></span>
<span class="line"><span class="token keyword">if</span> optionalString <span class="token operator">!=</span> <span class="token nil constant">nil</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span>optionalString<span class="token operator">!</span><span class="token punctuation">)</span> <span class="token comment">// 使用感叹号强制解包</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可选绑定（安全）</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> unwrappedString <span class="token operator">=</span> optionalString <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span>unwrappedString<span class="token punctuation">)</span> <span class="token comment">// 在if块内unwrappedString是非可选的</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 可选链</span></span>
<span class="line"><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;John&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Paul&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;George&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Ringo&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">let</span> count <span class="token operator">=</span> names<span class="token punctuation">.</span>first<span class="token operator">?</span><span class="token punctuation">.</span>count <span class="token comment">// 返回Int?</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 空合并运算符</span></span>
<span class="line"><span class="token keyword">let</span> defaultName <span class="token operator">=</span> optionalString <span class="token operator">??</span> <span class="token string-literal"><span class="token string">&quot;Unknown&quot;</span></span> <span class="token comment">// 如果optionalString为nil，则使用&quot;Unknown&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>guard语句处理可选类型</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;姓名不存在&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> location <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;location&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;你好，</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;你好，</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">，欢迎来自</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">location</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q11-swift的扩展-extensions" tabindex="-1"><a class="header-anchor" href="#q11-swift的扩展-extensions"><span>Q11: Swift的扩展（Extensions）？</span></a></h3><p><strong>答：</strong> 扩展可以为已有的类、结构体、枚举或协议类型添加新功能。</p><p><strong>扩展示例</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 为Double类型添加计算属性</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> km<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">self</span> <span class="token operator">*</span> <span class="token number">1000.0</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">var</span> m<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">self</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">var</span> cm<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">self</span> <span class="token operator">/</span> <span class="token number">100.0</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">var</span> mm<span class="token punctuation">:</span> <span class="token class-name">Double</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">self</span> <span class="token operator">/</span> <span class="token number">1000.0</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> oneInch <span class="token operator">=</span> <span class="token number">25.4</span><span class="token punctuation">.</span>mm</span>
<span class="line"><span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;One inch is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">oneInch</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> meters&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// 输出: One inch is 0.0254 meters</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 为现有类型添加方法</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">Int</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">repetitions</span><span class="token punctuation">(</span>task<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span><span class="token keyword">self</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token number">3</span><span class="token punctuation">.</span>repetitions <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello!&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 为现有类型添加便利构造器</span></span>
<span class="line"><span class="token keyword">extension</span> <span class="token class-name">Rect</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>center<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> <span class="token class-name">Size</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> originX <span class="token operator">=</span> center<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token punctuation">(</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">let</span> originY <span class="token operator">=</span> center<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token punctuation">(</span>size<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>origin<span class="token punctuation">:</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> originX<span class="token punctuation">,</span> y<span class="token punctuation">:</span> originY<span class="token punctuation">)</span><span class="token punctuation">,</span> size<span class="token punctuation">:</span> size<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q12-swift的泛型" tabindex="-1"><a class="header-anchor" href="#q12-swift的泛型"><span>Q12: Swift的泛型？</span></a></h3><p><strong>答：</strong> 泛型允许你编写灵活且可重用的函数和类型，可以处理任何类型。</p><p><strong>泛型函数</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">func</span> <span class="token function-definition function">swapTwoValues</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> a<span class="token punctuation">:</span> <span class="token keyword">inout</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span> b<span class="token punctuation">:</span> <span class="token keyword">inout</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> temporaryA <span class="token operator">=</span> a</span>
<span class="line">    a <span class="token operator">=</span> b</span>
<span class="line">    b <span class="token operator">=</span> temporaryA</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> someInt <span class="token operator">=</span> <span class="token number">3</span></span>
<span class="line"><span class="token keyword">var</span> anotherInt <span class="token operator">=</span> <span class="token number">107</span></span>
<span class="line"><span class="token function">swapTwoValues</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>someInt<span class="token punctuation">,</span> <span class="token operator">&amp;</span>anotherInt<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// someInt现在是107，anotherInt现在是3</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> someString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;hello&quot;</span></span></span>
<span class="line"><span class="token keyword">var</span> anotherString <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;world&quot;</span></span></span>
<span class="line"><span class="token function">swapTwoValues</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>someString<span class="token punctuation">,</span> <span class="token operator">&amp;</span>anotherString<span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// someString现在是&quot;world&quot;，anotherString现在是&quot;hello&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>泛型类型</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">struct</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token class-name">Element</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Element</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">push</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> item<span class="token punctuation">:</span> <span class="token class-name">Element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        items<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Element</span><span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> items<span class="token punctuation">.</span><span class="token function">popLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> stackOfStrings <span class="token operator">=</span> <span class="token class-name">Stack</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">stackOfStrings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;uno&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">stackOfStrings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;dos&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">stackOfStrings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;tres&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">stackOfStrings<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;cuatro&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> <span class="token keyword">let</span> poppedString <span class="token operator">=</span> stackOfStrings<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;弹出的元素是：</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">poppedString</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span> <span class="token comment">// 输出: 弹出的元素是：cuatro</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>泛型约束</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 约束泛型类型必须符合Equatable协议</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">findIndex</span><span class="token operator">&lt;</span><span class="token class-name">T</span><span class="token punctuation">:</span> <span class="token class-name">Equatable</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>of valueToFind<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">,</span> <span class="token keyword">in</span> array<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Int</span><span class="token operator">?</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token keyword">in</span> array<span class="token punctuation">.</span><span class="token function">enumerated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> value <span class="token operator">==</span> valueToFind <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> index</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token nil constant">nil</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> doubleIndex <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token number">9.3</span><span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3.14159</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// doubleIndex是nil，因为在数组中没有找到9.3</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> stringIndex <span class="token operator">=</span> <span class="token function">findIndex</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Andrea&quot;</span></span><span class="token punctuation">,</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Mike&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Malcolm&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Andrea&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// stringIndex是2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-swift内存管理" tabindex="-1"><a class="header-anchor" href="#_5-swift内存管理"><span>5. Swift内存管理</span></a></h2><h3 id="q13-swift的自动引用计数-arc" tabindex="-1"><a class="header-anchor" href="#q13-swift的自动引用计数-arc"><span>Q13: Swift的自动引用计数（ARC）？</span></a></h3><p><strong>答：</strong> Swift使用自动引用计数（Automatic Reference Counting, ARC）来跟踪和管理应用的内存使用。</p><p><strong>ARC工作原理</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being initialized&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> reference1<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span></span>
<span class="line"><span class="token keyword">var</span> reference2<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span></span>
<span class="line"><span class="token keyword">var</span> reference3<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">reference1 <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;John Appleseed&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 输出: John Appleseed is being initialized</span></span>
<span class="line"></span>
<span class="line">reference2 <span class="token operator">=</span> reference1</span>
<span class="line">reference3 <span class="token operator">=</span> reference1</span>
<span class="line"></span>
<span class="line">reference1 <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line">reference2 <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line"><span class="token comment">// 此时不会调用析构器，因为reference3仍然强引用着实例</span></span>
<span class="line"></span>
<span class="line">reference3 <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line"><span class="token comment">// 输出: John Appleseed is being deinitialized</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>循环强引用问题</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> apartment<span class="token punctuation">:</span> <span class="token class-name">Apartment</span><span class="token operator">?</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Apartment</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> unit<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> tenant<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>unit<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> unit <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Apartment </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">unit</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> john<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span></span>
<span class="line"><span class="token keyword">var</span> unit4A<span class="token punctuation">:</span> <span class="token class-name">Apartment</span><span class="token operator">?</span></span>
<span class="line"></span>
<span class="line">john <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;John&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">unit4A <span class="token operator">=</span> <span class="token class-name">Apartment</span><span class="token punctuation">(</span>unit<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;4A&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">john<span class="token operator">!</span><span class="token punctuation">.</span>apartment <span class="token operator">=</span> unit4A</span>
<span class="line">unit4A<span class="token operator">!</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> john</span>
<span class="line"></span>
<span class="line">john <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line">unit4A <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line"><span class="token comment">// 两者都不会被释放，因为存在循环强引用</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>解决循环强引用</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 弱引用解决循环强引用</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Apartment</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> unit<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">weak</span> <span class="token keyword">var</span> tenant<span class="token punctuation">:</span> <span class="token class-name">Person</span><span class="token operator">?</span> <span class="token comment">// 使用weak关键字</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>unit<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>unit <span class="token operator">=</span> unit <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Apartment </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">unit</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 无主引用解决循环强引用</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span></span>
<span class="line">    <span class="token keyword">var</span> card<span class="token punctuation">:</span> <span class="token class-name">CreditCard</span><span class="token operator">!</span></span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">CreditCard</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> number<span class="token punctuation">:</span> <span class="token class-name">UInt64</span></span>
<span class="line">    <span class="token keyword">unowned</span> <span class="token keyword">let</span> customer<span class="token punctuation">:</span> <span class="token class-name">Customer</span> <span class="token comment">// 使用unowned关键字</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">init</span><span class="token punctuation">(</span>number<span class="token punctuation">:</span> <span class="token class-name">UInt64</span><span class="token punctuation">,</span> customer<span class="token punctuation">:</span> <span class="token class-name">Customer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>number <span class="token operator">=</span> number</span>
<span class="line">        <span class="token keyword">self</span><span class="token punctuation">.</span>customer <span class="token operator">=</span> customer</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">deinit</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Card #</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">number</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is being deinitialized&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q14-swift的错误处理" tabindex="-1"><a class="header-anchor" href="#q14-swift的错误处理"><span>Q14: Swift的错误处理？</span></a></h3><p><strong>答：</strong> Swift提供了一套完整的错误处理机制。</p><p><strong>定义和抛出错误</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">enum</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">:</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">case</span> invalidSelection</span>
<span class="line">    <span class="token keyword">case</span> <span class="token function">insufficientFunds</span><span class="token punctuation">(</span>coinsNeeded<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">case</span> outOfStock</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">struct</span> <span class="token class-name">Item</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> price<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line">    <span class="token keyword">var</span> count<span class="token punctuation">:</span> <span class="token class-name">Int</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">VendingMachine</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">var</span> inventory <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string-literal"><span class="token string">&quot;Candy Bar&quot;</span></span><span class="token punctuation">:</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>price<span class="token punctuation">:</span> <span class="token number">12</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-literal"><span class="token string">&quot;Chips&quot;</span></span><span class="token punctuation">:</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>price<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-literal"><span class="token string">&quot;Pretzels&quot;</span></span><span class="token punctuation">:</span> <span class="token class-name">Item</span><span class="token punctuation">(</span>price<span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">var</span> coinsDeposited <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">vend</span><span class="token punctuation">(</span>itemNamed name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">guard</span> <span class="token keyword">let</span> item <span class="token operator">=</span> inventory<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span>invalidSelection</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">guard</span> item<span class="token punctuation">.</span>count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span>outOfStock</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">guard</span> item<span class="token punctuation">.</span>price <span class="token operator">&lt;=</span> coinsDeposited <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span><span class="token function">insufficientFunds</span><span class="token punctuation">(</span>coinsNeeded<span class="token punctuation">:</span> item<span class="token punctuation">.</span>price <span class="token operator">-</span> coinsDeposited<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        coinsDeposited <span class="token operator">-=</span> item<span class="token punctuation">.</span>price</span>
<span class="line">        inventory<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">.</span>count <span class="token operator">-=</span> <span class="token number">1</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Dispensing </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>捕获和处理错误</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">let</span> favoriteSnacks <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Alice&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Chips&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Bob&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Licorice&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-literal"><span class="token string">&quot;Eve&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Pretzels&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">buyFavoriteSnack</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> vendingMachine<span class="token punctuation">:</span> <span class="token class-name">VendingMachine</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> snackName <span class="token operator">=</span> favoriteSnacks<span class="token punctuation">[</span>person<span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string-literal"><span class="token string">&quot;Candy Bar&quot;</span></span></span>
<span class="line">    <span class="token keyword">try</span> vendingMachine<span class="token punctuation">.</span><span class="token function">vend</span><span class="token punctuation">(</span>itemNamed<span class="token punctuation">:</span> snackName<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> vendingMachine <span class="token operator">=</span> <span class="token class-name">VendingMachine</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">vendingMachine<span class="token punctuation">.</span>coinsDeposited <span class="token operator">=</span> <span class="token number">8</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">try</span> <span class="token function">buyFavoriteSnack</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Alice&quot;</span></span><span class="token punctuation">,</span> vendingMachine<span class="token punctuation">:</span> vendingMachine<span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Success! Yum.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span>invalidSelection <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Invalid Selection.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span>outOfStock <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Out of Stock.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token class-name">VendingMachineError</span><span class="token punctuation">.</span><span class="token function">insufficientFunds</span><span class="token punctuation">(</span><span class="token keyword">let</span> coinsNeeded<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Insufficient funds. Please insert an additional </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">coinsNeeded</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> coins.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Unexpected error: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-swift并发编程" tabindex="-1"><a class="header-anchor" href="#_6-swift并发编程"><span>6. Swift并发编程</span></a></h2><h3 id="q15-swift的并发编程-async-await" tabindex="-1"><a class="header-anchor" href="#q15-swift的并发编程-async-await"><span>Q15: Swift的并发编程（async/await）？</span></a></h3><p><strong>答：</strong> Swift 5.5引入了现代并发模型，包括async/await、actors等特性。</p><p><strong>异步函数</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 异步函数定义</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">fetchAvatar</span> imageURL<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">UIImage</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> imageURL<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">guard</span> <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> data<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token class-name">ImageError</span><span class="token punctuation">.</span>invalidData</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> image</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 调用异步函数</span></span>
<span class="line"><span class="token class-name">Task</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> avatar <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">fetchAvatar</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">:</span> url<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 更新UI</span></span>
<span class="line">        <span class="token class-name">DispatchQueue</span><span class="token punctuation">.</span>main<span class="token punctuation">.</span><span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">            imageView<span class="token punctuation">.</span>image <span class="token operator">=</span> avatar</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to load avatar: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>结构化并发</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 并发执行多个任务</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">fetchMultipleImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">let</span> image1 <span class="token operator">=</span> <span class="token function">fetchAvatar</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">:</span> url1<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">let</span> image2 <span class="token operator">=</span> <span class="token function">fetchAvatar</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">:</span> url2<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">let</span> image3 <span class="token operator">=</span> <span class="token function">fetchAvatar</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">:</span> url3<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> images <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token punctuation">[</span>image1<span class="token punctuation">,</span> image2<span class="token punctuation">,</span> image3<span class="token punctuation">]</span></span>
<span class="line">        <span class="token comment">// 所有图片都加载完成后执行</span></span>
<span class="line">        <span class="token function">updateUI</span><span class="token punctuation">(</span>with<span class="token punctuation">:</span> images<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to fetch images: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 任务组</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function-definition function">fetchImagesConcurrently</span><span class="token punctuation">(</span>urls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">URL</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token punctuation">[</span><span class="token class-name">UIImage</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">withThrowingTaskGroup</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token class-name">UIImage</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> group <span class="token keyword">in</span></span>
<span class="line">        <span class="token keyword">for</span> url <span class="token keyword">in</span> urls <span class="token punctuation">{</span></span>
<span class="line">            group<span class="token punctuation">.</span>addTask <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">fetchAvatar</span><span class="token punctuation">(</span>imageURL<span class="token punctuation">:</span> url<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">var</span> images<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">UIImage</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token keyword">try</span> <span class="token keyword">await</span> image <span class="token keyword">in</span> group <span class="token punctuation">{</span></span>
<span class="line">            images<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> images</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q16-swift的actor模型" tabindex="-1"><a class="header-anchor" href="#q16-swift的actor模型"><span>Q16: Swift的Actor模型？</span></a></h3><p><strong>答：</strong> Actor是Swift并发模型中的一个重要概念，用于保护可变状态免受数据竞争的影响。</p><p><strong>Actor定义</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">actor</span> <span class="token class-name">ImageDownloader</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> cache<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">URL</span><span class="token punctuation">:</span> <span class="token class-name">UIImage</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">downloadImage</span><span class="token punctuation">(</span>from url<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token operator">-&gt;</span> <span class="token class-name">UIImage</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 检查缓存</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token keyword">let</span> cachedImage <span class="token operator">=</span> cache<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> cachedImage</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 下载图片</span></span>
<span class="line">        <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> url<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">guard</span> <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token class-name">UIImage</span><span class="token punctuation">(</span>data<span class="token punctuation">:</span> data<span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token class-name">ImageError</span><span class="token punctuation">.</span>invalidData</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 缓存图片</span></span>
<span class="line">        cache<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token operator">=</span> image</span>
<span class="line">        <span class="token keyword">return</span> image</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">clearCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        cache<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 使用Actor</span></span>
<span class="line"><span class="token keyword">let</span> downloader <span class="token operator">=</span> <span class="token class-name">ImageDownloader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">Task</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> downloader<span class="token punctuation">.</span><span class="token function">downloadImage</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> imageURL<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 使用图片</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to download image: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>全局Actor</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// 主Actor，用于UI更新</span></span>
<span class="line"><span class="token attribute atrule">@MainActor</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">ViewModel</span><span class="token punctuation">:</span> <span class="token class-name">ObservableObject</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token attribute atrule">@Published</span> <span class="token keyword">var</span> imageData<span class="token punctuation">:</span> <span class="token class-name">Data</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">loadImage</span><span class="token punctuation">(</span>from url<span class="token punctuation">:</span> <span class="token constant">URL</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">do</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> <span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token omit keyword">_</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token class-name">URLSession</span><span class="token punctuation">.</span>shared<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> url<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment">// 自动在主线程更新</span></span>
<span class="line">            <span class="token keyword">self</span><span class="token punctuation">.</span>imageData <span class="token operator">=</span> data</span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Failed to load image: </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">error</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-swift生态系统" tabindex="-1"><a class="header-anchor" href="#_7-swift生态系统"><span>7. Swift生态系统</span></a></h2><h3 id="q17-swift包管理器-swift-package-manager" tabindex="-1"><a class="header-anchor" href="#q17-swift包管理器-swift-package-manager"><span>Q17: Swift包管理器（Swift Package Manager）？</span></a></h3><p><strong>答：</strong> Swift Package Manager是Swift的官方依赖管理工具。</p><p><strong>Package.swift文件示例</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token comment">// swift-tools-version:5.5</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token class-name">PackageDescription</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> package <span class="token operator">=</span> <span class="token class-name">Package</span><span class="token punctuation">(</span></span>
<span class="line">    name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;MyLibrary&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">    platforms<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">macOS</span><span class="token punctuation">(</span><span class="token punctuation">.</span>v10_15<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">iOS</span><span class="token punctuation">(</span><span class="token punctuation">.</span>v13<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    products<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">library</span><span class="token punctuation">(</span></span>
<span class="line">            name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;MyLibrary&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">            targets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;MyLibrary&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">package</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://github.com/apple/swift-algorithms&quot;</span></span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;1.0.0&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">package</span><span class="token punctuation">(</span>url<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;https://github.com/vapor/vapor.git&quot;</span></span><span class="token punctuation">,</span> from<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;4.0.0&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    targets<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">target</span><span class="token punctuation">(</span></span>
<span class="line">            name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;MyLibrary&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">            dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">product</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Algorithms&quot;</span></span><span class="token punctuation">,</span> package<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;swift-algorithms&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">testTarget</span><span class="token punctuation">(</span></span>
<span class="line">            name<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;MyLibraryTests&quot;</span></span><span class="token punctuation">,</span></span>
<span class="line">            dependencies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;MyLibrary&quot;</span></span><span class="token punctuation">]</span></span>
<span class="line">        <span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>常用命令</strong>：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token comment"># 创建新包</span></span>
<span class="line">swift package init</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 创建可执行包</span></span>
<span class="line">swift package init <span class="token parameter variable">--type</span> executable</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 解析和下载依赖</span></span>
<span class="line">swift package resolve</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 构建项目</span></span>
<span class="line">swift build</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 运行项目</span></span>
<span class="line">swift run</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 运行测试</span></span>
<span class="line">swift <span class="token builtin class-name">test</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 生成Xcode项目</span></span>
<span class="line">swift package generate-xcodeproj</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q18-swift测试框架" tabindex="-1"><a class="header-anchor" href="#q18-swift测试框架"><span>Q18: Swift测试框架？</span></a></h3><p><strong>答：</strong> Swift使用XCTest作为官方测试框架。</p><p><strong>单元测试示例</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token class-name">XCTest</span></span>
<span class="line"><span class="token attribute atrule">@testable</span> <span class="token keyword">import</span> <span class="token class-name">MyApp</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MathTests</span><span class="token punctuation">:</span> <span class="token class-name">XCTestCase</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">testAddition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">XCTAssertEqual</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;2 + 3 should equal 5&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">testSubtraction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">XCTAssertEqual</span><span class="token punctuation">(</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;5 - 3 should equal 2&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">testDivisionByZero</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">XCTAssertThrowsError</span><span class="token punctuation">(</span><span class="token keyword">try</span> <span class="token function">divide</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> error <span class="token keyword">in</span></span>
<span class="line">            <span class="token class-name">XCTAssertTrue</span><span class="token punctuation">(</span>error <span class="token keyword">is</span> <span class="token class-name">MathError</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 性能测试</span></span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">testPerformanceExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        measure <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// 要测量性能的代码</span></span>
<span class="line">            <span class="token keyword">for</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span><span class="token number">1000000</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token omit keyword">_</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 设置和清理</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// 每个测试方法执行前调用</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 每个测试方法执行后调用</span></span>
<span class="line">        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">tearDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>异步测试</strong>：</p><div class="language-swift line-numbers-mode" data-highlighter="prismjs" data-ext="swift"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">AsyncNetworkTests</span><span class="token punctuation">:</span> <span class="token class-name">XCTestCase</span> <span class="token punctuation">{</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">func</span> <span class="token function-definition function">testFetchUserData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token keyword">throws</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> expectation <span class="token operator">=</span> <span class="token class-name">XCTestExpectation</span><span class="token punctuation">(</span>description<span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Fetch user data&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token class-name">Task</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">try</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>id<span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token class-name">XCTAssertEqual</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;John Doe&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">            expectation<span class="token punctuation">.</span><span class="token function">fulfill</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token keyword">await</span> <span class="token function">fulfillment</span><span class="token punctuation">(</span>of<span class="token punctuation">:</span> <span class="token punctuation">[</span>expectation<span class="token punctuation">]</span><span class="token punctuation">,</span> timeout<span class="token punctuation">:</span> <span class="token number">5.0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script src="/wiki/assets/js/runtime~app.46b38a58.js" defer></script><script src="/wiki/assets/js/768.e6d4205d.js" defer></script><script src="/wiki/assets/js/app.6ec2591a.js" defer></script>
  </body>
</html>
