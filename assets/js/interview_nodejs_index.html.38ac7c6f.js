"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[760],{501:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>e,data:()=>l});var p=a(641);const t={},e=(0,a(262).A)(t,[["render",function(n,s){return(0,p.uX)(),(0,p.CE)("div",null,[...s[0]||(s[0]=[(0,p.Fv)('<h1 id="node-js-面试题" tabindex="-1"><a class="header-anchor" href="#node-js-面试题"><span>Node.js 面试题</span></a></h1><h2 id="_1-node-js基础" tabindex="-1"><a class="header-anchor" href="#_1-node-js基础"><span>1. Node.js基础</span></a></h2><h3 id="q1-什么是node-js-它有什么特点" tabindex="-1"><a class="header-anchor" href="#q1-什么是node-js-它有什么特点"><span>Q1: 什么是Node.js？它有什么特点？</span></a></h3><p><strong>答：</strong> Node.js是一个基于Chrome V8引擎的JavaScript运行环境，用于构建快速、可扩展的网络应用。</p><p>特点：</p><ul><li><strong>单线程</strong>：使用单线程事件循环模型处理请求</li><li><strong>非阻塞I/O</strong>：异步I/O操作，提高并发处理能力</li><li><strong>事件驱动</strong>：基于事件驱动的编程模型</li><li><strong>跨平台</strong>：支持Windows、Linux、macOS等操作系统</li><li><strong>高性能</strong>：V8引擎提供高性能的JavaScript执行环境</li><li><strong>npm生态</strong>：拥有庞大的第三方模块生态系统</li></ul><h3 id="q2-node-js的事件循环机制" tabindex="-1"><a class="header-anchor" href="#q2-node-js的事件循环机制"><span>Q2: Node.js的事件循环机制？</span></a></h3><p><strong>答：</strong> Node.js的事件循环是单线程的，但它通过事件循环和线程池实现了非阻塞I/O操作。</p><p>事件循环的六个阶段：</p><ol><li><strong>timers阶段</strong>：执行setTimeout()和setInterval()的回调</li><li><strong>pending callbacks阶段</strong>：执行系统操作的回调</li><li><strong>idle, prepare阶段</strong>：仅内部使用</li><li><strong>poll阶段</strong>：检索新的I/O事件，执行I/O回调</li><li><strong>check阶段</strong>：执行setImmediate()的回调</li><li><strong>close callbacks阶段</strong>：执行关闭事件的回调</li></ol><h3 id="q3-node-js为什么适合i-o密集型应用" tabindex="-1"><a class="header-anchor" href="#q3-node-js为什么适合i-o密集型应用"><span>Q3: Node.js为什么适合I/O密集型应用？</span></a></h3><p><strong>答：</strong> Node.js适合I/O密集型应用的原因：</p><ol><li><strong>非阻塞I/O模型</strong>：当执行I/O操作时，不会阻塞线程，可以继续处理其他请求</li><li><strong>事件驱动</strong>：通过事件循环机制高效处理并发请求</li><li><strong>轻量级</strong>：相比多线程模型，内存占用更少</li><li><strong>高并发</strong>：能够同时处理大量连接</li></ol><p>相比之下，CPU密集型任务会占用事件循环，影响整体性能。</p><h2 id="_2-模块系统" tabindex="-1"><a class="header-anchor" href="#_2-模块系统"><span>2. 模块系统</span></a></h2><h3 id="q4-node-js的模块系统有哪些类型" tabindex="-1"><a class="header-anchor" href="#q4-node-js的模块系统有哪些类型"><span>Q4: Node.js的模块系统有哪些类型？</span></a></h3><p><strong>答：</strong> Node.js的模块系统包括：</p><ol><li><strong>核心模块</strong>：Node.js内置模块，如fs、http、path等</li><li><strong>第三方模块</strong>：通过npm安装的模块</li><li><strong>自定义模块</strong>：开发者自己编写的模块</li></ol><p>模块加载机制：</p><ul><li>核心模块优先级最高</li><li>使用require()加载模块</li><li>模块会被缓存，多次加载返回同一对象</li></ul><h3 id="q5-commonjs和es-module的区别" tabindex="-1"><a class="header-anchor" href="#q5-commonjs和es-module的区别"><span>Q5: CommonJS和ES Module的区别？</span></a></h3><p><strong>答：</strong></p><table><thead><tr><th>特性</th><th>CommonJS</th><th>ES Module</th></tr></thead><tbody><tr><td>加载方式</td><td>运行时加载</td><td>编译时加载</td></tr><tr><td>导出方式</td><td>module.exports</td><td>export/import</td></tr><tr><td>导入方式</td><td>require()</td><td>import</td></tr><tr><td>this指向</td><td>当前模块</td><td>undefined</td></tr><tr><td>文件扩展名</td><td>.js</td><td>.mjs 或 package.json中type:&quot;module&quot;</td></tr><tr><td>循环依赖</td><td>可以处理</td><td>可能报错</td></tr></tbody></table><h3 id="q6-module-exports和exports的区别" tabindex="-1"><a class="header-anchor" href="#q6-module-exports和exports的区别"><span>Q6: module.exports和exports的区别？</span></a></h3><p><strong>答：</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// exports是指向module.exports的引用</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>exports <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 正确的导出方式</span></span>\n<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Node.js&#39;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 错误的导出方式（会破坏引用关系）</span></span>\n<span class="line">exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Node.js&#39;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 正确的导出方式</span></span>\n<span class="line">exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;Node.js&#39;</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意事项：</p><ul><li>不能直接给exports赋值</li><li>module.exports可以赋值任意类型</li><li>exports只能添加属性</li></ul><h2 id="_3-异步编程" tabindex="-1"><a class="header-anchor" href="#_3-异步编程"><span>3. 异步编程</span></a></h2><h3 id="q7-回调函数、promise、async-await的区别" tabindex="-1"><a class="header-anchor" href="#q7-回调函数、promise、async-await的区别"><span>Q7: 回调函数、Promise、async/await的区别？</span></a></h3><p><strong>答：</strong></p><p><strong>回调函数：</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Promise：</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>async/await：</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span>promises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>区别：</p><ul><li>回调函数容易产生回调地狱</li><li>Promise解决了回调地狱问题，但链式调用不够直观</li><li>async/await语法更接近同步代码，易于理解和维护</li></ul><h3 id="q8-promise的状态有哪些" tabindex="-1"><a class="header-anchor" href="#q8-promise的状态有哪些"><span>Q8: Promise的状态有哪些？</span></a></h3><p><strong>答：</strong> Promise有三种状态：</p><ol><li><strong>Pending（待定）</strong>：初始状态，既没有被兑现，也没有被拒绝</li><li><strong>Fulfilled（已兑现）</strong>：操作成功完成</li><li><strong>Rejected（已拒绝）</strong>：操作失败</li></ol><p>状态转换：</p><ul><li>Pending → Fulfilled（resolve）</li><li>Pending → Rejected（reject）</li><li>状态一旦改变就不能再变</li></ul><h3 id="q9-如何处理promise的错误" tabindex="-1"><a class="header-anchor" href="#q9-如何处理promise的错误"><span>Q9: 如何处理Promise的错误？</span></a></h3><p><strong>答：</strong> 处理Promise错误的方式：</p><ol><li><strong>使用.catch()方法</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">promise</span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>使用async/await配合try/catch</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handlePromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> promise<span class="token punctuation">;</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>Promise链中的错误处理</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">promise</span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;Something went wrong&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token string">&#39;default value&#39;</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-文件系统和流" tabindex="-1"><a class="header-anchor" href="#_4-文件系统和流"><span>4. 文件系统和流</span></a></h2><h3 id="q10-node-js中fs模块的常用方法" tabindex="-1"><a class="header-anchor" href="#q10-node-js中fs模块的常用方法"><span>Q10: Node.js中fs模块的常用方法？</span></a></h3><p><strong>答：</strong> fs模块的常用方法：</p><p><strong>同步方法：</strong></p><ul><li>fs.readFileSync()</li><li>fs.writeFileSync()</li><li>fs.readdirSync()</li><li>fs.statSync()</li></ul><p><strong>异步方法：</strong></p><ul><li>fs.readFile()</li><li>fs.writeFile()</li><li>fs.readdir()</li><li>fs.stat()</li></ul><p><strong>Promise版本：</strong></p><ul><li>fs.promises.readFile()</li><li>fs.promises.writeFile()</li><li>fs.promises.readdir()</li><li>fs.promises.stat()</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 异步读取文件</span></span>\n<span class="line">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 同步读取文件</span></span>\n<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">const</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;file.txt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;utf8&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q11-什么是stream-有哪些类型" tabindex="-1"><a class="header-anchor" href="#q11-什么是stream-有哪些类型"><span>Q11: 什么是Stream？有哪些类型？</span></a></h3><p><strong>答：</strong> Stream是Node.js中处理流式数据的抽象接口。</p><p>四种基本类型：</p><ol><li><strong>Readable</strong>：可读流（fs.createReadStream）</li><li><strong>Writable</strong>：可写流（fs.createWriteStream）</li><li><strong>Duplex</strong>：可读可写流（net.Socket）</li><li><strong>Transform</strong>：转换流（zlib.createGzip）</li></ol><p>Stream的优点：</p><ul><li>内存效率高：不需要将所有数据加载到内存中</li><li>时间效率高：可以边处理边传输</li><li>支持管道操作：可以链式处理数据</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;fs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 管道操作</span></span>\n<span class="line">fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&#39;input.txt&#39;</span><span class="token punctuation">)</span></span>\n<span class="line">  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&#39;output.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q12-buffer的作用是什么" tabindex="-1"><a class="header-anchor" href="#q12-buffer的作用是什么"><span>Q12: Buffer的作用是什么？</span></a></h3><p><strong>答：</strong> Buffer是Node.js用来处理二进制数据的类。</p><p>作用：</p><ul><li>处理TCP流或文件系统操作中的字节流</li><li>存储原始数据</li><li>在不同编码之间转换数据</li></ul><p>特点：</p><ul><li>Buffer是Uint8Array的子类</li><li>大小固定，创建时确定</li><li>存储原始二进制数据</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 创建Buffer</span></span>\n<span class="line"><span class="token keyword">const</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建10字节的Buffer</span></span>\n<span class="line"><span class="token keyword">const</span> buf2 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从字符串创建Buffer</span></span>\n<span class="line"><span class="token keyword">const</span> buf3 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 从数组创建Buffer</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// Buffer操作</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;hello&#39;</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf2<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-网络编程" tabindex="-1"><a class="header-anchor" href="#_5-网络编程"><span>5. 网络编程</span></a></h2><h3 id="q13-如何创建http服务器" tabindex="-1"><a class="header-anchor" href="#q13-如何创建http服务器"><span>Q13: 如何创建HTTP服务器？</span></a></h3><p><strong>答：</strong> 使用http模块创建HTTP服务器：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span></span>\n<span class="line">  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World\\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Server running at http://127.0.0.1:3000/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Express框架方式：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Server running on port 3000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q14-express中间件的原理" tabindex="-1"><a class="header-anchor" href="#q14-express中间件的原理"><span>Q14: Express中间件的原理？</span></a></h3><p><strong>答：</strong> Express中间件是一个函数，可以访问请求对象(req)、响应对象(res)和应用请求-响应循环中的下一个中间件函数(next)。</p><p>中间件功能：</p><ul><li>执行任何代码</li><li>修改请求和响应对象</li><li>结束请求-响应循环</li><li>调用堆栈中的下一个中间件</li></ul><p>类型：</p><ol><li><strong>应用级中间件</strong>：app.use()</li><li><strong>路由级中间件</strong>：router.use()</li><li><strong>错误处理中间件</strong>：接受四个参数(err, req, res, next)</li><li><strong>内置中间件</strong>：express.static等</li><li><strong>第三方中间件</strong>：body-parser等</li></ol><p>示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 应用级中间件</span></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Time:&#39;</span><span class="token punctuation">,</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 路由级中间件</span></span>\n<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ID:&#39;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;User Info&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-数据库操作" tabindex="-1"><a class="header-anchor" href="#_6-数据库操作"><span>6. 数据库操作</span></a></h2><h3 id="q15-node-js如何连接mysql数据库" tabindex="-1"><a class="header-anchor" href="#q15-node-js如何连接mysql数据库"><span>Q15: Node.js如何连接MySQL数据库？</span></a></h3><p><strong>答：</strong> 使用mysql或mysql2模块连接MySQL：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mysql2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 创建连接</span></span>\n<span class="line"><span class="token keyword">const</span> connection <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 连接数据库</span></span>\n<span class="line">connection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Connected to MySQL database&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 执行查询</span></span>\n<span class="line">connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&#39;SELECT * FROM users&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 使用连接池</span></span>\n<span class="line"><span class="token keyword">const</span> pool <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;password&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">connectionLimit</span><span class="token operator">:</span> <span class="token number">10</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">pool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token string">&#39;SELECT * FROM users WHERE id = ?&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q16-mongodb在node-js中的使用" tabindex="-1"><a class="header-anchor" href="#q16-mongodb在node-js中的使用"><span>Q16: MongoDB在Node.js中的使用？</span></a></h3><p><strong>答：</strong> 使用mongodb或mongoose模块操作MongoDB：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> MongoClient <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mongodb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 连接MongoDB</span></span>\n<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">connectToMongo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MongoClient</span><span class="token punctuation">(</span><span class="token string">&#39;mongodb://localhost:27017&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  </span>\n<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Connected to MongoDB&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span><span class="token string">&#39;testdb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&#39;users&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token comment">// 插入文档</span></span>\n<span class="line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">      <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&#39;john@example.com&#39;</span></span>\n<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Inserted document:&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>insertedId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token comment">// 查询文档</span></span>\n<span class="line">    <span class="token keyword">const</span> users <span class="token operator">=</span> <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Users:&#39;</span><span class="token punctuation">,</span> users<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"><span class="token function">connectToMongo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mongoose方式：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mongoose&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 定义Schema</span></span>\n<span class="line"><span class="token keyword">const</span> userSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">email</span><span class="token operator">:</span> String</span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">const</span> User <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&#39;User&#39;</span><span class="token punctuation">,</span> userSchema<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 连接数据库</span></span>\n<span class="line">mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&#39;mongodb://localhost:27017/testdb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 创建文档</span></span>\n<span class="line"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>\n<span class="line">  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">,</span></span>\n<span class="line">  <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&#39;john@example.com&#39;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;User saved&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-性能优化" tabindex="-1"><a class="header-anchor" href="#_7-性能优化"><span>7. 性能优化</span></a></h2><h3 id="q17-node-js性能优化策略" tabindex="-1"><a class="header-anchor" href="#q17-node-js性能优化策略"><span>Q17: Node.js性能优化策略？</span></a></h3><p><strong>答：</strong> Node.js性能优化策略包括：</p><ol><li><p><strong>使用缓存</strong>：</p><ul><li>Redis缓存热点数据</li><li>内存缓存临时数据</li></ul></li><li><p><strong>数据库优化</strong>：</p><ul><li>合理设计索引</li><li>使用连接池</li><li>批量操作</li></ul></li><li><p><strong>异步处理</strong>：</p><ul><li>避免阻塞操作</li><li>使用异步API</li></ul></li><li><p><strong>集群模式</strong>：</p><ul><li>使用cluster模块充分利用多核CPU</li><li>负载均衡</li></ul></li><li><p><strong>代码优化</strong>：</p><ul><li>避免内存泄漏</li><li>减少闭包使用</li><li>合理使用全局变量</li></ul></li><li><p><strong>资源压缩</strong>：</p><ul><li>Gzip压缩响应数据</li><li>静态资源压缩</li></ul></li></ol><h3 id="q18-如何排查node-js内存泄漏" tabindex="-1"><a class="header-anchor" href="#q18-如何排查node-js内存泄漏"><span>Q18: 如何排查Node.js内存泄漏？</span></a></h3><p><strong>答：</strong> 排查Node.js内存泄漏的方法：</p><ol><li><p><strong>使用内置工具</strong>：</p><ul><li>process.memoryUsage()：查看内存使用情况</li><li>--inspect参数配合Chrome DevTools分析</li></ul></li><li><p><strong>常见内存泄漏场景</strong>：</p><ul><li>全局变量意外创建</li><li>闭包持有大对象引用</li><li>事件监听器未正确移除</li><li>定时器未清理</li><li>缓存无限增长</li></ul></li><li><p><strong>监控工具</strong>：</p><ul><li>使用heapdump生成堆快照</li><li>使用clinic.js分析性能瓶颈</li><li>使用pm2监控应用状态</li></ul></li></ol><p>示例：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 监控内存使用</span></span>\n<span class="line"><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token keyword">const</span> usage <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Memory Usage:&#39;</span><span class="token punctuation">,</span> usage<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line"><span class="token comment">// 生成堆快照</span></span>\n<span class="line"><span class="token keyword">const</span> heapdump <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;heapdump&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">heapdump<span class="token punctuation">.</span><span class="token function">writeSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-错误处理和调试" tabindex="-1"><a class="header-anchor" href="#_8-错误处理和调试"><span>8. 错误处理和调试</span></a></h2><h3 id="q19-node-js错误处理最佳实践" tabindex="-1"><a class="header-anchor" href="#q19-node-js错误处理最佳实践"><span>Q19: Node.js错误处理最佳实践？</span></a></h3><p><strong>答：</strong> Node.js错误处理最佳实践：</p><ol><li><strong>统一错误处理</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;uncaughtException&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Uncaught Exception:&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span>\n<span class="line">process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;unhandledRejection&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">reason<span class="token punctuation">,</span> promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Unhandled Rejection at:&#39;</span><span class="token punctuation">,</span> promise<span class="token punctuation">,</span> <span class="token string">&#39;reason:&#39;</span><span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>自定义错误类</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">CustomError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span></span>\n<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">message<span class="token punctuation">,</span> code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span></span>\n<span class="line">  <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span>\n<span class="line"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CustomError</span><span class="token punctuation">(</span><span class="token string">&#39;Something went wrong&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CUSTOM_ERROR&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>中间件错误处理</strong>（Express）：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Something broke!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q20-node-js调试技巧" tabindex="-1"><a class="header-anchor" href="#q20-node-js调试技巧"><span>Q20: Node.js调试技巧？</span></a></h3><p><strong>答：</strong> Node.js调试技巧：</p><ol><li><strong>使用console.log()</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Debug:&#39;</span><span class="token punctuation">,</span> variable<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&#39;timer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token comment">// ... some code</span></span>\n<span class="line">console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&#39;timer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>使用调试器</strong>：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">node</span> <span class="token parameter variable">--inspect</span> app.js</span>\n<span class="line"><span class="token comment"># 然后在Chrome中访问 chrome://inspect</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>使用debug模块</strong>：</li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> debug <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;debug&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#39;app:startup&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&#39;Starting application...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><strong>使用Node.js内置调试工具</strong>：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">node</span> inspect app.js</span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="5"><li><strong>使用第三方调试工具</strong>： <ul><li>VS Code调试器</li><li>WebStorm调试器</li><li>ndb（Node.js调试器）</li></ul></li></ol>',131)])])}]]),l=JSON.parse('{"path":"/interview/nodejs/","title":"Node.js 面试题","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1. Node.js基础","slug":"_1-node-js基础","link":"#_1-node-js基础","children":[{"level":3,"title":"Q1: 什么是Node.js？它有什么特点？","slug":"q1-什么是node-js-它有什么特点","link":"#q1-什么是node-js-它有什么特点","children":[]},{"level":3,"title":"Q2: Node.js的事件循环机制？","slug":"q2-node-js的事件循环机制","link":"#q2-node-js的事件循环机制","children":[]},{"level":3,"title":"Q3: Node.js为什么适合I/O密集型应用？","slug":"q3-node-js为什么适合i-o密集型应用","link":"#q3-node-js为什么适合i-o密集型应用","children":[]}]},{"level":2,"title":"2. 模块系统","slug":"_2-模块系统","link":"#_2-模块系统","children":[{"level":3,"title":"Q4: Node.js的模块系统有哪些类型？","slug":"q4-node-js的模块系统有哪些类型","link":"#q4-node-js的模块系统有哪些类型","children":[]},{"level":3,"title":"Q5: CommonJS和ES Module的区别？","slug":"q5-commonjs和es-module的区别","link":"#q5-commonjs和es-module的区别","children":[]},{"level":3,"title":"Q6: module.exports和exports的区别？","slug":"q6-module-exports和exports的区别","link":"#q6-module-exports和exports的区别","children":[]}]},{"level":2,"title":"3. 异步编程","slug":"_3-异步编程","link":"#_3-异步编程","children":[{"level":3,"title":"Q7: 回调函数、Promise、async/await的区别？","slug":"q7-回调函数、promise、async-await的区别","link":"#q7-回调函数、promise、async-await的区别","children":[]},{"level":3,"title":"Q8: Promise的状态有哪些？","slug":"q8-promise的状态有哪些","link":"#q8-promise的状态有哪些","children":[]},{"level":3,"title":"Q9: 如何处理Promise的错误？","slug":"q9-如何处理promise的错误","link":"#q9-如何处理promise的错误","children":[]}]},{"level":2,"title":"4. 文件系统和流","slug":"_4-文件系统和流","link":"#_4-文件系统和流","children":[{"level":3,"title":"Q10: Node.js中fs模块的常用方法？","slug":"q10-node-js中fs模块的常用方法","link":"#q10-node-js中fs模块的常用方法","children":[]},{"level":3,"title":"Q11: 什么是Stream？有哪些类型？","slug":"q11-什么是stream-有哪些类型","link":"#q11-什么是stream-有哪些类型","children":[]},{"level":3,"title":"Q12: Buffer的作用是什么？","slug":"q12-buffer的作用是什么","link":"#q12-buffer的作用是什么","children":[]}]},{"level":2,"title":"5. 网络编程","slug":"_5-网络编程","link":"#_5-网络编程","children":[{"level":3,"title":"Q13: 如何创建HTTP服务器？","slug":"q13-如何创建http服务器","link":"#q13-如何创建http服务器","children":[]},{"level":3,"title":"Q14: Express中间件的原理？","slug":"q14-express中间件的原理","link":"#q14-express中间件的原理","children":[]}]},{"level":2,"title":"6. 数据库操作","slug":"_6-数据库操作","link":"#_6-数据库操作","children":[{"level":3,"title":"Q15: Node.js如何连接MySQL数据库？","slug":"q15-node-js如何连接mysql数据库","link":"#q15-node-js如何连接mysql数据库","children":[]},{"level":3,"title":"Q16: MongoDB在Node.js中的使用？","slug":"q16-mongodb在node-js中的使用","link":"#q16-mongodb在node-js中的使用","children":[]}]},{"level":2,"title":"7. 性能优化","slug":"_7-性能优化","link":"#_7-性能优化","children":[{"level":3,"title":"Q17: Node.js性能优化策略？","slug":"q17-node-js性能优化策略","link":"#q17-node-js性能优化策略","children":[]},{"level":3,"title":"Q18: 如何排查Node.js内存泄漏？","slug":"q18-如何排查node-js内存泄漏","link":"#q18-如何排查node-js内存泄漏","children":[]}]},{"level":2,"title":"8. 错误处理和调试","slug":"_8-错误处理和调试","link":"#_8-错误处理和调试","children":[{"level":3,"title":"Q19: Node.js错误处理最佳实践？","slug":"q19-node-js错误处理最佳实践","link":"#q19-node-js错误处理最佳实践","children":[]},{"level":3,"title":"Q20: Node.js调试技巧？","slug":"q20-node-js调试技巧","link":"#q20-node-js调试技巧","children":[]}]}],"git":{"updatedTime":1765444062000,"contributors":[{"name":"mingwzh","username":"mingwzh","email":"1127699551@qq.com","commits":1,"url":"https://github.com/mingwzh"}],"changelog":[{"hash":"8335c914e5d1588f5f8b9c0590d63a971106f6e5","time":1765444062000,"email":"1127699551@qq.com","author":"mingwzh","message":"feat(docs): 初始化技术面试宝典文档站点"}]},"filePathRelative":"interview/nodejs/README.md"}')}}]);