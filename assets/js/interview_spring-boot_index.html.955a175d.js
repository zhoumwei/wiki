"use strict";(self.webpackChunkmy_vuepress_site=self.webpackChunkmy_vuepress_site||[]).push([[533],{607:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>e,data:()=>l});var p=a(641);const t={},e=(0,a(262).A)(t,[["render",function(n,s){return(0,p.uX)(),(0,p.CE)("div",null,[...s[0]||(s[0]=[(0,p.Fv)('<h1 id="spring-boot-面试题" tabindex="-1"><a class="header-anchor" href="#spring-boot-面试题"><span>Spring Boot 面试题</span></a></h1><h2 id="_1-spring-boot基础" tabindex="-1"><a class="header-anchor" href="#_1-spring-boot基础"><span>1. Spring Boot基础</span></a></h2><h3 id="q1-什么是spring-boot-它解决了什么问题" tabindex="-1"><a class="header-anchor" href="#q1-什么是spring-boot-它解决了什么问题"><span>Q1: 什么是Spring Boot？它解决了什么问题？</span></a></h3><p><strong>答：</strong> Spring Boot是Spring框架的一个扩展，旨在简化新Spring应用的初始搭建以及开发过程。</p><p>解决的问题：</p><ul><li><strong>配置复杂</strong>：传统Spring应用需要大量的XML配置或注解配置</li><li><strong>依赖管理困难</strong>：需要手动管理各种jar包的版本兼容性</li><li><strong>部署复杂</strong>：需要配置Web服务器</li><li><strong>开发效率低</strong>：重复性的配置工作占用大量时间</li></ul><p>Spring Boot的特点：</p><ul><li>自动配置：根据类路径中的jar包自动配置Spring应用</li><li>起步依赖：简化Maven/Gradle配置</li><li>内嵌服务器：内置Tomcat、Jetty等服务器</li><li>生产就绪：提供健康检查、指标监控等功能</li></ul><h3 id="q2-spring-boot自动配置的原理是什么" tabindex="-1"><a class="header-anchor" href="#q2-spring-boot自动配置的原理是什么"><span>Q2: Spring Boot自动配置的原理是什么？</span></a></h3><p><strong>答：</strong> Spring Boot自动配置的原理基于以下几点：</p><ol><li><p><strong>@EnableAutoConfiguration注解</strong>：这是自动配置的核心注解，会导入AutoConfigurationImportSelector类</p></li><li><p><strong>SPI机制</strong>：通过META-INF/spring.factories文件定义自动配置类</p></li><li><p><strong>条件注解</strong>：使用@Conditional系列注解控制配置生效条件</p><ul><li>@ConditionalOnClass：当classpath下存在指定类时生效</li><li>@ConditionalOnMissingBean：当容器中不存在指定bean时生效</li><li>@ConditionalOnProperty：当配置文件中存在指定属性时生效</li></ul></li><li><p><strong>自动配置过程</strong>：</p><ul><li>Spring Boot启动时扫描META-INF/spring.factories文件</li><li>加载其中定义的自动配置类</li><li>根据条件注解判断是否满足配置条件</li><li>满足条件则注册相应的Bean到Spring容器中</li></ul></li></ol><h3 id="q3-spring-boot-starter的作用是什么" tabindex="-1"><a class="header-anchor" href="#q3-spring-boot-starter的作用是什么"><span>Q3: Spring Boot Starter的作用是什么？</span></a></h3><p><strong>答：</strong> Starter是一组方便的依赖描述符，可以一站式地获取所需的Spring和相关技术的一站式解决方案。</p><p>作用：</p><ul><li><strong>简化依赖管理</strong>：无需单独添加各种依赖及其版本</li><li><strong>快速开发</strong>：通过一组可传递的依赖关系快速搭建项目</li><li><strong>约定优于配置</strong>：遵循Spring Boot的最佳实践</li></ul><p>常见的Starter：</p><ul><li>spring-boot-starter-web：Web开发</li><li>spring-boot-starter-data-jpa：JPA数据访问</li><li>spring-boot-starter-test：测试框架</li><li>spring-boot-starter-security：安全框架</li></ul><h2 id="_2-spring-boot配置" tabindex="-1"><a class="header-anchor" href="#_2-spring-boot配置"><span>2. Spring Boot配置</span></a></h2><h3 id="q4-spring-boot配置文件的加载顺序是怎样的" tabindex="-1"><a class="header-anchor" href="#q4-spring-boot配置文件的加载顺序是怎样的"><span>Q4: Spring Boot配置文件的加载顺序是怎样的？</span></a></h3><p><strong>答：</strong> Spring Boot配置文件的加载顺序（优先级从高到低）：</p><ol><li>命令行参数</li><li>JNDI属性</li><li>系统环境变量</li><li>application-{profile}.properties/yml（jar包外相对路径config目录下）</li><li>application-{profile}.properties/yml（jar包外当前目录下）</li><li>application.properties/yml（jar包外相对路径config目录下）</li><li>application.properties/yml（jar包外当前目录下）</li><li>application-{profile}.properties/yml（jar包内）</li><li>application.properties/yml（jar包内）</li></ol><p>注意事项：</p><ul><li>高优先级配置会覆盖低优先级配置</li><li>相同优先级位置properties优先于yml</li><li>@PropertySource注解指定的配置文件优先级较低</li></ul><h3 id="q5-如何实现多环境配置" tabindex="-1"><a class="header-anchor" href="#q5-如何实现多环境配置"><span>Q5: 如何实现多环境配置？</span></a></h3><p><strong>答：</strong> Spring Boot支持多种方式实现多环境配置：</p><ol><li><p><strong>Profile方式</strong>：</p><ul><li>创建application-{profile}.properties文件</li><li>在application.properties中激活：spring.profiles.active=dev</li></ul></li><li><p><strong>@Profile注解</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span></span>\n<span class="line"><span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token string">&quot;dev&quot;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DevService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>条件注解</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;app.env&quot;</span><span class="token punctuation">,</span> havingValue <span class="token operator">=</span> <span class="token string">&quot;dev&quot;</span><span class="token punctuation">)</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p><strong>配置类方式</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span></span>\n<span class="line"><span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token string">&quot;prod&quot;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductionConfig</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="q6-spring-boot如何实现热部署" tabindex="-1"><a class="header-anchor" href="#q6-spring-boot如何实现热部署"><span>Q6: Spring Boot如何实现热部署？</span></a></h3><p><strong>答：</strong> Spring Boot实现热部署有两种方式：</p><ol><li><p><strong>Spring Boot DevTools</strong>：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：使用两个ClassLoader，一个加载不会改变的类（第三方jar包），一个加载会改变的类（自定义的类）。当检测到文件变化时，重新加载第二个ClassLoader。</p></li><li><p><strong>JRebel</strong>： 商业工具，功能更强大，支持更多的框架和场景。</p></li></ol><h2 id="_3-spring-boot-web开发" tabindex="-1"><a class="header-anchor" href="#_3-spring-boot-web开发"><span>3. Spring Boot Web开发</span></a></h2><h3 id="q7-spring-mvc和spring-boot的关系" tabindex="-1"><a class="header-anchor" href="#q7-spring-mvc和spring-boot的关系"><span>Q7: Spring MVC和Spring Boot的关系？</span></a></h3><p><strong>答：</strong> Spring MVC是Spring框架的一部分，专门用于Web开发。Spring Boot是对Spring框架的进一步封装和简化。</p><p>关系：</p><ul><li>Spring Boot包含了Spring MVC</li><li>Spring Boot简化了Spring MVC的配置</li><li>Spring Boot提供了自动配置，使得Spring MVC更容易使用</li></ul><p>Spring Boot对Spring MVC的增强：</p><ul><li>自动配置DispatcherServlet</li><li>自动配置ViewResolver</li><li>自动配置静态资源处理</li><li>内置Web服务器</li></ul><h3 id="q8-spring-boot如何处理跨域问题" tabindex="-1"><a class="header-anchor" href="#q8-spring-boot如何处理跨域问题"><span>Q8: Spring Boot如何处理跨域问题？</span></a></h3><p><strong>答：</strong> Spring Boot处理跨域有以下几种方式：</p><ol><li><p><strong>@CrossOrigin注解</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@RestController</span></span>\n<span class="line"><span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>全局配置</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CorsConfig</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        </span>\n<span class="line">        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        </span>\n<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>实现WebMvcConfigurer接口</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Override</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">                <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">                <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_4-spring-boot数据访问" tabindex="-1"><a class="header-anchor" href="#_4-spring-boot数据访问"><span>4. Spring Boot数据访问</span></a></h2><h3 id="q9-spring-boot整合mybatis的步骤" tabindex="-1"><a class="header-anchor" href="#q9-spring-boot整合mybatis的步骤"><span>Q9: Spring Boot整合MyBatis的步骤？</span></a></h3><p><strong>答：</strong> Spring Boot整合MyBatis的步骤：</p><ol><li><p><strong>添加依赖</strong>：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>配置数据源</strong>：</p><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties"><pre><code><span class="line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/test</span></span>\n<span class="line"><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span></span>\n<span class="line"><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span></span>\n<span class="line"><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>创建Mapper接口</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Mapper</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT * FROM user WHERE id = #{id}&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">    <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>在启动类上添加@MapperScan注解</strong>（可选）：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>\n<span class="line"><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.mapper&quot;</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="q10-spring-boot如何实现事务管理" tabindex="-1"><a class="header-anchor" href="#q10-spring-boot如何实现事务管理"><span>Q10: Spring Boot如何实现事务管理？</span></a></h3><p><strong>答：</strong> Spring Boot实现事务管理的方式：</p><ol><li><p><strong>添加@EnableTransactionManagement注解</strong>（Spring Boot自动开启）：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>\n<span class="line"><span class="token annotation punctuation">@EnableTransactionManagement</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用@Transactional注解</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Service</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token annotation punctuation">@Transactional</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        userMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token comment">// 其他业务逻辑</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>配置事务管理器</strong>（通常自动配置）：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Bean</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token class-name">PlatformTransactionManager</span> <span class="token function">transactionManager</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>事务传播行为：</p><ul><li>REQUIRED：支持当前事务，如果没有则新建</li><li>REQUIRES_NEW：新建事务，挂起当前事务</li><li>SUPPORTS：支持当前事务，如果没有则以非事务方式执行</li></ul><h2 id="_5-spring-boot安全" tabindex="-1"><a class="header-anchor" href="#_5-spring-boot安全"><span>5. Spring Boot安全</span></a></h2><h3 id="q11-spring-boot如何集成spring-security" tabindex="-1"><a class="header-anchor" href="#q11-spring-boot如何集成spring-security"><span>Q11: Spring Boot如何集成Spring Security？</span></a></h3><p><strong>答：</strong> Spring Boot集成Spring Security的步骤：</p><ol><li><p><strong>添加依赖</strong>：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>创建Security配置类</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Configuration</span></span>\n<span class="line"><span class="token annotation punctuation">@EnableWebSecurity</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Bean</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token class-name">SecurityFilterChain</span> <span class="token function">filterChain</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>\n<span class="line">        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/public/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>用户认证配置</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Bean</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token class-name">UserDetailsService</span> <span class="token function">userDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token class-name">UserDetails</span> user <span class="token operator">=</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token function">withDefaultPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">&quot;USER&quot;</span><span class="token punctuation">)</span></span>\n<span class="line">        <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InMemoryUserDetailsManager</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="q12-jwt在spring-boot中的应用" tabindex="-1"><a class="header-anchor" href="#q12-jwt在spring-boot中的应用"><span>Q12: JWT在Spring Boot中的应用？</span></a></h3><p><strong>答：</strong> JWT（JSON Web Token）在Spring Boot中的应用：</p><ol><li><p><strong>添加JWT依赖</strong>：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.jsonwebtoken<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jjwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>JWT工具类</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtUtil</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SECRET</span> <span class="token operator">=</span> <span class="token string">&quot;mySecret&quot;</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">EXPIRATION</span> <span class="token operator">=</span> <span class="token number">86400000</span><span class="token punctuation">;</span> <span class="token comment">// 24小时</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">Date</span> expirationDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">EXPIRATION</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span>expirationDate<span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS512</span><span class="token punctuation">,</span> <span class="token constant">SECRET</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">getUsernameFromToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token keyword">return</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span><span class="token constant">SECRET</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>\n<span class="line">            <span class="token punctuation">.</span><span class="token function">getSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>JWT过滤器</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtAuthenticationFilter</span> <span class="token keyword">extends</span> <span class="token class-name">OncePerRequestFilter</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Override</span></span>\n<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doFilterInternal</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> </span>\n<span class="line">                                  <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> </span>\n<span class="line">                                  <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> token<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Bearer &quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token class-name">JwtUtil</span><span class="token punctuation">.</span><span class="token function">getUsernameFromToken</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">                <span class="token class-name">Authentication</span> auth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UsernamePasswordAuthenticationToken</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> </span>\n<span class="line">                    <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">                <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAuthentication</span><span class="token punctuation">(</span>auth<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">            <span class="token punctuation">}</span></span>\n<span class="line">        <span class="token punctuation">}</span></span>\n<span class="line">        filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="_6-spring-boot测试" tabindex="-1"><a class="header-anchor" href="#_6-spring-boot测试"><span>6. Spring Boot测试</span></a></h2><h3 id="q13-spring-boot测试的相关注解有哪些" tabindex="-1"><a class="header-anchor" href="#q13-spring-boot测试的相关注解有哪些"><span>Q13: Spring Boot测试的相关注解有哪些？</span></a></h3><p><strong>答：</strong> Spring Boot常用的测试注解：</p><ol><li><strong>@SpringBootTest</strong>：完整的Spring Boot集成测试</li><li><strong>@WebMvcTest</strong>：专注于Web层的测试</li><li><strong>@DataJpaTest</strong>：专注于JPA数据访问层的测试</li><li><strong>@DataMongoTest</strong>：专注于MongoDB数据访问层的测试</li><li><strong>@RestClientTest</strong>：专注于REST客户端的测试</li><li><strong>@JsonTest</strong>：专注于JSON序列化/反序列化的测试</li></ol><p>示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootTest</span></span>\n<span class="line"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceTest</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token annotation punctuation">@Test</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSaveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        user<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token class-name">User</span> savedUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token function">assertNotNull</span><span class="token punctuation">(</span>savedUser<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q14-如何进行mock测试" tabindex="-1"><a class="header-anchor" href="#q14-如何进行mock测试"><span>Q14: 如何进行Mock测试？</span></a></h3><p><strong>答：</strong> Mock测试主要用于隔离依赖，专注测试目标类的功能。</p><ol><li><strong>@Mock注解</strong>：创建mock对象</li><li><strong>@InjectMocks注解</strong>：注入mock对象到目标类</li><li><strong>@MockBean注解</strong>：在Spring上下文中替换真实bean</li></ol><p>示例：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">MockitoJUnitRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceTest</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Mock</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token class-name">UserRepository</span> userRepository<span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token annotation punctuation">@InjectMocks</span></span>\n<span class="line">    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span></span>\n<span class="line">    </span>\n<span class="line">    <span class="token annotation punctuation">@Test</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testFindById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// 准备测试数据</span></span>\n<span class="line">        <span class="token class-name">User</span> mockUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        mockUser<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        mockUser<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        </span>\n<span class="line">        <span class="token comment">// 设置mock行为</span></span>\n<span class="line">        <span class="token function">when</span><span class="token punctuation">(</span>userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenReturn</span><span class="token punctuation">(</span><span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>mockUser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        </span>\n<span class="line">        <span class="token comment">// 执行测试</span></span>\n<span class="line">        <span class="token class-name">User</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        </span>\n<span class="line">        <span class="token comment">// 验证结果</span></span>\n<span class="line">        <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token function">verify</span><span class="token punctuation">(</span>userRepository<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-spring-boot监控和运维" tabindex="-1"><a class="header-anchor" href="#_7-spring-boot监控和运维"><span>7. Spring Boot监控和运维</span></a></h2><h3 id="q15-spring-boot-actuator的作用" tabindex="-1"><a class="header-anchor" href="#q15-spring-boot-actuator的作用"><span>Q15: Spring Boot Actuator的作用？</span></a></h3><p><strong>答：</strong> Spring Boot Actuator提供了生产级别的监控和管理功能。</p><p>主要功能：</p><ul><li><strong>健康检查</strong>：/actuator/health</li><li><strong>指标监控</strong>：/actuator/metrics</li><li><strong>环境信息</strong>：/actuator/env</li><li><strong>日志配置</strong>：/actuator/loggers</li><li><strong>HTTP追踪</strong>：/actuator/httptrace</li><li><strong>线程转储</strong>：/actuator/threaddump</li><li><strong>堆转储</strong>：/actuator/heapdump</li></ul><p>添加依赖：</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置：</p><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties"><pre><code><span class="line"><span class="token key attr-name">management.endpoints.web.exposure.include</span><span class="token punctuation">=</span><span class="token value attr-value">*</span></span>\n<span class="line"><span class="token key attr-name">management.endpoint.health.show-details</span><span class="token punctuation">=</span><span class="token value attr-value">always</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q16-spring-boot如何实现优雅停机" tabindex="-1"><a class="header-anchor" href="#q16-spring-boot如何实现优雅停机"><span>Q16: Spring Boot如何实现优雅停机？</span></a></h3><p><strong>答：</strong> Spring Boot实现优雅停机的方法：</p><ol><li><p><strong>配置优雅停机参数</strong>：</p><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties"><pre><code><span class="line"><span class="token comment"># Tomcat优雅停机</span></span>\n<span class="line"><span class="token key attr-name">server.shutdown</span><span class="token punctuation">=</span><span class="token value attr-value">graceful</span></span>\n<span class="line"><span class="token key attr-name">spring.lifecycle.timeout-per-shutdown-phase</span><span class="token punctuation">=</span><span class="token value attr-value">30s</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用@PreDestroy注解</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GracefulShutdown</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@PreDestroy</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// 清理资源</span></span>\n<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Shutting down gracefully...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>实现DisposableBean接口</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Component</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyService</span> <span class="token keyword">implements</span> <span class="token class-name">DisposableBean</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token annotation punctuation">@Override</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token comment">// 清理资源</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>注册关闭钩子</strong>：</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>\n<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span></span>\n<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>\n<span class="line">        <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addShutdownHook</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></span>\n<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Shutting down...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">            context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>\n<span class="line">    <span class="token punctuation">}</span></span>\n<span class="line"><span class="token punctuation">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol>',78)])])}]]),l=JSON.parse('{"path":"/interview/spring-boot/","title":"Spring Boot 面试题","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"1. Spring Boot基础","slug":"_1-spring-boot基础","link":"#_1-spring-boot基础","children":[{"level":3,"title":"Q1: 什么是Spring Boot？它解决了什么问题？","slug":"q1-什么是spring-boot-它解决了什么问题","link":"#q1-什么是spring-boot-它解决了什么问题","children":[]},{"level":3,"title":"Q2: Spring Boot自动配置的原理是什么？","slug":"q2-spring-boot自动配置的原理是什么","link":"#q2-spring-boot自动配置的原理是什么","children":[]},{"level":3,"title":"Q3: Spring Boot Starter的作用是什么？","slug":"q3-spring-boot-starter的作用是什么","link":"#q3-spring-boot-starter的作用是什么","children":[]}]},{"level":2,"title":"2. Spring Boot配置","slug":"_2-spring-boot配置","link":"#_2-spring-boot配置","children":[{"level":3,"title":"Q4: Spring Boot配置文件的加载顺序是怎样的？","slug":"q4-spring-boot配置文件的加载顺序是怎样的","link":"#q4-spring-boot配置文件的加载顺序是怎样的","children":[]},{"level":3,"title":"Q5: 如何实现多环境配置？","slug":"q5-如何实现多环境配置","link":"#q5-如何实现多环境配置","children":[]},{"level":3,"title":"Q6: Spring Boot如何实现热部署？","slug":"q6-spring-boot如何实现热部署","link":"#q6-spring-boot如何实现热部署","children":[]}]},{"level":2,"title":"3. Spring Boot Web开发","slug":"_3-spring-boot-web开发","link":"#_3-spring-boot-web开发","children":[{"level":3,"title":"Q7: Spring MVC和Spring Boot的关系？","slug":"q7-spring-mvc和spring-boot的关系","link":"#q7-spring-mvc和spring-boot的关系","children":[]},{"level":3,"title":"Q8: Spring Boot如何处理跨域问题？","slug":"q8-spring-boot如何处理跨域问题","link":"#q8-spring-boot如何处理跨域问题","children":[]}]},{"level":2,"title":"4. Spring Boot数据访问","slug":"_4-spring-boot数据访问","link":"#_4-spring-boot数据访问","children":[{"level":3,"title":"Q9: Spring Boot整合MyBatis的步骤？","slug":"q9-spring-boot整合mybatis的步骤","link":"#q9-spring-boot整合mybatis的步骤","children":[]},{"level":3,"title":"Q10: Spring Boot如何实现事务管理？","slug":"q10-spring-boot如何实现事务管理","link":"#q10-spring-boot如何实现事务管理","children":[]}]},{"level":2,"title":"5. Spring Boot安全","slug":"_5-spring-boot安全","link":"#_5-spring-boot安全","children":[{"level":3,"title":"Q11: Spring Boot如何集成Spring Security？","slug":"q11-spring-boot如何集成spring-security","link":"#q11-spring-boot如何集成spring-security","children":[]},{"level":3,"title":"Q12: JWT在Spring Boot中的应用？","slug":"q12-jwt在spring-boot中的应用","link":"#q12-jwt在spring-boot中的应用","children":[]}]},{"level":2,"title":"6. Spring Boot测试","slug":"_6-spring-boot测试","link":"#_6-spring-boot测试","children":[{"level":3,"title":"Q13: Spring Boot测试的相关注解有哪些？","slug":"q13-spring-boot测试的相关注解有哪些","link":"#q13-spring-boot测试的相关注解有哪些","children":[]},{"level":3,"title":"Q14: 如何进行Mock测试？","slug":"q14-如何进行mock测试","link":"#q14-如何进行mock测试","children":[]}]},{"level":2,"title":"7. Spring Boot监控和运维","slug":"_7-spring-boot监控和运维","link":"#_7-spring-boot监控和运维","children":[{"level":3,"title":"Q15: Spring Boot Actuator的作用？","slug":"q15-spring-boot-actuator的作用","link":"#q15-spring-boot-actuator的作用","children":[]},{"level":3,"title":"Q16: Spring Boot如何实现优雅停机？","slug":"q16-spring-boot如何实现优雅停机","link":"#q16-spring-boot如何实现优雅停机","children":[]}]}],"git":{"updatedTime":1765444062000,"contributors":[{"name":"mingwzh","username":"mingwzh","email":"1127699551@qq.com","commits":1,"url":"https://github.com/mingwzh"}],"changelog":[{"hash":"8335c914e5d1588f5f8b9c0590d63a971106f6e5","time":1765444062000,"email":"1127699551@qq.com","author":"mingwzh","message":"feat(docs): 初始化技术面试宝典文档站点"}]},"filePathRelative":"interview/spring-boot/README.md"}')}}]);